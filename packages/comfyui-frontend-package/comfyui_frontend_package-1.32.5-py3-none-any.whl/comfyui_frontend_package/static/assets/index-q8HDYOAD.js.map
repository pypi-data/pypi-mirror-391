{"version":3,"file":"index-q8HDYOAD.js","sources":["../../src/platform/telemetry/index.ts"],"sourcesContent":["/**\n * Telemetry Provider - OSS Build Safety\n *\n * CRITICAL: OSS Build Safety\n * This module is conditionally compiled based on distribution. When building\n * the open source version (DISTRIBUTION unset), this entire module and its dependencies\n * are excluded through via tree-shaking.\n *\n * To verify OSS builds exclude this code:\n * 1. `DISTRIBUTION= pnpm build` (OSS build)\n * 2. `grep -RinE --include='*.js' 'trackWorkflow|trackEvent|mixpanel' dist/` (should find nothing)\n * 3. Check dist/assets/*.js files contain no tracking code\n *\n * This approach maintains complete separation between cloud and OSS builds\n * while ensuring the open source version contains no telemetry dependencies.\n */\nimport { isCloud } from '@/platform/distribution/types'\n\nimport { MixpanelTelemetryProvider } from './providers/cloud/MixpanelTelemetryProvider'\nimport type { TelemetryProvider } from './types'\n\n// Singleton instance\nlet _telemetryProvider: TelemetryProvider | null = null\n\n/**\n * Telemetry factory - conditionally creates provider based on distribution\n * Returns singleton instance.\n *\n * CRITICAL: This returns undefined in OSS builds. There is no telemetry provider\n * for OSS builds and all tracking calls are no-ops.\n */\nexport function useTelemetry(): TelemetryProvider | null {\n  if (_telemetryProvider === null) {\n    // Use distribution check for tree-shaking\n    if (isCloud) {\n      _telemetryProvider = new MixpanelTelemetryProvider()\n    }\n    // For OSS builds, _telemetryProvider stays null\n  }\n\n  return _telemetryProvider\n}\n"],"names":["_telemetryProvider","useTelemetry","__name"],"mappings":"03CAsBA,IAAIA,EAA+C,KAS5C,SAASC,IAAyC,CAShD,OAAAD,CACT,CAVgBE,EAAAD,GAAA"}