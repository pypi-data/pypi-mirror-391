'''
    This code was AUTOGENERATED using the codama library.
    Please DO NOT EDIT THIS FILE, instead use visitors
    to add features, then rerun codama to update it.
    @see https://github.com/codama-idl/codama
'''

import borsh_construct as borsh
import typing
from construct import Container, GreedyBytes
from dataclasses import dataclass
from . import noticePeriodType, timeUnit, valuationModel
from ..shared import FixedSizeBytes

class NotifyAndSettleJSON(typing.TypedDict):
    model: valuationModel.ValuationModelJSON
    permissionlessFulfillment: bool
    subscribeNoticePeriodType: noticePeriodType.NoticePeriodTypeJSON
    subscribeNoticePeriod: int
    subscribeSettlementPeriod: int
    subscribeCancellationWindow: int
    redeemNoticePeriodType: noticePeriodType.NoticePeriodTypeJSON
    redeemNoticePeriod: int
    redeemSettlementPeriod: int
    redeemCancellationWindow: int
    timeUnit: timeUnit.TimeUnitJSON
    padding: list[int]

@dataclass
class NotifyAndSettle:
    layout: typing.ClassVar = borsh.CStruct(
        "model" /valuationModel.layout,
        "permissionlessFulfillment" /borsh.Bool,
        "subscribeNoticePeriodType" /noticePeriodType.layout,
        "subscribeNoticePeriod" /borsh.U64,
        "subscribeSettlementPeriod" /borsh.U64,
        "subscribeCancellationWindow" /borsh.U64,
        "redeemNoticePeriodType" /noticePeriodType.layout,
        "redeemNoticePeriod" /borsh.U64,
        "redeemSettlementPeriod" /borsh.U64,
        "redeemCancellationWindow" /borsh.U64,
        "timeUnit" /timeUnit.layout,
        "padding" /borsh.U8[3],
        )
    #fields
    model: valuationModel.ValuationModelKind
    permissionlessFulfillment: bool
    subscribeNoticePeriodType: noticePeriodType.NoticePeriodTypeKind
    subscribeNoticePeriod: int
    subscribeSettlementPeriod: int
    subscribeCancellationWindow: int
    redeemNoticePeriodType: noticePeriodType.NoticePeriodTypeKind
    redeemNoticePeriod: int
    redeemSettlementPeriod: int
    redeemCancellationWindow: int
    timeUnit: timeUnit.TimeUnitKind
    padding: bytes
    
    @classmethod
    def from_decoded(cls, obj: Container) -> "NotifyAndSettle":
        return cls(
        model=valuationModel.from_decoded(obj["model"]),
        permissionlessFulfillment=obj["permissionlessFulfillment"],
        subscribeNoticePeriodType=noticePeriodType.from_decoded(obj["subscribeNoticePeriodType"]),
        subscribeNoticePeriod=obj["subscribeNoticePeriod"],
        subscribeSettlementPeriod=obj["subscribeSettlementPeriod"],
        subscribeCancellationWindow=obj["subscribeCancellationWindow"],
        redeemNoticePeriodType=noticePeriodType.from_decoded(obj["redeemNoticePeriodType"]),
        redeemNoticePeriod=obj["redeemNoticePeriod"],
        redeemSettlementPeriod=obj["redeemSettlementPeriod"],
        redeemCancellationWindow=obj["redeemCancellationWindow"],
        timeUnit=timeUnit.from_decoded(obj["timeUnit"]),
        padding=bytes(obj["padding"]),
        )

    def to_encodable(self) -> dict[str, typing.Any]:
        return {
                "model": self.model.to_encodable(),
                "permissionlessFulfillment": self.permissionlessFulfillment,
                "subscribeNoticePeriodType": self.subscribeNoticePeriodType.to_encodable(),
                "subscribeNoticePeriod": self.subscribeNoticePeriod,
                "subscribeSettlementPeriod": self.subscribeSettlementPeriod,
                "subscribeCancellationWindow": self.subscribeCancellationWindow,
                "redeemNoticePeriodType": self.redeemNoticePeriodType.to_encodable(),
                "redeemNoticePeriod": self.redeemNoticePeriod,
                "redeemSettlementPeriod": self.redeemSettlementPeriod,
                "redeemCancellationWindow": self.redeemCancellationWindow,
                "timeUnit": self.timeUnit.to_encodable(),
                "padding": self.padding,
                }

    def to_json(self) -> NotifyAndSettleJSON:
        return {
                "model": self.model.to_json(),
                "permissionlessFulfillment": self.permissionlessFulfillment,
                "subscribeNoticePeriodType": self.subscribeNoticePeriodType.to_json(),
                "subscribeNoticePeriod": self.subscribeNoticePeriod,
                "subscribeSettlementPeriod": self.subscribeSettlementPeriod,
                "subscribeCancellationWindow": self.subscribeCancellationWindow,
                "redeemNoticePeriodType": self.redeemNoticePeriodType.to_json(),
                "redeemNoticePeriod": self.redeemNoticePeriod,
                "redeemSettlementPeriod": self.redeemSettlementPeriod,
                "redeemCancellationWindow": self.redeemCancellationWindow,
                "timeUnit": self.timeUnit.to_json(),
                "padding": list(self.padding),
                }

    @classmethod
    def from_json(cls, obj: NotifyAndSettleJSON) -> "NotifyAndSettle":
        return cls(
                model=valuationModel.from_json(obj["model"]),
                permissionlessFulfillment=obj["permissionlessFulfillment"],
                subscribeNoticePeriodType=noticePeriodType.from_json(obj["subscribeNoticePeriodType"]),
                subscribeNoticePeriod=obj["subscribeNoticePeriod"],
                subscribeSettlementPeriod=obj["subscribeSettlementPeriod"],
                subscribeCancellationWindow=obj["subscribeCancellationWindow"],
                redeemNoticePeriodType=noticePeriodType.from_json(obj["redeemNoticePeriodType"]),
                redeemNoticePeriod=obj["redeemNoticePeriod"],
                redeemSettlementPeriod=obj["redeemSettlementPeriod"],
                redeemCancellationWindow=obj["redeemCancellationWindow"],
                timeUnit=timeUnit.from_json(obj["timeUnit"]),
                padding=bytes(obj["padding"]),
        )






