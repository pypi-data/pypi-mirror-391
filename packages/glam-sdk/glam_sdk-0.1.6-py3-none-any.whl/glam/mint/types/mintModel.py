'''
    This code was AUTOGENERATED using the codama library.
    Please DO NOT EDIT THIS FILE, instead use visitors
    to add features, then rerun codama to update it.
    @see https://github.com/codama-idl/codama
'''

import borsh_construct as borsh
import typing
from anchorpy.borsh_extension import BorshPubkey
from construct import Construct, Container, GreedyBytes
from dataclasses import dataclass
from solders.pubkey import Pubkey as SolPubkey
from . import feeStructure, notifyAndSettle
from ..shared import FixedSizeBytes

class MintModelJSON(typing.TypedDict):
    symbol: typing.Optional[str]
    name: typing.Optional[list[int]]
    uri: typing.Optional[str]
    yearInSeconds: typing.Optional[int]
    permanentDelegate: typing.Optional[str]
    defaultAccountStateFrozen: typing.Optional[bool]
    feeStructure: typing.Optional[feeStructure.FeeStructureJSON]
    notifyAndSettle: typing.Optional[notifyAndSettle.NotifyAndSettleJSON]
    lockupPeriod: typing.Optional[int]
    maxCap: typing.Optional[int]
    minSubscription: typing.Optional[int]
    minRedemption: typing.Optional[int]
    allowlist: typing.Optional[list[str]]
    blocklist: typing.Optional[list[str]]

@dataclass
class MintModel:
    layout: typing.ClassVar = borsh.CStruct(
        "symbol" /borsh.Option(borsh.String),
        "name" /borsh.Option(FixedSizeBytes(32,GreedyBytes)),
        "uri" /borsh.Option(borsh.String),
        "yearInSeconds" /borsh.Option(borsh.U32),
        "permanentDelegate" /borsh.Option(BorshPubkey),
        "defaultAccountStateFrozen" /borsh.Option(borsh.Bool),
        "feeStructure" /borsh.Option(feeStructure.FeeStructure.layout),
        "notifyAndSettle" /borsh.Option(notifyAndSettle.NotifyAndSettle.layout),
        "lockupPeriod" /borsh.Option(borsh.U32),
        "maxCap" /borsh.Option(borsh.U64),
        "minSubscription" /borsh.Option(borsh.U64),
        "minRedemption" /borsh.Option(borsh.U64),
        "allowlist" /borsh.Option(borsh.Vec(typing.cast(Construct, BorshPubkey))),
        "blocklist" /borsh.Option(borsh.Vec(typing.cast(Construct, BorshPubkey))),
        )
    #fields
    symbol: typing.Optional[str]
    name: typing.Optional[bytes]
    uri: typing.Optional[str]
    yearInSeconds: typing.Optional[int]
    permanentDelegate: typing.Optional[SolPubkey]
    defaultAccountStateFrozen: typing.Optional[bool]
    feeStructure: typing.Optional[feeStructure.FeeStructure]
    notifyAndSettle: typing.Optional[notifyAndSettle.NotifyAndSettle]
    lockupPeriod: typing.Optional[int]
    maxCap: typing.Optional[int]
    minSubscription: typing.Optional[int]
    minRedemption: typing.Optional[int]
    allowlist: typing.Optional[list[SolPubkey]]
    blocklist: typing.Optional[list[SolPubkey]]
    
    @classmethod
    def from_decoded(cls, obj: Container) -> "MintModel":
        return cls(
        symbol=(None if obj["symbol"] is None else obj["symbol"]),
        name=(None if obj["name"] is None else obj["name"]),
        uri=(None if obj["uri"] is None else obj["uri"]),
        yearInSeconds=(None if obj["yearInSeconds"] is None else obj["yearInSeconds"]),
        permanentDelegate=(None if obj["permanentDelegate"] is None else obj["permanentDelegate"]),
        defaultAccountStateFrozen=(None if obj["defaultAccountStateFrozen"] is None else obj["defaultAccountStateFrozen"]),
        feeStructure=(None if obj["feeStructure"] is None else feeStructure.FeeStructure.from_decoded(obj["feeStructure"])),
        notifyAndSettle=(None if obj["notifyAndSettle"] is None else notifyAndSettle.NotifyAndSettle.from_decoded(obj["notifyAndSettle"])),
        lockupPeriod=(None if obj["lockupPeriod"] is None else obj["lockupPeriod"]),
        maxCap=(None if obj["maxCap"] is None else obj["maxCap"]),
        minSubscription=(None if obj["minSubscription"] is None else obj["minSubscription"]),
        minRedemption=(None if obj["minRedemption"] is None else obj["minRedemption"]),
        allowlist=(None if obj["allowlist"] is None else list(map(lambda item:SolPubkey.from_string(item),obj["allowlist"]))),
        blocklist=(None if obj["blocklist"] is None else list(map(lambda item:SolPubkey.from_string(item),obj["blocklist"]))),
        )

    def to_encodable(self) -> dict[str, typing.Any]:
        return {
                "symbol": self.symbol,
                "name": self.name,
                "uri": self.uri,
                "yearInSeconds": self.yearInSeconds,
                "permanentDelegate": self.permanentDelegate,
                "defaultAccountStateFrozen": self.defaultAccountStateFrozen,
                "feeStructure": (None if self.feeStructure is None else self.feeStructure.to_encodable()),
                "notifyAndSettle": (None if self.notifyAndSettle is None else self.notifyAndSettle.to_encodable()),
                "lockupPeriod": self.lockupPeriod,
                "maxCap": self.maxCap,
                "minSubscription": self.minSubscription,
                "minRedemption": self.minRedemption,
                "allowlist": self.allowlist,
                "blocklist": self.blocklist,
                }

    def to_json(self) -> MintModelJSON:
        return {
                "symbol": (None if self.symbol is None else self.symbol),
                "name": (None if self.name is None else list(self.name)),
                "uri": (None if self.uri is None else self.uri),
                "yearInSeconds": (None if self.yearInSeconds is None else self.yearInSeconds),
                "permanentDelegate": (None if self.permanentDelegate is None else str(self.permanentDelegate)),
                "defaultAccountStateFrozen": (None if self.defaultAccountStateFrozen is None else self.defaultAccountStateFrozen),
                "feeStructure": (None if self.feeStructure is None else self.feeStructure.to_json()),
                "notifyAndSettle": (None if self.notifyAndSettle is None else self.notifyAndSettle.to_json()),
                "lockupPeriod": (None if self.lockupPeriod is None else self.lockupPeriod),
                "maxCap": (None if self.maxCap is None else self.maxCap),
                "minSubscription": (None if self.minSubscription is None else self.minSubscription),
                "minRedemption": (None if self.minRedemption is None else self.minRedemption),
                "allowlist": (None if self.allowlist is None else list(map(lambda item:str(item),self.allowlist))),
                "blocklist": (None if self.blocklist is None else list(map(lambda item:str(item),self.blocklist))),
                }

    @classmethod
    def from_json(cls, obj: MintModelJSON) -> "MintModel":
        return cls(
                symbol=(None if obj["symbol"] is None else obj["symbol"]),
                name=(None if obj["name"] is None else bytes(obj["name"])),
                uri=(None if obj["uri"] is None else obj["uri"]),
                yearInSeconds=(None if obj["yearInSeconds"] is None else obj["yearInSeconds"]),
                permanentDelegate=(None if obj["permanentDelegate"] is None else SolPubkey.from_string(obj["permanentDelegate"])),
                defaultAccountStateFrozen=(None if obj["defaultAccountStateFrozen"] is None else obj["defaultAccountStateFrozen"]),
                feeStructure=(None if obj["feeStructure"] is None else feeStructure.FeeStructure.from_json(obj["feeStructure"])),
                notifyAndSettle=(None if obj["notifyAndSettle"] is None else notifyAndSettle.NotifyAndSettle.from_json(obj["notifyAndSettle"])),
                lockupPeriod=(None if obj["lockupPeriod"] is None else obj["lockupPeriod"]),
                maxCap=(None if obj["maxCap"] is None else obj["maxCap"]),
                minSubscription=(None if obj["minSubscription"] is None else obj["minSubscription"]),
                minRedemption=(None if obj["minRedemption"] is None else obj["minRedemption"]),
                allowlist=(None if obj["allowlist"] is None else list(map(lambda item:SolPubkey.from_string(item),obj["allowlist"]))),
                blocklist=(None if obj["blocklist"] is None else list(map(lambda item:SolPubkey.from_string(item),obj["blocklist"]))),
        )






