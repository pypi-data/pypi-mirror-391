'''
    This code was AUTOGENERATED using the codama library.
    Please DO NOT EDIT THIS FILE, instead use visitors
    to add features, then rerun codama to update it.
    @see https://github.com/codama-idl/codama
'''

import borsh_construct as borsh
import typing
from anchorpy.borsh_extension import BorshPubkey
from construct import Container, GreedyBytes
from dataclasses import dataclass
from solders.pubkey import Pubkey as SolPubkey
from . import requestType
from ..shared import FixedSizeBytes

class PendingRequestJSON(typing.TypedDict):
    user: str
    incoming: int
    outgoing: int
    createdAt: int
    fulfilledAt: int
    timeUnit: int
    requestType: requestType.RequestTypeJSON
    reserved: list[int]

@dataclass
class PendingRequest:
    layout: typing.ClassVar = borsh.CStruct(
        "user" /BorshPubkey,
        "incoming" /borsh.U64,
        "outgoing" /borsh.U64,
        "createdAt" /borsh.U64,
        "fulfilledAt" /borsh.U64,
        "timeUnit" /borsh.U8,
        "requestType" /requestType.layout,
        "reserved" /FixedSizeBytes(6,GreedyBytes),
        )
    #fields
    user: SolPubkey
    incoming: int
    outgoing: int
    createdAt: int
    fulfilledAt: int
    timeUnit: int
    requestType: requestType.RequestTypeKind
    reserved: bytes
    
    @classmethod
    def from_decoded(cls, obj: Container) -> "PendingRequest":
        return cls(
        user=obj["user"],
        incoming=obj["incoming"],
        outgoing=obj["outgoing"],
        createdAt=obj["createdAt"],
        fulfilledAt=obj["fulfilledAt"],
        timeUnit=obj["timeUnit"],
        requestType=requestType.from_decoded(obj["requestType"]),
        reserved=obj["reserved"],
        )

    def to_encodable(self) -> dict[str, typing.Any]:
        return {
                "user": self.user,
                "incoming": self.incoming,
                "outgoing": self.outgoing,
                "createdAt": self.createdAt,
                "fulfilledAt": self.fulfilledAt,
                "timeUnit": self.timeUnit,
                "requestType": self.requestType.to_encodable(),
                "reserved": self.reserved,
                }

    def to_json(self) -> PendingRequestJSON:
        return {
                "user": str(self.user),
                "incoming": self.incoming,
                "outgoing": self.outgoing,
                "createdAt": self.createdAt,
                "fulfilledAt": self.fulfilledAt,
                "timeUnit": self.timeUnit,
                "requestType": self.requestType.to_json(),
                "reserved": list(self.reserved),
                }

    @classmethod
    def from_json(cls, obj: PendingRequestJSON) -> "PendingRequest":
        return cls(
                user=SolPubkey.from_string(obj["user"]),
                incoming=obj["incoming"],
                outgoing=obj["outgoing"],
                createdAt=obj["createdAt"],
                fulfilledAt=obj["fulfilledAt"],
                timeUnit=obj["timeUnit"],
                requestType=requestType.from_json(obj["requestType"]),
                reserved=bytes(obj["reserved"]),
        )






