import{d as x,aS as F,aT as A,aU as B,R as U,K as N,h as d,j as P,aV as T,i as c,c as u,o as n,k as l,q as w,a as k,F as j,n as e,aW as D,l as o,m as i,aX as W,aY as q,g as E,aZ as H,a_ as G,E as I,A as K,H as L,a$ as M,ay as O,aC as X}from"./index-Dhxp3bbZ.js";import{u as Y}from"./usePrefectApi-DKC65jdX.js";import"./mapper-fQuCzVrD.js";const Z={class:"workspace-dashboard__header-actions"},$={class:"workspace-dashboard__subflows-toggle"},z={key:1,class:"workspace-dashboard__grid"},J={class:"workspace-dashboard__side"},te=x({__name:"Dashboard",async setup(Q){let r,p;F(B,{interval:A.secondsToMilliseconds(30)});const b=U(),h=Y(),v=([r,p]=N(()=>h.admin.getSettings()),r=await r,p(),r),_=d(()=>v.server.ui.show_promotional_content);localStorage.setItem("prefect-show-promotional-content",String(_.value));const m=P(b.flowRuns.getFlowRunsCount,[{}]),f=d(()=>m.executed),g=d(()=>m.response===0),y=[{text:"Dashboard"}],s=T({range:{type:"span",seconds:-X},tags:[]}),V=()=>E.map("WorkspaceDashboardFilter",s,"TaskRunsFilter");return(ee,a)=>{const C=c("p-toggle"),S=c("p-button"),R=c("p-layout-default");return n(),u(R,{class:"workspace-dashboard"},{header:l(()=>[o(e(K),{crumbs:y,class:"workspace-dashboard__page-heading"},L({_:2},[f.value&&!g.value?{name:"actions",fn:l(()=>[i("div",Z,[i("div",$,[o(C,{modelValue:e(s).hideSubflows,"onUpdate:modelValue":a[0]||(a[0]=t=>e(s).hideSubflows=t),append:"Hide subflows"},null,8,["modelValue"])]),o(e(M),{selected:e(s).tags,"onUpdate:selected":a[1]||(a[1]=t=>e(s).tags=t),"empty-message":"All tags"},null,8,["selected"]),o(e(O),{modelValue:e(s).range,"onUpdate:modelValue":a[2]||(a[2]=t=>e(s).range=t),class:"workspace-dashboard__date-select"},null,8,["modelValue"])])]),key:"0"}:void 0]),1024)]),default:l(()=>[f.value?(n(),w(j,{key:0},[g.value?(n(),u(e(D),{key:0})):(n(),w("div",z,[o(e(W),{filter:e(s)},null,8,["filter"]),i("div",J,[o(e(q),{filter:V}),o(e(H),{class:"workspace-dashboard__work-pools",filter:e(s)},null,8,["filter"])])]))],64)):k("",!0),_.value?(n(),u(e(G),{key:1,title:"Ready to scale?",subtitle:"Webhooks, role and object-level security, and serverless push work pools on Prefect Cloud"},{actions:l(()=>[o(S,{to:"https://www.prefect.io/cloud-vs-oss?utm_source=oss&utm_medium=oss&utm_campaign=oss&utm_term=none&utm_content=none",target:"_blank",primary:""},{default:l(()=>[...a[3]||(a[3]=[I(" Upgrade to Cloud ",-1)])]),_:1})]),_:1})):k("",!0)]),_:1})}}});export{te as default};
//# sourceMappingURL=Dashboard-CaZ3TyEv.js.map
