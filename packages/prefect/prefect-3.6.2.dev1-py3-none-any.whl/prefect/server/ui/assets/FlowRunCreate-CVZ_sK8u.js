import{cb as g,d as C,R as h,v as b,e as k,al as S,cc as F,ae as J,h as N,i as x,c as D,a as I,n as t,o as B,k as u,l as m,cd as O,ce as T,cf as V,cg as P,bg as d,L as p,Y as U}from"./index-Dhxp3bbZ.js";import{u as Y}from"./usePageTitle-Dn837hxV.js";class z extends g{parse(a){return JSON.parse(decodeURIComponent(a??""))}format(a){return encodeURIComponent(JSON.stringify(a))}}const Q=C({__name:"FlowRunCreate",setup(i){const a=h(),r=b("deploymentId"),l=k(),f=S("parameters",z,void 0),{deployment:o}=F(r),n=J(!1),y=async c=>{if(!n.value)try{n.value=!0;const s=await a.deployments.createDeploymentFlowRun(r.value,c),e=c.state?.stateDetails?.scheduledTime??void 0,v=!e,w=V(P,{flowRun:s,flowRunRoute:d.flowRun,router:l,immediate:v,startTime:e});p(w,"success"),l.push(d.deployment(r.value))}catch(s){const e=U(s,"Something went wrong trying to create a flow run");p(e,"error"),console.error(s)}finally{n.value=!1}},R=()=>{l.back()},_=N(()=>o.value?`Create Flow Run for Deployment: ${o.value.name}`:"Create Flow Run for Deployment");return Y(_),(c,s)=>{const e=x("p-layout-default");return t(o)?(B(),D(e,{key:0},{header:u(()=>[m(t(T),{deployment:t(o)},null,8,["deployment"])]),default:u(()=>[m(t(O),{deployment:t(o),parameters:t(f),disabled:n.value,onSubmit:y,onCancel:R},null,8,["deployment","parameters","disabled"])]),_:1})):I("",!0)}}});export{Q as default};
//# sourceMappingURL=FlowRunCreate-CVZ_sK8u.js.map
