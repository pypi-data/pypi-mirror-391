# CellType Agent é…ç½®æ–‡ä»¶ç³»ç»Ÿè¯¦è§£

## ğŸ“‹ ç›®å½•

- [ä¸€ã€é…ç½®æ–‡ä»¶æ¦‚è§ˆ](#ä¸€é…ç½®æ–‡ä»¶æ¦‚è§ˆ)
- [äºŒã€é…ç½®æ–‡ä»¶è¯»å–å’Œåˆå§‹åŒ–æµç¨‹](#äºŒé…ç½®æ–‡ä»¶è¯»å–å’Œåˆå§‹åŒ–æµç¨‹)
- [ä¸‰ã€è·¯å¾„é…ç½®çš„è‡ªåŠ¨å¤„ç†æœºåˆ¶](#ä¸‰è·¯å¾„é…ç½®çš„è‡ªåŠ¨å¤„ç†æœºåˆ¶)
- [å››ã€å®é™…è¿è¡Œåœºæ™¯ç¤ºä¾‹](#å››å®é™…è¿è¡Œåœºæ™¯ç¤ºä¾‹)
- [äº”ã€å…³é”®è®¾è®¡ç‰¹ç‚¹](#äº”å…³é”®è®¾è®¡ç‰¹ç‚¹)
- [å…­ã€æœ€ä½³å®è·µå»ºè®®](#å…­æœ€ä½³å®è·µå»ºè®®)

---

## ä¸€ã€é…ç½®æ–‡ä»¶æ¦‚è§ˆ

### 1.1 ä¸¤ä¸ªé…ç½®æ–‡ä»¶çš„å®šä½

#### `config.json` - ç®€å•ç›®å½•é…ç½®ï¼ˆå‡ ä¹æœªä½¿ç”¨ï¼‰

```json
{
  "artifacts_dir": "artifacts",
  "directories": {
    "logs": "logs",
    "outputs": "outputs",
    "downloads": "downloads",
    "cache": "cache",
    "temp": "tmp"
  }
}
```

**çŠ¶æ€**: è¿™ä¸ªæ–‡ä»¶åœ¨å½“å‰ä»£ç ä¸­å‡ ä¹æ²¡æœ‰å®é™…ä½¿ç”¨ï¼Œåªæ˜¯ä½œä¸ºå¤‡ä»½é…ç½®å­˜åœ¨ã€‚

#### `agentype_config.json` - æ ¸å¿ƒä¸»é…ç½®æ–‡ä»¶ â­

```json
{
  "version": "1.0.0",
  "updated_at": "2025-10-11T16:12:48.354406",
  "paths": {
    "project_root": "/root/code/gitpackage/agentype/utils/celltype-mcp-server",
    "outputs_dir": "/path/to/outputs",
    "cache_dir": "/path/to/cache",
    "logs_dir": "/path/to/logs",
    "results_dir": "/path/to/results",
    "downloads_dir": "/path/to/downloads",
    "temp_dir": "/path/to/temp"
  },
  "llm": {
    "api_base": "https://api.siliconflow.cn/v1",
    "api_key": "sk-xxx...",
    "model": "Pro/deepseek-ai/DeepSeek-V3",
    "max_tokens": 4000,
    "temperature": 0.3
  },
  "project": {
    "language": "zh",
    "enable_streaming": true,
    "enable_logging": true,
    "max_parallel_tasks": 3,
    "cache_expiry_days": 30,
    "auto_cleanup": true
  },
  "agents": {
    "celltypeMainagent": {
      "enabled": true,
      "timeout": 30,
      "max_retries": 3,
      "log_level": "INFO"
    },
    "celltypeSubagent": { "enabled": true, "timeout": 30, "max_retries": 3, "log_level": "INFO" },
    "celltypeDataAgent": { "enabled": true, "timeout": 30, "max_retries": 3, "log_level": "INFO" },
    "celltypeAppAgent": { "enabled": true, "timeout": 30, "max_retries": 3, "log_level": "INFO" }
  }
}
```

### 1.2 é…ç½®æ–‡ä»¶çš„ä½œç”¨åŸŸ

| é…ç½®é¡¹ | ä½œç”¨ | é»˜è®¤å€¼ |
|--------|------|--------|
| `paths` | æ‰€æœ‰è¾“å‡ºç›®å½•çš„ç»å¯¹è·¯å¾„ | åŸºäº `project_root` è‡ªåŠ¨ç”Ÿæˆ |
| `llm` | LLM API é…ç½®ï¼ˆå¿…éœ€ï¼‰ | ä»ç¯å¢ƒå˜é‡è¯»å–æˆ–ä¸º `null` |
| `project` | é¡¹ç›®çº§è®¾ç½® | è¯­è¨€ã€æµå¼è¾“å‡ºã€æ—¥å¿—ç­‰ |
| `agents` | å„ä¸ª Agent çš„é…ç½® | è¶…æ—¶ã€é‡è¯•ã€æ—¥å¿—çº§åˆ«ç­‰ |

---

## äºŒã€é…ç½®æ–‡ä»¶è¯»å–å’Œåˆå§‹åŒ–æµç¨‹

### 2.1 æ ¸å¿ƒå…¥å£ç‚¹

**æ–‡ä»¶ä½ç½®**: `agentype/config/global_config.py`

**æ ¸å¿ƒç±»**: `GlobalConfigManager`ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰

### 2.2 å®Œæ•´åˆå§‹åŒ–æµç¨‹å›¾

```
GlobalConfigManager åˆå§‹åŒ–
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ç¯å¢ƒå˜é‡æ£€æµ‹ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰            â”‚
â”‚    â”œâ”€ CELLTYPE_PROJECT_ROOT            â”‚
â”‚    â”œâ”€ CELLTYPE_CONFIG_FILE             â”‚
â”‚    â””â”€ CELLTYPE_CONFIG_PATH  â­         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. _detect_external_config()å‡½æ•°        â”‚
â”‚    åŠ¨æ€æœç´¢é…ç½®æ–‡ä»¶                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. é…ç½®æ–‡ä»¶æœç´¢é¡ºåºï¼ˆcandidatesåˆ—è¡¨ï¼‰     â”‚
â”‚    â‘  ç¯å¢ƒå˜é‡ CELLTYPE_CONFIG_PATH      â”‚
â”‚    â‘¡ å½“å‰å·¥ä½œç›®å½•/agentype_config.jsonâ”‚
â”‚    â‘¢ ä¸Šçº§ç›®å½•/agentype_config.json  â”‚
â”‚    â‘£ ä¸Šä¸¤çº§ç›®å½•/agentype_config.jsonâ”‚
â”‚    â‘¤ ä¸Šä¸‰çº§/å››çº§ç›®å½•...                  â”‚
â”‚    â‘¥ è„šæœ¬æ‰€åœ¨ç›®å½•                        â”‚
â”‚    â‘¦ æ¨¡å—è·¯å¾„                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. é…ç½®éªŒè¯                             â”‚
â”‚    âœ“ æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨                    â”‚
â”‚    âœ“ éªŒè¯ JSON æ ¼å¼                     â”‚
â”‚    âœ“ éªŒè¯ API é…ç½®ï¼ˆapi_base/api_keyï¼‰  â”‚
â”‚    â””â”€ å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªä¸ä¸ºç©º               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. _load_or_create_config()             â”‚
â”‚    â”œâ”€ æ–‡ä»¶å­˜åœ¨ â†’ _load_from_dict()      â”‚
â”‚    â””â”€ æ–‡ä»¶ä¸å­˜åœ¨ â†’ _create_default_config()â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. _check_env_conflicts()               â”‚
â”‚    â”œâ”€ æ£€æŸ¥ç¯å¢ƒå˜é‡ä¸é…ç½®æ–‡ä»¶å†²çª         â”‚
â”‚    â”œâ”€ è‡ªåŠ¨å¡«å……ç©ºå€¼                       â”‚
â”‚    â””â”€ æ˜¾ç¤ºå†²çªè­¦å‘Š                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. save_config()                        â”‚
â”‚    ä¿å­˜é…ç½®æ–‡ä»¶ï¼ˆç¡®ä¿æ–‡ä»¶å­˜åœ¨ï¼‰           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 å…³é”®å‡½æ•°è¯¦è§£

#### 2.3.1 `_detect_external_config()` - æ™ºèƒ½é…ç½®æœç´¢

```python
def _detect_external_config() -> Optional[Path]:
    """æ£€æµ‹é…ç½®æ–‡ä»¶ï¼Œä¼˜å…ˆä½¿ç”¨ç¯å¢ƒå˜é‡æŒ‡å®šçš„è·¯å¾„"""

    # 1. é¦–å…ˆæ£€æŸ¥ç¯å¢ƒå˜é‡ï¼ˆå­Agentä¸“ç”¨ï¼Œæœ€é«˜ä¼˜å…ˆçº§ï¼‰
    env_config_path = os.getenv("CELLTYPE_CONFIG_PATH")
    if env_config_path and Path(env_config_path).exists():
        # éªŒè¯APIé…ç½®ä¸ä¸ºç©º
        if has_valid_api_config(env_config_path):
            return env_config_path

    # 2. é€çº§å‘ä¸Šæœç´¢å½“å‰ç›®å½•åŠçˆ¶ç›®å½•
    candidates = [
        Path.cwd() / "agentype_config.json",           # ç¬¬1ä¼˜å…ˆçº§
        Path.cwd().parent / "agentype_config.json",    # ç¬¬2ä¼˜å…ˆçº§
        Path.cwd().parent.parent / "agentype_config.json",  # ç¬¬3ä¼˜å…ˆçº§
        # ... ç»§ç»­å‘ä¸Š4-5çº§
    ]

    # 3. æ·»åŠ è„šæœ¬è·¯å¾„å’Œæ¨¡å—è·¯å¾„
    # sys.argv[0], inspect.stack()

    # 4. éªŒè¯æ¯ä¸ªå€™é€‰æ–‡ä»¶
    for candidate in candidates:
        if candidate.exists():
            # è¯»å–å¹¶éªŒè¯ llm é…ç½®ä¸ä¸ºç©º
            if has_valid_api_config(candidate):
                return candidate

    return None
```

**éªŒè¯æ ‡å‡†**: é…ç½®æ–‡ä»¶å¿…é¡»è‡³å°‘åŒ…å« `api_base` æˆ– `api_key` ä¸­çš„ä¸€ä¸ªéç©ºå€¼ã€‚

#### 2.3.2 `_create_default_config()` - åˆ›å»ºé»˜è®¤é…ç½®

```python
def _create_default_config(self):
    """åˆ›å»ºé»˜è®¤é…ç½®"""

    # 1. LLMé…ç½® - å…¨éƒ¨ä»ç¯å¢ƒå˜é‡è¯»å–
    self._llm_config = LLMConfig(
        api_base=os.getenv("OPENAI_API_BASE"),      # None å¦‚æœæœªè®¾ç½®
        api_key=os.getenv("OPENAI_API_KEY"),        # None å¦‚æœæœªè®¾ç½®
        model=os.getenv("OPENAI_MODEL", "gpt-4")    # é»˜è®¤ "gpt-4"
    )

    # 2. é¡¹ç›®é…ç½® - å¸¦é»˜è®¤å€¼
    self._project_config = ProjectConfig(
        language=os.getenv("CELLTYPE_LANGUAGE", "zh"),
        enable_streaming=os.getenv("CELLTYPE_ENABLE_STREAMING", "true").lower() == "true",
        enable_logging=os.getenv("CELLTYPE_ENABLE_LOGGING", "true").lower() == "true"
    )

    # 3. Agenté…ç½® - ä½¿ç”¨é»˜è®¤å€¼
    self._agents_config = {
        "celltypeMainagent": AgentConfig(),    # enabled=True, timeout=30, max_retries=3
        "celltypeSubagent": AgentConfig(),
        "celltypeDataAgent": AgentConfig(),
        "celltypeAppAgent": AgentConfig()
    }
```

#### 2.3.3 `_check_env_conflicts()` - ç¯å¢ƒå˜é‡å†²çªå¤„ç†

è¿™æ˜¯ä¸€ä¸ªéå¸¸æ™ºèƒ½çš„æœºåˆ¶ï¼š

```python
def _check_env_conflicts(self):
    # 1. è‡ªåŠ¨å¡«å……ç©ºå€¼
    env_api_base = os.getenv("OPENAI_API_BASE")
    if env_api_base:
        if not self._llm_config.api_base or self._llm_config.api_base.strip() == "":
            # é…ç½®æ–‡ä»¶ä¸ºç©ºï¼Œè‡ªåŠ¨ä½¿ç”¨ç¯å¢ƒå˜é‡
            self._llm_config.api_base = env_api_base
            self.save_config()  # â­ ä¿å­˜æ›´æ–°
            print("âœ… è‡ªåŠ¨æ›´æ–°é…ç½®æ–‡ä»¶ï¼ˆç©ºå€¼å¡«å……ï¼‰")

    # 2. æ£€æµ‹å†²çª
    if env_api_base and env_api_base != self._llm_config.api_base:
        # æ˜¾ç¤ºè­¦å‘Šï¼šä¼˜å…ˆä½¿ç”¨é…ç½®æ–‡ä»¶çš„å€¼
        print("âš ï¸ ç¯å¢ƒå˜é‡ä¸é…ç½®æ–‡ä»¶å­˜åœ¨ä¸ä¸€è‡´")
        print(f"   é…ç½®æ–‡ä»¶: {self._llm_config.api_base} â† å®é™…ä½¿ç”¨")
```

**ç‰¹ç‚¹**:
- âœ… è‡ªåŠ¨å¡«å……ï¼šé…ç½®æ–‡ä»¶ä¸ºç©ºæ—¶ä½¿ç”¨ç¯å¢ƒå˜é‡
- âœ… å†²çªæç¤ºï¼šæ˜¾ç¤ºå“ªä¸ªå€¼å®é™…ç”Ÿæ•ˆ
- âœ… ç«‹å³ä¿å­˜ï¼šå¡«å……åç«‹å³ä¿å­˜åˆ°æ–‡ä»¶

---

## ä¸‰ã€è·¯å¾„é…ç½®çš„è‡ªåŠ¨å¤„ç†æœºåˆ¶

### 3.1 `project_root` çš„ç¡®å®šé€»è¾‘ï¼ˆä¸‰çº§ä¼˜å…ˆçº§ï¼‰

```python
def _initialize(self):
    env_root = os.getenv("CELLTYPE_PROJECT_ROOT")         # ä¼˜å…ˆçº§1: ç¯å¢ƒå˜é‡
    external_config = _detect_external_config()           # ä¼˜å…ˆçº§2: æœç´¢åˆ°çš„é…ç½®æ–‡ä»¶

    # ä¼˜å…ˆçº§åˆ¤æ–­
    if env_root:
        project_root = Path(env_root).expanduser()        # ä½¿ç”¨ç¯å¢ƒå˜é‡
    elif external_config:
        project_root = external_config.parent             # ä½¿ç”¨é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•
    else:
        project_root = Path.cwd()                         # ä½¿ç”¨å½“å‰å·¥ä½œç›®å½• â­

    # è½¬æ¢ä¸ºç»å¯¹è·¯å¾„
    project_root = project_root.resolve()
    self.project_root = project_root
```

### 3.2 æ‰€æœ‰è·¯å¾„çš„è‡ªåŠ¨æ„å»º

```python
def _init_paths(self):
    """åˆå§‹åŒ–è·¯å¾„é…ç½® - å…¨éƒ¨åŸºäº project_root"""
    outputs_dir = self.project_root / "outputs"

    self._paths = PathConfig(
        project_root=self.project_root,
        outputs_dir=outputs_dir,
        cache_dir=outputs_dir / "cache",
        logs_dir=outputs_dir / "logs",
        results_dir=outputs_dir / "results",
        downloads_dir=outputs_dir / "downloads",
        temp_dir=outputs_dir / "temp"
    )

    # â­ è‡ªåŠ¨åˆ›å»ºæ‰€æœ‰ç›®å½•
    for path in [self._paths.outputs_dir, self._paths.cache_dir,
                 self._paths.logs_dir, self._paths.results_dir,
                 self._paths.downloads_dir, self._paths.temp_dir]:
        path.mkdir(parents=True, exist_ok=True)

    # â­ ä¸ºæ¯ä¸ªAgentåˆ›å»ºä¸“é—¨çš„ç¼“å­˜å­ç›®å½•
    for agent_name in ["celltypeMainagent", "celltypeSubagent",
                       "celltypeDataAgent", "celltypeAppAgent"]:
        agent_cache_dir = self._paths.cache_dir / agent_name
        agent_cache_dir.mkdir(parents=True, exist_ok=True)
```

### 3.3 è‡ªåŠ¨åˆ›å»ºçš„ç›®å½•ç»“æ„

```
project_root/
â”œâ”€â”€ agentype_config.json          # é…ç½®æ–‡ä»¶
â””â”€â”€ outputs/                           # æ‰€æœ‰è¾“å‡º
    â”œâ”€â”€ cache/                         # ç¼“å­˜ç›®å½•
    â”‚   â”œâ”€â”€ celltypeMainagent/         # MainAgentç¼“å­˜
    â”‚   â”œâ”€â”€ celltypeSubagent/          # SubAgentç¼“å­˜
    â”‚   â”œâ”€â”€ celltypeDataAgent/         # DataAgentç¼“å­˜
    â”‚   â””â”€â”€ celltypeAppAgent/          # AppAgentç¼“å­˜
    â”œâ”€â”€ logs/                          # æ—¥å¿—ç›®å½•
    â”œâ”€â”€ results/                       # ç»“æœç›®å½•
    â”œâ”€â”€ downloads/                     # ä¸‹è½½ç›®å½•
    â””â”€â”€ temp/                          # ä¸´æ—¶ç›®å½•
```

**æ‰€æœ‰è¿™äº›ç›®å½•éƒ½ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œä¸éœ€è¦æ‰‹åŠ¨æ“ä½œï¼**

---

## å››ã€å®é™…è¿è¡Œåœºæ™¯ç¤ºä¾‹

### 4.1 åœºæ™¯1: åœ¨ testfile ç›®å½•è¿è¡Œï¼ˆæ— é…ç½®æ–‡ä»¶ï¼‰

```bash
cd /root/code/gitpackage/agentype/utils/testfile
python -m agentype.mainagent.services.mcp_server
```

**è‡ªåŠ¨å¤„ç†è¿‡ç¨‹**:

```
1. ç¡®å®š project_root
   â”œâ”€ ç¯å¢ƒå˜é‡ CELLTYPE_PROJECT_ROOT? â†’ æœªè®¾ç½®
   â”œâ”€ æœç´¢é…ç½®æ–‡ä»¶? â†’ æœªæ‰¾åˆ°
   â””â”€ ä½¿ç”¨ Path.cwd() â†’ /root/code/gitpackage/agentype/utils/testfile â­

2. æ„å»ºæ‰€æœ‰è·¯å¾„ï¼ˆåŸºäº project_rootï¼‰
   project_root  = /root/code/gitpackage/agentype/utils/testfile
   outputs_dir   = /root/code/gitpackage/agentype/utils/testfile/outputs
   cache_dir     = /root/code/gitpackage/agentype/utils/testfile/outputs/cache
   logs_dir      = /root/code/gitpackage/agentype/utils/testfile/outputs/logs
   results_dir   = /root/code/gitpackage/agentype/utils/testfile/outputs/results
   downloads_dir = /root/code/gitpackage/agentype/utils/testfile/outputs/downloads
   temp_dir      = /root/code/gitpackage/agentype/utils/testfile/outputs/temp

3. è‡ªåŠ¨åˆ›å»ºç›®å½•ç»“æ„
   âœ“ åˆ›å»º outputs/ åŠæ‰€æœ‰å­ç›®å½•
   âœ“ åˆ›å»º Agent ä¸“ç”¨ç¼“å­˜ç›®å½•

4. è‡ªåŠ¨åˆ›å»ºé…ç½®æ–‡ä»¶
   âœ“ /root/code/gitpackage/agentype/utils/testfile/agentype_config.json

5. æœ€ç»ˆç›®å½•ç»“æ„
   testfile/
   â”œâ”€â”€ agentype_config.json     â† è‡ªåŠ¨åˆ›å»º
   â”œâ”€â”€ sce.rds                        â† ä½ çš„æµ‹è¯•æ–‡ä»¶
   â”œâ”€â”€ clean.R                        â† ä½ çš„æµ‹è¯•æ–‡ä»¶
   â””â”€â”€ outputs/                       â† è‡ªåŠ¨åˆ›å»º
       â”œâ”€â”€ cache/
       â”‚   â”œâ”€â”€ celltypeMainagent/
       â”‚   â”œâ”€â”€ celltypeSubagent/
       â”‚   â”œâ”€â”€ celltypeDataAgent/
       â”‚   â””â”€â”€ celltypeAppAgent/
       â”œâ”€â”€ logs/
       â”œâ”€â”€ results/
       â”œâ”€â”€ downloads/
       â””â”€â”€ temp/
```

### 4.2 åœºæ™¯2: åœ¨ä¸Šçº§ç›®å½•æœ‰é…ç½®æ–‡ä»¶

```bash
# å‡è®¾é…ç½®æ–‡ä»¶åœ¨è¿™é‡Œ
/root/code/gitpackage/agentype/utils/celltype-mcp-server/agentype_config.json

# ä½ åœ¨ testfile ç›®å½•è¿è¡Œ
cd /root/code/gitpackage/agentype/utils/testfile
python -m agentype.mainagent.services.mcp_server
```

**è‡ªåŠ¨å¤„ç†è¿‡ç¨‹**:

```
1. ç¡®å®š project_root
   â”œâ”€ ç¯å¢ƒå˜é‡? â†’ æœªè®¾ç½®
   â”œâ”€ æœç´¢é…ç½®æ–‡ä»¶?
   â”‚  â”œâ”€ Path.cwd() / "agentype_config.json" â†’ ä¸å­˜åœ¨
   â”‚  â”œâ”€ Path.cwd().parent / "agentype_config.json" â†’ ä¸å­˜åœ¨
   â”‚  â””â”€ Path.cwd().parent.parent / "agentype_config.json"
   â”‚     â†’ æ‰¾åˆ°! /root/.../celltype-mcp-server/agentype_config.json
   â””â”€ ä½¿ç”¨ external_config.parent
      â†’ /root/code/gitpackage/agentype/utils/celltype-mcp-server â­

2. æ„å»ºæ‰€æœ‰è·¯å¾„ï¼ˆåŸºäºæ‰¾åˆ°çš„é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼‰
   project_root  = /root/code/gitpackage/agentype/utils/celltype-mcp-server
   outputs_dir   = /root/code/gitpackage/agentype/utils/celltype-mcp-server/outputs
   ...

3. ä½¿ç”¨å·²å­˜åœ¨çš„é…ç½®æ–‡ä»¶
   /root/code/gitpackage/agentype/utils/celltype-mcp-server/agentype_config.json

âš ï¸ æ‰€æœ‰è¾“å‡ºéƒ½ä¼šå†™åˆ° celltype-mcp-server/outputs ç›®å½•ï¼Œè€Œä¸æ˜¯ testfile/outputs
```

### 4.3 åœºæ™¯3: ä½¿ç”¨ç¯å¢ƒå˜é‡æ˜¾å¼æŒ‡å®š

```bash
export CELLTYPE_PROJECT_ROOT="/root/code/gitpackage/agentype/utils/testfile"
export CELLTYPE_CONFIG_PATH="/root/code/gitpackage/agentype/utils/testfile/agentype_config.json"

cd /anywhere
python -m agentype.mainagent.services.mcp_server
```

**è‡ªåŠ¨å¤„ç†è¿‡ç¨‹**:

```
1. ç¡®å®š project_root
   â””â”€ ç¯å¢ƒå˜é‡ CELLTYPE_PROJECT_ROOT â†’ /root/code/gitpackage/agentype/utils/testfile â­
      ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼Œå¿½ç•¥å½“å‰å·¥ä½œç›®å½•å’Œé…ç½®æ–‡ä»¶ä½ç½®ï¼‰

2. æ‰€æœ‰è·¯å¾„éƒ½åŸºäºè¿™ä¸ªç¯å¢ƒå˜é‡æŒ‡å®šçš„ç›®å½•
   project_root  = /root/code/gitpackage/agentype/utils/testfile
   outputs_dir   = /root/code/gitpackage/agentype/utils/testfile/outputs
   ...

3. ä½¿ç”¨ç¯å¢ƒå˜é‡æŒ‡å®šçš„é…ç½®æ–‡ä»¶
   CELLTYPE_CONFIG_PATH â†’ /root/code/gitpackage/agentype/utils/testfile/agentype_config.json

âœ… æ— è®ºåœ¨å“ªé‡Œè¿è¡Œï¼Œéƒ½ä½¿ç”¨æŒ‡å®šçš„ç›®å½•å’Œé…ç½®
```

### 4.4 åœºæ™¯4: ç¯å¢ƒå˜é‡è‡ªåŠ¨å¡«å……é…ç½®æ–‡ä»¶

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export OPENAI_API_BASE="https://api.siliconflow.cn/v1"
export OPENAI_API_KEY="sk-xxxxx"
export OPENAI_MODEL="Pro/deepseek-ai/DeepSeek-V3"

# å‡è®¾é…ç½®æ–‡ä»¶ä¸­ api_base å’Œ api_key ä¸º null
cd /root/code/gitpackage/agentype/utils/testfile
python -m agentype.mainagent.services.mcp_server
```

**è¾“å‡ºä¿¡æ¯**:

```
âœ… è‡ªåŠ¨æ›´æ–°é…ç½®æ–‡ä»¶ï¼ˆç©ºå€¼å¡«å……ï¼‰:
  - API Base: https://api.siliconflow.cn/v1
  - API Key: sk-xxxxx...xxxx
  - Model: Pro/deepseek-ai/DeepSeek-V3
```

**ç»“æœ**: é…ç½®æ–‡ä»¶è¢«è‡ªåŠ¨æ›´æ–°ï¼Œç©ºå€¼è¢«ç¯å¢ƒå˜é‡å¡«å……ï¼Œå¹¶ç«‹å³ä¿å­˜ã€‚

---

## äº”ã€å…³é”®è®¾è®¡ç‰¹ç‚¹

### 5.1 ä¼˜ç‚¹ âœ…

#### 1. **å¤šå±‚çº§ä¼˜å…ˆçº§æœºåˆ¶**
```
ç¯å¢ƒå˜é‡ > é…ç½®æ–‡ä»¶ > é»˜è®¤å€¼
```

#### 2. **æ™ºèƒ½æœç´¢**
- è‡ªåŠ¨å‘ä¸Šæœç´¢å¤šçº§ç›®å½•
- éªŒè¯é…ç½®æ–‡ä»¶å†…å®¹ï¼ˆAPIé…ç½®ä¸èƒ½ä¸ºç©ºï¼‰
- å»é‡å¤„ç†ï¼ˆé¿å…é‡å¤æ£€æŸ¥ï¼‰

#### 3. **è‡ªåŠ¨å¡«å……**
- ç¯å¢ƒå˜é‡å¯ä»¥è‡ªåŠ¨å¡«å……é…ç½®æ–‡ä»¶çš„ç©ºå€¼
- å¡«å……åç«‹å³ä¿å­˜åˆ°æ–‡ä»¶
- æ˜¾ç¤ºæ¸…æ™°çš„æ›´æ–°ä¿¡æ¯

#### 4. **å†²çªæ£€æµ‹**
- æ˜ç¡®æ˜¾ç¤ºé…ç½®å†²çª
- è¯´æ˜å“ªä¸ªå€¼å®é™…ç”Ÿæ•ˆ
- å½©è‰²è¾“å‡ºï¼ˆå¦‚æœæ”¯æŒ coloramaï¼‰

#### 5. **è·¨Agentå…±äº«**
- MainAgent é€šè¿‡ç¯å¢ƒå˜é‡ `CELLTYPE_CONFIG_PATH` ä¼ é€’é…ç½®è·¯å¾„
- æ‰€æœ‰å­Agentä½¿ç”¨åŒä¸€é…ç½®æ–‡ä»¶
- ç»Ÿä¸€çš„é…ç½®ç®¡ç†

#### 6. **é…ç½®éªŒè¯**
- ç¡®ä¿APIé…ç½®ä¸ä¸ºç©ºæ‰è®¤ä¸ºé…ç½®æœ‰æ•ˆ
- è‡ªåŠ¨åˆ›å»ºæ‰€æœ‰å¿…è¦ç›®å½•
- è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„

#### 7. **Agentéš”ç¦»**
- æ¯ä¸ªAgentæœ‰ç‹¬ç«‹çš„ç¼“å­˜å­ç›®å½•
- æ—¥å¿—ã€ç»“æœåˆ†åˆ«å­˜å‚¨
- ä¾¿äºè°ƒè¯•å’Œç®¡ç†

### 5.2 éœ€è¦æ³¨æ„çš„ç‚¹ âš ï¸

#### 1. **`config.json` å‡ ä¹ä¸ä½¿ç”¨**
- é¡¹ç›®ä¸»è¦ä¾èµ– `agentype_config.json`
- `config.json` åªæ˜¯å¤‡ä»½ï¼Œå¯ä»¥å¿½ç•¥

#### 2. **æ‰“åŒ…åçš„è·¯å¾„é—®é¢˜**
- å®‰è£…ä¸ºåŒ…åï¼Œé…ç½®æ–‡ä»¶åœ¨æ­£ç¡®çš„ä½ç½®è¢«æ‰¾åˆ°
- è¿è¡Œæ—¶ä¼˜å…ˆä½¿ç”¨å·¥ä½œç›®å½•çš„é…ç½®æ–‡ä»¶
- åŒ…å†…é…ç½®ä½œä¸ºæ¨¡æ¿

#### 3. **å½“å‰å·¥ä½œç›®å½•å¾ˆé‡è¦**
- å¦‚æœæ²¡æœ‰é…ç½®æ–‡ä»¶å’Œç¯å¢ƒå˜é‡ï¼Œä¼šä½¿ç”¨ `Path.cwd()`
- åœ¨ä¸åŒç›®å½•è¿è¡Œä¼šåˆ›å»ºä¸åŒçš„é…ç½®æ–‡ä»¶
- å¯èƒ½å¯¼è‡´é…ç½®æ–‡ä»¶åˆ†æ•£

#### 4. **é…ç½®æ–‡ä»¶ä½ç½®å½±å“ project_root**
- å¦‚æœæ‰¾åˆ°é…ç½®æ–‡ä»¶ï¼Œä¼šä½¿ç”¨é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•ä½œä¸º `project_root`
- è¿™å¯èƒ½ä¸æ˜¯ä½ æœŸæœ›çš„è¡Œä¸ºï¼ˆç‰¹åˆ«æ˜¯åœ¨æµ‹è¯•æ—¶ï¼‰

#### 5. **å®Œå…¨ç©ºé…ç½®**
- å¦‚æœæ—¢æ²¡æœ‰é…ç½®æ–‡ä»¶ä¹Ÿæ²¡æœ‰ç¯å¢ƒå˜é‡
- ä¼šåˆ›å»º `api_base` å’Œ `api_key` éƒ½ä¸º `null` çš„é…ç½®æ–‡ä»¶
- ç¨‹åºæ— æ³•æ­£å¸¸å·¥ä½œï¼Œéœ€è¦æ‰‹åŠ¨å¡«å†™æˆ–è®¾ç½®ç¯å¢ƒå˜é‡

---

## å…­ã€æœ€ä½³å®è·µå»ºè®®

### 6.1 å¼€å‘ç¯å¢ƒé…ç½®

#### æ–¹æ³•1: ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆæ¨èç”¨äºå¼€å‘ï¼‰

```bash
# ~/.bashrc æˆ– ~/.zshrc
export OPENAI_API_BASE="https://api.siliconflow.cn/v1"
export OPENAI_API_KEY="sk-your-key-here"
export OPENAI_MODEL="Pro/deepseek-ai/DeepSeek-V3"
export CELLTYPE_LANGUAGE="zh"
```

**ä¼˜ç‚¹**:
- çµæ´»åˆ‡æ¢ä¸åŒçš„ API
- ä¸ä¼šæ³„éœ²åˆ°ç‰ˆæœ¬æ§åˆ¶
- é¦–æ¬¡è¿è¡Œè‡ªåŠ¨å¡«å……é…ç½®æ–‡ä»¶

#### æ–¹æ³•2: åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºé…ç½®æ–‡ä»¶ï¼ˆæ¨èç”¨äºç”Ÿäº§ï¼‰

```bash
cd /your/project/root
cat > agentype_config.json <<'EOF'
{
  "version": "1.0.0",
  "paths": {
    "project_root": "/your/project/root",
    "outputs_dir": "/your/project/root/outputs",
    "cache_dir": "/your/project/root/outputs/cache",
    "logs_dir": "/your/project/root/outputs/logs",
    "results_dir": "/your/project/root/outputs/results",
    "downloads_dir": "/your/project/root/outputs/downloads",
    "temp_dir": "/your/project/root/outputs/temp"
  },
  "llm": {
    "api_base": "https://api.siliconflow.cn/v1",
    "api_key": "sk-your-key-here",
    "model": "Pro/deepseek-ai/DeepSeek-V3",
    "max_tokens": 4000,
    "temperature": 0.3
  },
  "project": {
    "language": "zh",
    "enable_streaming": true,
    "enable_logging": true,
    "max_parallel_tasks": 3,
    "cache_expiry_days": 30,
    "auto_cleanup": true
  },
  "agents": {
    "celltypeMainagent": {"enabled": true, "timeout": 30, "max_retries": 3, "log_level": "INFO"},
    "celltypeSubagent": {"enabled": true, "timeout": 30, "max_retries": 3, "log_level": "INFO"},
    "celltypeDataAgent": {"enabled": true, "timeout": 30, "max_retries": 3, "log_level": "INFO"},
    "celltypeAppAgent": {"enabled": true, "timeout": 30, "max_retries": 3, "log_level": "INFO"}
  }
}
EOF
```

**ä¼˜ç‚¹**:
- é…ç½®æ˜ç¡®ï¼Œæ˜“äºç®¡ç†
- æ‰€æœ‰è·¯å¾„ä½¿ç”¨ç»å¯¹è·¯å¾„
- æ— è®ºåœ¨å“ªé‡Œè¿è¡Œéƒ½èƒ½æ‰¾åˆ°é…ç½®

#### æ–¹æ³•3: ä½¿ç”¨ç¯å¢ƒå˜é‡æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆæœ€çµæ´»ï¼‰

```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
mkdir -p ~/.config/agentype
cat > ~/.config/agentype/config.json <<'EOF'
{
  "llm": {
    "api_base": "https://api.siliconflow.cn/v1",
    "api_key": "sk-your-key-here",
    "model": "Pro/deepseek-ai/DeepSeek-V3"
  },
  ...
}
EOF

# è®¾ç½®ç¯å¢ƒå˜é‡
export CELLTYPE_CONFIG_PATH="$HOME/.config/agentype/config.json"
export CELLTYPE_PROJECT_ROOT="/your/working/directory"
```

**ä¼˜ç‚¹**:
- é…ç½®é›†ä¸­ç®¡ç†
- æ”¯æŒå¤šé¡¹ç›®å…±äº«é…ç½®
- å¯ä»¥ä¸ºä¸åŒé¡¹ç›®è®¾ç½®ä¸åŒçš„ project_root

### 6.2 æµ‹è¯•ç¯å¢ƒé…ç½®

å¯¹äºæµ‹è¯•ç›®å½•ï¼ˆå¦‚ `/root/code/gitpackage/agentype/utils/testfile/`ï¼‰ï¼Œæ¨èï¼š

```bash
cd /root/code/gitpackage/agentype/utils/testfile

# åˆ›å»ºç‹¬ç«‹çš„é…ç½®æ–‡ä»¶
cat > agentype_config.json <<'EOF'
{
  "version": "1.0.0",
  "paths": {
    "project_root": "/root/code/gitpackage/agentype/utils/testfile",
    "outputs_dir": "/root/code/gitpackage/agentype/utils/testfile/outputs",
    "cache_dir": "/root/code/gitpackage/agentype/utils/testfile/outputs/cache",
    "logs_dir": "/root/code/gitpackage/agentype/utils/testfile/outputs/logs",
    "results_dir": "/root/code/gitpackage/agentype/utils/testfile/outputs/results",
    "downloads_dir": "/root/code/gitpackage/agentype/utils/testfile/outputs/downloads",
    "temp_dir": "/root/code/gitpackage/agentype/utils/testfile/outputs/temp"
  },
  "llm": {
    "api_base": "https://api.siliconflow.cn/v1",
    "api_key": "sk-your-key-here",
    "model": "Pro/deepseek-ai/DeepSeek-V3",
    "max_tokens": 4000,
    "temperature": 0.3
  },
  "project": {
    "language": "zh",
    "enable_streaming": true,
    "enable_logging": true,
    "max_parallel_tasks": 3,
    "cache_expiry_days": 30,
    "auto_cleanup": true
  },
  "agents": {
    "celltypeMainagent": {"enabled": true, "timeout": 30, "max_retries": 3, "log_level": "INFO"},
    "celltypeSubagent": {"enabled": true, "timeout": 30, "max_retries": 3, "log_level": "INFO"},
    "celltypeDataAgent": {"enabled": true, "timeout": 30, "max_retries": 3, "log_level": "INFO"},
    "celltypeAppAgent": {"enabled": true, "timeout": 30, "max_retries": 3, "log_level": "INFO"}
  }
}
EOF

# ç„¶åç›´æ¥è¿è¡Œæµ‹è¯•
python your_test_script.py
```

**ä¼˜ç‚¹**:
- æµ‹è¯•ç¯å¢ƒç‹¬ç«‹
- æ‰€æœ‰è¾“å‡ºåœ¨ testfile/outputs
- ä¸ä¼šæ±¡æŸ“æºä»£ç ç›®å½•

### 6.3 ç”Ÿäº§ç¯å¢ƒé…ç½®

```bash
# 1. åˆ›å»ºä¸“ç”¨ç›®å½•
mkdir -p /opt/agentype/{config,data,outputs}

# 2. åˆ›å»ºé…ç½®æ–‡ä»¶
cat > /opt/agentype/config/agentype_config.json <<'EOF'
{
  "version": "1.0.0",
  "paths": {
    "project_root": "/opt/agentype/data",
    "outputs_dir": "/opt/agentype/outputs",
    "cache_dir": "/opt/agentype/outputs/cache",
    "logs_dir": "/opt/agentype/outputs/logs",
    "results_dir": "/opt/agentype/outputs/results",
    "downloads_dir": "/opt/agentype/outputs/downloads",
    "temp_dir": "/opt/agentype/outputs/temp"
  },
  "llm": {
    "api_base": "{OPENAI_API_BASE}",
    "api_key": "{OPENAI_API_KEY}",
    "model": "Pro/deepseek-ai/DeepSeek-V3",
    "max_tokens": 4000,
    "temperature": 0.3
  },
  "project": {
    "language": "zh",
    "enable_streaming": true,
    "enable_logging": true,
    "max_parallel_tasks": 5,
    "cache_expiry_days": 7,
    "auto_cleanup": true
  },
  "agents": {
    "celltypeMainagent": {"enabled": true, "timeout": 60, "max_retries": 5, "log_level": "INFO"},
    "celltypeSubagent": {"enabled": true, "timeout": 60, "max_retries": 5, "log_level": "INFO"},
    "celltypeDataAgent": {"enabled": true, "timeout": 60, "max_retries": 5, "log_level": "INFO"},
    "celltypeAppAgent": {"enabled": true, "timeout": 60, "max_retries": 5, "log_level": "INFO"}
  }
}
EOF

# 3. è®¾ç½®ç¯å¢ƒå˜é‡
export CELLTYPE_CONFIG_PATH="/opt/agentype/config/agentype_config.json"
export OPENAI_API_BASE="https://api.siliconflow.cn/v1"
export OPENAI_API_KEY="sk-production-key"

# 4. è¿è¡Œ
cd /opt/agentype/data
python -m agentype.mainagent.services.mcp_server
```

### 6.4 é…ç½®æ–‡ä»¶ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹å½“å‰é…ç½®
python manage.py config

# æŸ¥çœ‹é¡¹ç›®çŠ¶æ€
python manage.py status

# æ£€æŸ¥ä¾èµ–
python manage.py deps

# æ¸…ç†è¾“å‡ºç›®å½•
python manage.py clean

# å¤‡ä»½é…ç½®
python manage.py backup
```

---

## ä¸ƒã€å¸¸è§é—®é¢˜æ’æŸ¥

### 7.1 é…ç½®æ–‡ä»¶æ‰¾ä¸åˆ°

**é—®é¢˜**: ç¨‹åºæç¤ºæ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶æˆ– API é…ç½®ä¸ºç©º

**æ’æŸ¥æ­¥éª¤**:

```bash
# 1. æ£€æŸ¥å½“å‰ç›®å½•
pwd
ls -la agentype_config.json

# 2. æ£€æŸ¥ç¯å¢ƒå˜é‡
echo $CELLTYPE_CONFIG_PATH
echo $CELLTYPE_PROJECT_ROOT

# 3. æœç´¢é…ç½®æ–‡ä»¶
find . -name "agentype_config.json" -type f

# 4. éªŒè¯é…ç½®æ–‡ä»¶å†…å®¹
cat agentype_config.json | jq '.llm'
```

### 7.2 è·¯å¾„é…ç½®é”™è¯¯

**é—®é¢˜**: è¾“å‡ºæ–‡ä»¶ä¿å­˜åˆ°äº†é”™è¯¯çš„ç›®å½•

**æ’æŸ¥æ­¥éª¤**:

```bash
# æŸ¥çœ‹é…ç½®ä¸­çš„è·¯å¾„
python -c "from agentype.config import get_global_config; config = get_global_config(); print(f'Project Root: {config.paths.project_root}'); print(f'Outputs Dir: {config.paths.outputs_dir}')"

# æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„è·¯å¾„
cat agentype_config.json | jq '.paths'
```

### 7.3 ç¯å¢ƒå˜é‡ä¸ç”Ÿæ•ˆ

**é—®é¢˜**: è®¾ç½®äº†ç¯å¢ƒå˜é‡ä½†é…ç½®æ–‡ä»¶æ²¡æœ‰æ›´æ–°

**åŸå› **: é…ç½®æ–‡ä»¶ä¸­å·²æœ‰éç©ºå€¼ï¼Œç¯å¢ƒå˜é‡ä¸ä¼šè¦†ç›–

**è§£å†³æ–¹æ¡ˆ**:

```bash
# æ–¹æ³•1: åˆ é™¤é…ç½®æ–‡ä»¶ï¼Œè®©å®ƒé‡æ–°åˆ›å»º
rm agentype_config.json
python your_script.py  # ä¼šè‡ªåŠ¨åˆ›å»ºå¹¶å¡«å……

# æ–¹æ³•2: æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶
vim agentype_config.json  # å°† api_base å’Œ api_key æ”¹ä¸º null

# æ–¹æ³•3: ä½¿ç”¨æ›´é«˜ä¼˜å…ˆçº§çš„ç¯å¢ƒå˜é‡
export CELLTYPE_CONFIG_PATH="/path/to/new/config.json"
```

---

## å…«ã€æ€»ç»“

CellType Agent çš„é…ç½®æ–‡ä»¶ç³»ç»Ÿè®¾è®¡éå¸¸æ™ºèƒ½å’Œçµæ´»ï¼š

1. **è‡ªåŠ¨åŒ–**: é…ç½®æ–‡ä»¶ã€ç›®å½•ç»“æ„å…¨éƒ¨è‡ªåŠ¨åˆ›å»º
2. **çµæ´»æ€§**: æ”¯æŒç¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶ã€é»˜è®¤å€¼ä¸‰çº§é…ç½®
3. **æ™ºèƒ½æœç´¢**: è‡ªåŠ¨å‘ä¸Šæœç´¢é…ç½®æ–‡ä»¶ï¼ŒéªŒè¯å†…å®¹æœ‰æ•ˆæ€§
4. **è‡ªåŠ¨å¡«å……**: ç¯å¢ƒå˜é‡å¯ä»¥è‡ªåŠ¨å¡«å……é…ç½®æ–‡ä»¶ç©ºå€¼
5. **å†²çªå¤„ç†**: æ˜ç¡®æ˜¾ç¤ºé…ç½®å†²çªå’Œå®é™…ä½¿ç”¨çš„å€¼
6. **è·¨Agentå…±äº«**: ç»Ÿä¸€çš„é…ç½®ç®¡ç†ï¼Œæ‰€æœ‰Agentä½¿ç”¨åŒä¸€é…ç½®

**å…³é”®è¦ç‚¹**:
- â­ ä¼˜å…ˆä½¿ç”¨ `agentype_config.json`ï¼Œå¿½ç•¥ `config.json`
- â­ è·¯å¾„é…ç½®åŸºäº `project_root` è‡ªåŠ¨ç”Ÿæˆ
- â­ ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§: `CELLTYPE_CONFIG_PATH` > `CELLTYPE_PROJECT_ROOT` > `OPENAI_*`
- â­ é…ç½®æ–‡ä»¶æœç´¢: ç¯å¢ƒå˜é‡ > å½“å‰ç›®å½• > ä¸Šçº§ç›®å½• > è„šæœ¬ç›®å½•
- â­ æ‰€æœ‰ç›®å½•è‡ªåŠ¨åˆ›å»ºï¼ŒåŒ…æ‹¬ Agent ä¸“ç”¨ç¼“å­˜ç›®å½•

**æ¨èé…ç½®æ–¹å¼**:
- å¼€å‘: ä½¿ç”¨ç¯å¢ƒå˜é‡ + è‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶
- æµ‹è¯•: åœ¨æµ‹è¯•ç›®å½•åˆ›å»ºç‹¬ç«‹é…ç½®æ–‡ä»¶
- ç”Ÿäº§: ä½¿ç”¨å›ºå®šè·¯å¾„ + ç¯å¢ƒå˜é‡æŒ‡å®šé…ç½®æ–‡ä»¶

---

**æœ€åæ›´æ–°**: 2025-10-12
**ç‰ˆæœ¬**: 1.0.0
**ä½œè€…**: CellType Agent Team
