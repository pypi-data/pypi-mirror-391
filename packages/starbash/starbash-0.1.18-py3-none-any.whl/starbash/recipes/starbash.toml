[repo]
kind = "repo"

# recipes for generating master flats, bias, darks...
[[repo-ref]]
dir = "master_bias"
[[repo-ref]]
dir = "master_dark"
[[repo-ref]]
dir = "master_flat"

# Note: For automated recipe finding, it is important to list more demanding recipes first.  For instance:
# osc_dual_duo (which needs a HaOiii and a SiiOiii filter) should be listed first, so that if we see
# dataset containing both HaOiii and SiiOiii filters we will assume that is the recipe to use.
#
# But later if we see a dataset containing only HaOiii data, assume osc_single_duo should be used.

[[repo-ref]]
dir = "osc_dual_duo"

[[repo-ref]]
dir = "osc_single_duo"

[[repo-ref]]
dir = "osc_simple"

[[repo-ref]]
dir = "seestar"

#
# master specific stages
#
[[master-stages]]
name = "master-bias" # generate master bias frames
priority = 10
input = "bias"       # only used for frames of this type

[[master-stages]]
name = "master-dark" # generate master dark frames
priority = 10
input = "dark"

[[master-stages]]
name = "master-flat" # generate master flat frames
priority = 20
input = "flat"

#
# session specific processing stages
# FIXME - we are not using this yet, for now we just hardcode in app.py

[[stages]]
name = "light" # generate light frames from lights and with reference to flats/bias
priority = 20
input = "light" # only used for frames of this type

[[stages]]
name = "stack" # stack frames
priority = 30
input = "recipe" # use output from previous stages in the same recipe
