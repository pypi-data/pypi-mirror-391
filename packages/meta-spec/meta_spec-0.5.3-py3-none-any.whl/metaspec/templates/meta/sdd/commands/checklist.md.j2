---
description: Generate quality checklist for toolkit specification - validates requirement quality, NOT implementation correctness
---

## Checklist Purpose: "Unit Tests for Toolkit Specifications"

**CRITICAL CONCEPT**: Checklists are **UNIT TESTS FOR SPECIFICATION WRITING** - they validate the quality, clarity, and completeness of toolkit specifications.

**NOT for implementation verification**:
- ‚ùå "Verify parser handles YAML correctly"
- ‚ùå "Test validator catches errors"
- ‚ùå "Confirm CLI commands work"

**FOR specification quality validation**:
- ‚úÖ "Are entity field types explicitly specified? [Clarity]"
- ‚úÖ "Are validation rules consistently defined? [Consistency]"
- ‚úÖ "Are error message formats specified? [Completeness]"
- ‚úÖ "Can 'extensible validator' be objectively measured? [Measurability]"

## User Input

```text
$ARGUMENTS
```

You **MUST** consider the user input before proceeding (if not empty).

## Execution Flow

### 1. Check for existing checklist

**CRITICAL**: Before generating, check if checklist already exists:

```bash
ls specs/toolkit/XXX-name/checklists/
```

**If checklist exists**, ask user:

| Mode | Action | When to Use |
|------|--------|-------------|
| **update** | Update scores/status, add iteration section | Toolkit improved, want to track progress |
| **new** | Create new checklist (backup existing) | Complete restart, different focus |
| **append** | Add new checklist for different focus | Existing checklist still valid, new aspect |

**Default**: If user says "re-run", "verify improvement" ‚Üí choose **update** mode

**If NO checklist exists** ‚Üí proceed to step 2

---

### 2. Clarify intent

Generate up to 3 contextual clarifying questions based on user input:

**Example questions**:
- "Should this checklist focus on entity design, validation rules, or both?"
- "Is this for spec review (pre-planning) or implementation review (post-coding)?"
- "Should we include constitution alignment checks?"

**Present options as table**:
| Option | Focus | Why It Matters |
|--------|-------|----------------|
| A | Entity Design | Validates field definitions, types, examples |
| B | Validation Rules | Validates rule completeness, error messages |
| C | Workflow Design | Validates CLI commands, user flows |
| D | All Above | Comprehensive spec quality check |

**Defaults if no interaction**:
- Focus: Entity Design + Validation Rules
- Audience: Toolkit developer (self-review)
- Depth: Standard

### 3. Load toolkit context

**Read from**:
- `specs/toolkit/XXX-name/spec.md` (REQUIRED)
- `specs/toolkit/XXX-name/plan.md` (if exists)
- `/memory/constitution.md` (REQUIRED)
- `specs/toolkit/XXX-name/architecture.md` (if exists)

### 4. Generate checklist

**Create**:
- Directory: `specs/toolkit/XXX-name/checklists/` (if not exists)
- Filename: `[domain].md` (e.g., `entity-design.md`, `validation.md`, `workflow.md`)
- Format: Sequential IDs starting from CHK001

**Checklist Categories** (for toolkit specs):

#### **Entity Design Quality**
Test if entity definitions are complete, clear, and consistent:
- Are all entity fields defined with types? [Completeness]
- Are required vs optional fields clear? [Clarity]
- Are field descriptions specific and measurable? [Clarity]
- Are example values provided for all fields? [Coverage]
- Are field constraints documented (regex, enum, range)? [Completeness]

#### **Validation Rules Quality**
Test if validation requirements are specified:
- Are structural validation rules defined? [Completeness]
- Are semantic validation rules specified? [Completeness]
- Are domain-specific validation rules documented? [Coverage]
- Is validation logic consistent across similar fields? [Consistency]
- Are error message formats specified? [Completeness]

#### **Workflow Definition Quality**
Test if workflows are clear and complete:
- Are workflow steps clearly ordered? [Clarity]
- Are inputs/outputs specified for each step? [Completeness]
- Are CLI commands mapped to workflows? [Consistency]
- Are success indicators measurable? [Measurability]
- Are error scenarios documented? [Coverage]

#### **CLI Interface Quality**
Test if CLI design is specified:
- Are all commands listed with purposes? [Completeness]
- Are command options documented? [Completeness]
- Are examples provided for each command? [Coverage]
- Are exit codes specified? [Completeness]
- Is output format defined (text/JSON)? [Clarity]

#### **Constitution Alignment**
Test if spec follows constitution.md:
- Does entity design follow Entity-First principle? [Consistency]
- Does validator design support extensibility? [Completeness]
- Are error messages AI-friendly? [Clarity]
- Is MVP scope clear? [Completeness]
- Are domain constraints referenced? [Coverage]

#### **Acceptance Criteria Quality**
Test if quality criteria are measurable:
- Are performance targets quantified? [Measurability]
- Can "extensible" be objectively verified? [Clarity]
- Are success metrics specific (not vague)? [Measurability]
- Are quality gates defined? [Completeness]

#### **Edge Case Coverage**
Test if edge cases are addressed:
- Are empty spec scenarios defined? [Gap]
- Are invalid spec scenarios documented? [Coverage]
- Are parser error scenarios specified? [Completeness]
- Are validation edge cases documented? [Coverage]

#### **Dependencies & Assumptions**
Test if dependencies are clear:
- Are external dependencies documented? [Completeness]
- Are domain standards referenced (RFCs, specs)? [Traceability]
- Are assumptions explicitly stated? [Clarity]
- Are technology choices justified? [Traceability]

#### **Ambiguities & Conflicts**
Test for specification issues:
- Are vague terms quantified? [Ambiguity]
- Are conflicting requirements identified? [Conflict]
- Are missing definitions noted? [Gap]
- Are unresolved questions marked? [Ambiguity]

### 4. Checklist Item Structure

**Pattern**:
```
- [ ] CHK### - [Question about requirement quality]? [Quality Dimension, Traceability]
```

**Quality Dimensions**:
- [Completeness] - Are all requirements present?
- [Clarity] - Are requirements specific and unambiguous?
- [Consistency] - Do requirements align?
- [Measurability] - Can requirements be verified?
- [Coverage] - Are all scenarios addressed?
- [Gap] - Is something missing?
- [Ambiguity] - Is something unclear?
- [Conflict] - Do requirements contradict?

**Traceability Markers**:
- [Spec ¬ßSection] - References spec.md section
- [Plan ¬ßSection] - References plan.md section
- [Constitution ¬ßPrinciple] - References constitution principle
- [Gap] - Missing requirement
- [Ambiguity] - Unclear requirement
- [Conflict] - Conflicting requirements

### 5. Example Checklist Items

#### Entity Design Quality (`entity-design.md`)

```markdown
- [ ] CHK001 - Are all entity fields defined with explicit types (string, number, boolean, array, object)? [Completeness, Spec ¬ßEntity Definitions]
- [ ] CHK002 - Is the distinction between required and optional fields clearly specified? [Clarity, Spec ¬ßEntity Definitions]
- [ ] CHK003 - Are field descriptions specific enough to guide implementation? [Clarity, Spec ¬ßEntity Definitions]
- [ ] CHK004 - Are example values provided for every field? [Coverage, Spec ¬ßEntity Definitions]
- [ ] CHK005 - Are field validation rules (regex, enum, range) documented? [Completeness, Spec ¬ßEntity Definitions]
- [ ] CHK006 - Is the rationale for each field explained? [Traceability, Spec ¬ßEntity Definitions]
- [ ] CHK007 - Are entity relationships (if any) clearly defined? [Completeness, Gap]
- [ ] CHK008 - Does entity design follow Entity-First principle (3-5 core fields)? [Consistency, Constitution ¬ßI]
- [ ] CHK009 - Are nested objects avoided in MVP (progressive enhancement)? [Consistency, Constitution ¬ßV]
- [ ] CHK010 - Are domain-specific field constraints documented? [Coverage, Spec ¬ßDomain Constraints]
```

#### Validation Rules Quality (`validation.md`)

```markdown
- [ ] CHK001 - Are structural validation rules (type, required) explicitly defined? [Completeness, Spec ¬ßValidation Requirements]
- [ ] CHK002 - Are semantic validation rules (cross-field, logic) specified? [Completeness, Spec ¬ßValidation Requirements]
- [ ] CHK003 - Are domain-specific validation rules documented with rationale? [Coverage, Spec ¬ßDomain-Specific Validation]
- [ ] CHK004 - Is error message format specified with examples? [Clarity, Spec ¬ßValidation Requirements]
- [ ] CHK005 - Are error messages AI-friendly (actionable, with fix suggestions)? [Consistency, Constitution ¬ßIV]
- [ ] CHK006 - Is validation performance target specified (<100ms)? [Measurability, Spec ¬ßQuality Criteria]
- [ ] CHK007 - Is custom validator registration mechanism defined? [Completeness, Constitution ¬ßII]
- [ ] CHK008 - Are validation layers (structural/semantic/domain) clearly separated? [Clarity, Plan ¬ßValidator Design]
- [ ] CHK009 - Can validation rules be objectively tested? [Measurability, Spec ¬ßValidation Requirements]
- [ ] CHK010 - Are validation edge cases (empty, null, invalid) specified? [Coverage, Gap]
```

#### Workflow Quality (`workflow.md`)

```markdown
- [ ] CHK001 - Are workflow steps clearly ordered and numbered? [Clarity, Spec ¬ßWorkflow Definitions]
- [ ] CHK002 - Are inputs specified for each workflow step? [Completeness, Spec ¬ßWorkflow Definitions]
- [ ] CHK003 - Are outputs specified for each workflow step? [Completeness, Spec ¬ßWorkflow Definitions]
- [ ] CHK004 - Are CLI commands mapped to workflow steps? [Consistency, Spec ¬ßCLI Commands]
- [ ] CHK005 - Are success indicators measurable? [Measurability, Spec ¬ßWorkflow Definitions]
- [ ] CHK006 - Are error scenarios documented for each step? [Coverage, Gap]
- [ ] CHK007 - Are example usages provided for workflows? [Coverage, Spec ¬ßWorkflow Definitions]
- [ ] CHK008 - Is the init ‚Üí validate ‚Üí execute flow clearly defined? [Completeness, Spec ¬ßWorkflow Definitions]
- [ ] CHK009 - Are workflow dependencies explicit? [Clarity, Spec ¬ßWorkflow Definitions]
- [ ] CHK010 - Can workflow success be objectively verified? [Measurability, Spec ¬ßSuccess Indicators]
```

#### CLI Interface Quality (`cli.md`)

```markdown
- [ ] CHK001 - Are all CLI commands listed with clear purposes? [Completeness, Spec ¬ßCLI Commands]
- [ ] CHK002 - Are command arguments and options documented? [Completeness, Spec ¬ßCLI Commands]
- [ ] CHK003 - Are command examples provided? [Coverage, Spec ¬ßCLI Commands]
- [ ] CHK004 - Are exit codes specified (0=success, 1=failure)? [Completeness, Spec ¬ßCLI Commands]
- [ ] CHK005 - Is output format defined (text and JSON)? [Clarity, Spec ¬ßCLI Commands]
- [ ] CHK006 - Are error messages for CLI errors specified? [Completeness, Gap]
- [ ] CHK007 - Is help text format defined? [Clarity, Gap]
- [ ] CHK008 - Are interactive vs non-interactive modes clear? [Clarity, Spec ¬ßCLI Commands]
- [ ] CHK009 - Is command naming consistent (init, validate, run)? [Consistency, Spec ¬ßCLI Commands]
- [ ] CHK010 - Are command aliases (if any) documented? [Completeness, Gap]
```

#### Constitution Alignment (`constitution.md`)

```markdown
- [ ] CHK001 - Does entity design follow Entity-First principle (minimal fields)? [Consistency, Constitution ¬ßI]
- [ ] CHK002 - Does validator design support extensibility (custom validators)? [Consistency, Constitution ¬ßII]
- [ ] CHK003 - Does spec-first workflow enable users to write specs first? [Consistency, Constitution ¬ßIII]
- [ ] CHK004 - Are error messages AI-friendly (clear, actionable, with examples)? [Consistency, Constitution ¬ßIV]
- [ ] CHK005 - Is progressive enhancement path clear (MVP vs future features)? [Consistency, Constitution ¬ßV]
- [ ] CHK006 - Are domain-specific constraints documented and justified? [Consistency, Constitution ¬ßVI]
- [ ] CHK007 - Are all six constitution principles addressed in spec? [Completeness, Constitution]
- [ ] CHK008 - Are any principle violations explicitly justified? [Traceability, Constitution]
- [ ] CHK009 - Does quality criteria align with constitution targets? [Consistency, Constitution + Spec ¬ßQuality Criteria]
- [ ] CHK010 - Is constitution referenced in design decisions? [Traceability, Plan]
```

### 6. Anti-Examples: What NOT To Do

**‚ùå WRONG - Testing implementation**:
```markdown
- [ ] CHK001 - Verify parser loads YAML correctly
- [ ] CHK002 - Test validator catches missing required fields
- [ ] CHK003 - Confirm CLI init command creates file
```

**‚úÖ CORRECT - Testing specification quality**:
```markdown
- [ ] CHK001 - Are parser error handling scenarios specified? [Completeness, Spec ¬ßParser Design]
- [ ] CHK002 - Is validator behavior for missing fields documented? [Completeness, Spec ¬ßValidation Requirements]
- [ ] CHK003 - Is CLI init command output format specified? [Clarity, Spec ¬ßCLI Commands]
```

### 7. Write checklist file

- Write to `specs/toolkit/XXX-name/checklists/[domain].md`
- Use checklist-template structure
- Include metadata (purpose, created date, spec reference)
- Group items by category
- Number sequentially (CHK001, CHK002, ...)

### 8. Report completion

**For new checklist**:
```
‚úÖ Checklist generated: entity-design.md

üìã Summary:
- Focus: Entity Design Quality
- Items: 10
- Categories: 3
- Traceability: 100% (all items reference spec/constitution)

üìÅ Location: specs/toolkit/XXX-name/checklists/entity-design.md

üéØ Purpose:
This checklist validates the quality of entity definitions in spec.md.
It does NOT test if the implementation works, but whether the specification is:
- Complete (all fields defined)
- Clear (types, constraints explicit)
- Consistent (follows constitution)
- Measurable (examples provided)

üîÑ Next steps:
1. Review checklist items
2. Update spec.md to address gaps
3. Re-run /metaspec:clarify if ambiguities found
4. Use /metaspec:analyze for deeper review

üí° Usage:
- During spec review: Check items before /metaspec:plan
- After implementation: Verify spec matched reality
- Before release: Ensure spec is complete
```

**For update mode**:
```
‚úÖ Checklist updated: comprehensive-quality.md

üìä Iteration 2 Summary:
- Items updated: 10/10
- Improved: 3 items (CHK001: ‚ùå ‚Üí ‚úÖ, CHK003: ‚ùå ‚Üí ‚ö†Ô∏è, CHK005: ‚ö†Ô∏è ‚Üí ‚úÖ)
- Still failing: 2 items (CHK002, CHK007)
- New items: 0

üìà Progress:
- Previous: 40% (4/10 passing)
- Current: 60% (6/10 passing)
- Improvement: +20%

üéØ Key improvements:
- ‚úÖ CHK001: Entity field types now specified
- ‚úÖ CHK005: Examples added for all entities
- ‚ö†Ô∏è CHK003: Partial validation rules (3/5 entities)

‚ö†Ô∏è Still needs work:
- ‚ùå CHK002: Field constraints missing (enum, regex)
- ‚ùå CHK007: Error messages lack specificity

üîÑ Next steps:
1. Fix remaining failing items (2)
2. Complete partial validation rules (CHK003)
3. Run /metaspec.sdd.analyze to verify consistency
```

## Important Notes

1. **Test the spec, not the code**
   - Ask: "Is X specified?" not "Does X work?"
   - Focus on requirement quality, not implementation correctness
   - Check completeness, clarity, consistency

2. **Traceability is mandatory**
   - Every item should reference [Spec ¬ßX], [Gap], [Constitution ¬ßY]
   - Minimum 80% items with traceability markers
   - Makes it easy to find and fix issues

3. **Categories by quality dimension**
   - Group by: Completeness, Clarity, Consistency, Coverage
   - Not by: Implementation area (parser, validator, CLI)
   - Helps identify systematic quality issues

4. **Focus on toolkit-specific concerns**
   - Entity design simplicity
   - Validation extensibility
   - Error message AI-friendliness
   - Constitution alignment
   - Domain specificity

5. **Multiple checklists allowed**
   - `entity-design.md` - Entity quality
   - `validation.md` - Validation rules quality
   - `workflow.md` - Workflow clarity
   - `cli.md` - CLI interface completeness
   - `constitution.md` - Constitution alignment

## Common Checklist Types

| Checklist | Focus | When to Use |
|-----------|-------|-------------|
| `entity-design.md` | Entity field definitions | After /metaspec:specify, before /metaspec:plan |
| `validation.md` | Validation rules quality | After /metaspec:clarify, before /metaspec:plan |
| `workflow.md` | Workflow clarity | After /metaspec:specify, before /metaspec:plan |
| `cli.md` | CLI interface completeness | After /metaspec:plan, before /metaspec:tasks |
| `constitution.md` | Constitution alignment | After /metaspec:plan, before /metaspec:implement |
| `architecture.md` | Architecture quality | After /metaspec:plan, before /metaspec:tasks |

