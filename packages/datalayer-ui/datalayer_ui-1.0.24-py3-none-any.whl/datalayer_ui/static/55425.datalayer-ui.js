"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[55425],{24534:(e,t,n)=>{n.d(t,{K:()=>i});var i,o=n(63711),s=n(72879),a=n(98238);!function(e){function t(e,t){var i,a;const r=t(e);return r.id=e.id,r.title.label||(r.title.label=null!==(i=e.label)&&void 0!==i?i:o.Text.titleCase(r.id.trim())),e.icon&&(r.title.icon=s.Tl.resolve({icon:e.icon})),void 0!==e.mnemonic&&(r.title.mnemonic=e.mnemonic),null===(a=e.items)||void 0===a||a.filter(e=>!e.disabled).sort((e,t)=>{var n,i;return(null!==(n=e.rank)&&void 0!==n?n:1/0)-(null!==(i=t.rank)&&void 0!==i?i:1/0)}).map(e=>{n(e,r,t)}),r}function n(e,n,i){const{submenu:o,...s}=e;n.addItem({...s,submenu:o?t(o,i):null})}function i(e,t,o){var s;e.disabled?t.dispose():null===(s=e.items)||void 0===s||s.forEach(e=>{var s,r;const l=null==t?void 0:t.items.find((t,n)=>{var i,o,s;return t.type===e.type&&t.command===(null!==(i=e.command)&&void 0!==i?i:"")&&(null===(o=t.submenu)||void 0===o?void 0:o.id)===(null===(s=e.submenu)||void 0===s?void 0:s.id)});if(l&&"separator"!==e.type)if(e.disabled)t.removeItem(l);else switch(null!==(s=e.type)&&void 0!==s?s:"command"){case"command":e.command&&(a.JSONExt.deepEqual(l.args,null!==(r=e.args)&&void 0!==r?r:{})||n(e,t,o));break;case"submenu":e.submenu&&i(e.submenu,l.submenu,o)}else n(e,t,o)})}e.createMenus=function(e,n){return e.filter(e=>!e.disabled).sort((e,t)=>{var n,i;return(null!==(n=e.rank)&&void 0!==n?n:1/0)-(null!==(i=t.rank)&&void 0!==i?i:1/0)}).map(e=>t(e,n))},e.addContextItem=function(e,n,i){const{submenu:o,...s}=e;n.addItem({...s,submenu:o?t(o,i):null})},e.updateMenus=function(e,n,o){const s=[];return n.forEach(n=>{const a=e.find(e=>e.id===n.id);a?i(n,a,o):n.disabled||s.push(t(n,o))}),e.push(...s),s}}(i||(i={}))},39841:(e,t,n)=>{n.d(t,{w:()=>i});const i=new(n(98238).Token)("@jupyterlab/application:ITreePathUpdater","A service to update the tree path.")},40625:(e,t,n)=>{n.d(t,{v:()=>i});const i=new(n(98238).Token)("@jupyterlab/property-inspector:IPropertyInspectorProvider","A service to register new widgets in the property inspector side panel.")},55425:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_CONTEXT_ITEM_RANK:()=>W,default:()=>ie});var i=n(68122),o=n(62012),s=n(19823),a=n(39841),r=n(80955),l=n(2335),d=n(85181);const c=async function(e,t,n){const i=(n=n||d.wK).load("jupyterlab"),o=i.__("Server Connection Error"),s=i.__("A connection to the Jupyter server could not be established.\nJupyterLab will continue trying to reconnect.\nCheck your network connection or Jupyter server configuration.\n");if(!u.displayConnectionLost)return;if(u.serverConnectionLost)return void await u.serverConnectionLost;const a=(0,l.ui)({title:o,body:s,checkbox:{label:i.__("Do not show this message again in this session."),caption:i.__("If checked, you will not see a dialog informing you about an issue with server connection in this session.")},buttons:[l.lG.cancelButton({label:i.__("Close")})]}).then(e=>{e.isChecked&&(u.displayConnectionLost=!1)}).catch(e=>{console.error("An error occurred while showing the dialog: ",e)}).finally(()=>{u.serverConnectionLost=void 0});u.serverConnectionLost=a};var u;!function(e){e.displayConnectionLost=!0}(u||(u={}));var h=n(16255),p=n(63711),m=n(98238),g=n(79246),b=n(72490);class v{constructor(e){this.stop=new m.Token("@jupyterlab/application:Router#stop"),this._routed=new b.Signal(this),this._rules=new Map,this.base=e.base,this.commands=e.commands}get current(){var e,t;const{base:n}=this,i=p.URLExt.parse(window.location.href),{search:o,hash:s}=i,a=null!==(t=null===(e=i.pathname)||void 0===e?void 0:e.replace(n,"/"))&&void 0!==t?t:"";return{hash:s,path:a,request:a+o+s,search:o}}get routed(){return this._routed}navigate(e,t={}){const{base:n}=this,{history:i}=window,{hard:o}=t,s=document.location.href,a=e&&0===e.indexOf(n)?e:p.URLExt.join(n,e);return a===s?o?this.reload():void 0:(i.pushState({},"",a),o?this.reload():void(t.skipRouting||requestAnimationFrame(()=>{this.route()})))}register(e){var t;const{command:n,pattern:i}=e,o=null!==(t=e.rank)&&void 0!==t?t:100,s=this._rules;return s.set(i,{command:n,rank:o}),new g.DisposableDelegate(()=>{s.delete(i)})}reload(){window.location.reload()}route(){const{commands:e,current:t,stop:n}=this,{request:i}=t,o=this._routed,s=this._rules,a=[];s.forEach((e,t)=>{(null==i?void 0:i.match(t))&&a.push(e)});const r=a.sort((e,t)=>t.rank-e.rank),l=new m.PromiseDelegate,d=async()=>{if(!r.length)return o.emit(t),void l.resolve(void 0);const{command:s}=r.pop();try{const i=this.current.request;await e.execute(s,t)===n&&(r.length=0,console.debug(`Routing ${i} was short-circuited by ${s}`))}catch(e){console.warn(`Routing ${i} to ${s} failed`,e)}d()};return d(),l.promise}}var _,f=n(59179),y=n(24534),w=n(40625),x=n(88037),k=n(14809);class C extends k.x0{constructor(){super(),this._tracker=new k.$x,this._inspectors=new Map,this.addClass("jp-PropertyInspector"),this._tracker=new k.$x,this._tracker.currentChanged.connect(this._onCurrentChanged,this)}register(e){if(this._inspectors.has(e))throw new Error("Widget is already registered");const t=new _.PropertyInspector(e);return e.disposed.connect(this._onWidgetDisposed,this),this._inspectors.set(e,t),t.onAction.connect(this._onInspectorAction,this),this._tracker.add(e),t}get currentWidget(){return this._tracker.currentWidget}refresh(){const e=this._tracker.currentWidget;if(!e)return void this.setContent(null);const t=this._inspectors.get(e);t&&this.setContent(t.content)}_onWidgetDisposed(e){const t=this._inspectors.get(e);t&&(t.dispose(),this._inspectors.delete(e))}_onInspectorAction(e,t){const n=e.owner,i=this._tracker.currentWidget;switch(t){case"content":i===n&&this.setContent(e.content);break;case"dispose":n&&(this._tracker.remove(n),this._inspectors.delete(n));break;case"show-panel":i===n&&this.showPanel();break;default:throw new Error("Unsupported inspector action")}}_onCurrentChanged(){const e=this._tracker.currentWidget;if(e){const t=this._inspectors.get(e).content;this.setContent(t)}else this.setContent(null)}}class S extends C{constructor({shell:e,placeholder:t,translator:n}){super(),this._labshell=e,this.translator=n||d.wK,this._trans=this.translator.load("jupyterlab");const i=this.layout=new k.ui;if(t)this._placeholder=t;else{const e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("h3"),i=document.createElement("p");n.textContent=this._trans.__("No Properties"),i.textContent=this._trans.__("The property inspector allows to view and edit properties of a selected notebook."),t.className="jp-PropertyInspector-placeholderContent",t.appendChild(n),t.appendChild(i),e.appendChild(t),this._placeholder=new k.x0({node:e}),this._placeholder.addClass("jp-PropertyInspector-placeholder")}i.widget=this._placeholder,this._labshell.currentChanged.connect(this._onShellCurrentChanged,this),this._onShellCurrentChanged()}setContent(e){const t=this.layout;t.widget&&(t.widget.removeClass("jp-PropertyInspector-content"),t.removeWidget(t.widget)),e||(e=this._placeholder),e.addClass("jp-PropertyInspector-content"),t.widget=e}showPanel(){this._labshell.activateById(this.id)}_onShellCurrentChanged(){const e=this.currentWidget;if(!e)return void this.setContent(null);const t=this._labshell.currentWidget;(null==t?void 0:t.node.contains(e.node))?this.refresh():this.setContent(null)}}!function(e){e.PropertyInspector=class{constructor(e){this._isDisposed=!1,this._content=null,this._owner=null,this._onAction=new b.Signal(this),this._owner=e}get owner(){return this._owner}get content(){return this._content}get isDisposed(){return this._isDisposed}get onAction(){return this._onAction}showPanel(){this._isDisposed||this._onAction.emit("show-panel")}render(e){this._isDisposed||(e instanceof k.x0?this._content=e:this._content=x._Q.create(e),this._onAction.emit("content"))}dispose(){this._isDisposed||(this._isDisposed=!0,this._content=null,this._owner=null,b.Signal.clearData(this))}}}(_||(_={}));var E=n(69584),I=n(15334),T=n(19080),A=n(62939),P=n(68704),j=n(13855);class B extends k.x0{constructor(){super(),this._button=document.createElement("button"),this._label=document.createElement("label"),this._valueChanged=new b.Signal(this),this._button.className="jp-switch",this._button.setAttribute("role","switch"),this._button.setAttribute("aria-checked",this._value?this._value.toString():"false"),this._label.className="jp-switch-label";const e=document.createElement("div");e.className="jp-switch-track",e.setAttribute("aria-hidden","true"),this._button.appendChild(this._label),this._button.appendChild(e),this.node.appendChild(this._button)}get value(){return this._value}set value(e){const t=this._value;t!==e&&(this._button.setAttribute("aria-checked",e.toString()),this._value=e,this._valueChanged.emit({name:"value",oldValue:t,newValue:e}))}get valueChanged(){return this._valueChanged}get label(){var e;return null!==(e=this._label.textContent)&&void 0!==e?e:""}set label(e){this._label.textContent=e}get caption(){return this._button.title}set caption(e){this._button.title=e,this._label.title=e}handleEvent(e){"click"===e.type&&(this.value=!this.value)}onAfterAttach(){this._button.addEventListener("click",this)}onBeforeDetach(){this._button.removeEventListener("click",this)}}var R=n(38921),L=n(16950),M=n(9387),D=n(48139),N=n(84939);const $={id:"@jupyterlab/application-extension:top-bar",description:"Adds a toolbar to the top area (next to the main menu bar).",autoStart:!0,requires:[E.X,f.qe],optional:[d.sQ],activate:(e,t,n,i)=>{const o=(null!=i?i:d.wK).load("jupyterlab"),s=new N.M7;s.id="jp-top-bar",s.node.setAttribute("aria-label",o.__("Topbar toolbar")),(0,D.I)(s,(0,D.g)(n,t,"TopBar",$.id,null!=i?i:d.wK),s),e.shell.add(s,"top",{rank:900})}},W=100;var F;!function(e){e.activateNextTab="application:activate-next-tab",e.activatePreviousTab="application:activate-previous-tab",e.activateNextTabBar="application:activate-next-tab-bar",e.activatePreviousTabBar="application:activate-previous-tab-bar",e.close="application:close",e.closeOtherTabs="application:close-other-tabs",e.closeRightTabs="application:close-right-tabs",e.closeAll="application:close-all",e.setMode="application:set-mode",e.showPropertyPanel="property-inspector:show-panel",e.resetLayout="application:reset-layout",e.toggleContextMenu="application:toggle-context-menu",e.toggleHeader="application:toggle-header",e.toggleMode="application:toggle-mode",e.toggleLeftArea="application:toggle-left-area",e.toggleRightArea="application:toggle-right-area",e.toggleSideTabBar="application:toggle-side-tabbar",e.toggleSidebarWidget="application:toggle-sidebar-widget",e.togglePresentationMode="application:toggle-presentation-mode",e.toggleFullscreenMode="application:toggle-fullscreen-mode",e.tree="router:tree",e.switchSidebar="sidebar:switch"}(F||(F={}));const z={id:"@jupyterlab/application-extension:commands",description:"Adds commands related to the shell.",autoStart:!0,requires:[d.sQ],optional:[i.V,f.kn],activate:(e,t,n,i)=>{var s;const{commands:a,shell:r}=e,l=t.load("jupyterlab"),d=l.__("Main Area");a.addCommand(o.I.contextMenu,{label:l.__("Shift+Right Click for Browser Menu"),isEnabled:()=>!1,execute:()=>{}});const c=()=>{const t=e.contextMenuHitTest(e=>!!e.dataset.id);return t&&(0,R.find)(r.widgets("main"),e=>e.id===t.dataset.id)||r.currentWidget},u=(e,t)=>{if("tab-area"===e.type)return e.widgets.includes(t)?e:null;if("split-area"===e.type)for(const n of e.children){const e=u(n,t);if(e)return e}return null},h=e=>{const{id:t}=e,i=(e=>{var t;const i=null==n?void 0:n.saveLayout(),o=null==i?void 0:i.mainArea;if(!o||"multiple-document"!==p.PageConfig.getOption("mode"))return null;const s=null===(t=o.dock)||void 0===t?void 0:t.main;return s?u(s,e):null})(e),o=i&&i.widgets||[],s=o.findIndex(e=>e.id===t);return s<0?[]:o.slice(s+1)};function m(e){e&&e.focus()}a.addCommand(F.close,{label:()=>l.__("Close Tab"),isEnabled:()=>{const e=c();return!!e&&e.title.closable},execute:()=>{const e=c();e&&e.close()}}),a.addCommand(F.closeOtherTabs,{label:()=>l.__("Close All Other Tabs"),isEnabled:()=>(0,R.some)(r.widgets("main"),(e,t)=>1===t),execute:()=>{const e=c();if(!e)return;const{id:t}=e;for(const e of r.widgets("main"))e.id!==t&&e.close()}}),a.addCommand(F.closeRightTabs,{label:()=>l.__("Close Tabs to Right"),isEnabled:()=>!!c()&&h(c()).length>0,execute:()=>{const e=c();e&&h(e).forEach(e=>e.close())}}),null===(s=r.currentChanged)||void 0===s||s.connect(()=>{[F.close,F.closeOtherTabs,F.closeRightTabs].forEach(e=>a.notifyCommandChanged(e))}),n&&(a.addCommand(F.activateNextTab,{label:l.__("Activate Next Tab"),execute:()=>{n.activateNextTab()}}),a.addCommand(F.activatePreviousTab,{label:l.__("Activate Previous Tab"),execute:()=>{n.activatePreviousTab()}}),a.addCommand(F.activateNextTabBar,{label:l.__("Activate Next Tab Bar"),execute:()=>{n.activateNextTabBar()}}),a.addCommand(F.activatePreviousTabBar,{label:l.__("Activate Previous Tab Bar"),execute:()=>{n.activatePreviousTabBar()}}),a.addCommand(F.closeAll,{label:l.__("Close All Tabs"),execute:()=>{n.closeAll()}}),a.addCommand(F.toggleHeader,{label:l.__("Show Header"),execute:()=>{"single-document"===n.mode&&n.toggleTopInSimpleModeVisibility()},isToggled:()=>n.isTopInSimpleModeVisible(),isVisible:()=>"single-document"===n.mode}),a.addCommand(F.toggleLeftArea,{label:l.__("Show Left Sidebar"),execute:()=>{n.leftCollapsed?n.expandLeft():(n.collapseLeft(),n.currentWidget&&n.activateById(n.currentWidget.id))},isToggled:()=>!n.leftCollapsed,isEnabled:()=>!n.isEmpty("left")}),a.addCommand(F.toggleRightArea,{label:l.__("Show Right Sidebar"),execute:()=>{n.rightCollapsed?n.expandRight():(n.collapseRight(),n.currentWidget&&n.activateById(n.currentWidget.id))},isToggled:()=>!n.rightCollapsed,isEnabled:()=>!n.isEmpty("right")}),a.addCommand(F.toggleSidebarWidget,{label:e=>void 0===e||void 0===e.side||void 0===e.index?l.__("Toggle Sidebar Element"):"right"===e.side?l.__("Toggle Element %1 in Right Sidebar",parseInt(e.index,10)+1):l.__("Toggle Element %1 in Left Sidebar",parseInt(e.index,10)+1),execute:e=>{const t=parseInt(e.index,10);if("left"!=e.side&&"right"!=e.side)throw Error(`Unsupported sidebar: ${e.side}`);const i=Array.from(n.widgets(e.side));if(t>=i.length)return;const o=i[t].id,s=document.querySelector("[data-id='"+o+"']");(e=>{let t;if("left"!=e&&"right"!=e)throw Error(`Unsupported sidebar: ${e}`);if("left"===e)t=document.querySelector(".lm-TabBar-tab.lm-mod-current");else{const e=document.querySelectorAll(".lm-TabBar-tab.lm-mod-current");t=e[e.length-1]}const n=null==t?void 0:t.getAttribute("data-id");return n?null==n?void 0:n.toString():""})(e.side)===o?("left"==e.side&&(n.collapseLeft(),m(s)),"right"==e.side&&(n.collapseRight(),m(s))):(n.activateById(o),m(s))}}),a.addCommand(F.toggleSideTabBar,{label:e=>"right"===e.side?l.__("Show Right Activity Bar"):l.__("Show Left Activity Bar"),execute:e=>{"right"===e.side?n.toggleSideTabBarVisibility("right"):n.toggleSideTabBarVisibility("left")},isToggled:e=>"right"===e.side?n.isSideTabBarVisible("right"):n.isSideTabBarVisible("left"),isEnabled:e=>"right"===e.side?!n.isEmpty("right"):!n.isEmpty("left")}),a.addCommand(F.togglePresentationMode,{label:()=>l.__("Presentation Mode"),execute:()=>{n.presentationMode=!n.presentationMode},isToggled:()=>n.presentationMode,isVisible:()=>!0}),a.addCommand(F.toggleFullscreenMode,{label:l.__("Fullscreen Mode"),execute:()=>{null===document.fullscreenElement||void 0===document.fullscreenElement?document.documentElement.requestFullscreen().catch(e=>{console.error("Failed to enter fullscreen mode.",e)}):null!==document.fullscreenElement&&document.exitFullscreen().catch(e=>{console.error("Failed to exit fullscreen mode.",e)})},isToggled:()=>null!==document.fullscreenElement}),a.addCommand(F.setMode,{label:e=>e.mode?l.__("Set %1 mode.",e.mode):l.__("Set the layout `mode`."),caption:l.__('The layout `mode` can be "single-document" or "multiple-document".'),isVisible:e=>{const t=e.mode;return"single-document"===t||"multiple-document"===t},execute:e=>{const t=e.mode;if("single-document"!==t&&"multiple-document"!==t)throw new Error(`Unsupported application shell mode: ${t}`);n.mode=t}}),a.addCommand(F.toggleMode,{label:l.__("Simple Interface"),isToggled:()=>"single-document"===n.mode,execute:()=>{const e="multiple-document"===n.mode?{mode:"single-document"}:{mode:"multiple-document"};return a.execute(F.setMode,e)}}),a.addCommand(F.resetLayout,{label:l.__("Reset Default Layout"),execute:()=>{n.presentationMode&&a.execute(F.togglePresentationMode).catch(e=>{console.error("Failed to undo presentation mode.",e)}),null===document.fullscreenElement&&void 0===document.fullscreenElement||a.execute(F.toggleFullscreenMode).catch(e=>{console.error("Failed to exit fullscreen mode.",e)}),"single-document"!==n.mode||n.isTopInSimpleModeVisible()||a.execute(F.toggleHeader).catch(e=>{console.error("Failed to display title header.",e)}),["left","right"].forEach(e=>{n.isSideTabBarVisible(e)||n.isEmpty(e)||a.execute(F.toggleSideTabBar,{side:e}).catch(t=>{console.error(`Failed to show ${e} activity bar.`,t)})})}})),i&&([F.activateNextTab,F.activatePreviousTab,F.activateNextTabBar,F.activatePreviousTabBar,F.close,F.closeAll,F.closeOtherTabs,F.closeRightTabs,F.toggleHeader,F.toggleLeftArea,F.toggleRightArea,F.togglePresentationMode,F.toggleFullscreenMode,F.toggleMode,F.resetLayout].forEach(e=>i.addItem({command:e,category:d})),["right","left"].forEach(e=>{i.addItem({command:F.toggleSideTabBar,category:d,args:{side:e}})}))}},q={id:"@jupyterlab/application-extension:main",description:"Initializes the application and provides the URL tree path handler.",requires:[s.z$,f.cg,d.sQ,o.e.ITreeResolver],optional:[s.yn],provides:a.w,activate:(e,t,n,i,o,s)=>{const a=i.load("jupyterlab");if(!(e instanceof r.n))throw new Error(`${q.id} must be activated in JupyterLab.`);let d="",u="";const h=n.name;if(console.debug(`Starting application in workspace: "${h}"`),0!==e.registerPluginErrors.length){const t=M.createElement("pre",null,e.registerPluginErrors.map(e=>e.message).join("\n"));(0,l.f1)(a.__("Error Registering Plugins"),{message:t})}e.shell.modeChanged.connect((e,n)=>{const i=p.PageConfig.getUrl({mode:n}),o=p.URLExt.parse(i).pathname;t.navigate(o,{skipRouting:!0}),p.PageConfig.setOption("mode",n)}),o.paths.then(()=>{e.shell.currentPathChanged.connect((e,n)=>{const i=n.newValue,o=i||u,s=p.PageConfig.getUrl({treePath:o}),a=p.URLExt.parse(s).pathname;t.navigate(a,{skipRouting:!0}),p.PageConfig.setOption("treePath",o),d=i})}),s=s||c,e.serviceManager.connectionFailure.connect((e,t)=>s(e,t,i));const m=e.serviceManager.builder,g=()=>m.build().then(()=>(0,l.ui)({title:a.__("Build Complete"),body:M.createElement("div",null,a.__("Build successfully completed, reload page?"),M.createElement("br",null),a.__("You will lose any unsaved changes.")),buttons:[l.lG.cancelButton({label:a.__("Reload Without Saving"),actions:["reload"]}),l.lG.okButton({label:a.__("Save and Reload")})],hasClose:!0})).then(({button:{accept:n,actions:i}})=>{n?e.commands.execute("docmanager:save").then(()=>{t.reload()}).catch(e=>{(0,l.f1)(a.__("Save Failed"),{message:M.createElement("pre",null,e.message)})}):i.includes("reload")&&t.reload()}).catch(e=>{(0,l.f1)(a.__("Build Failed"),{message:M.createElement("pre",null,e.message)})});return m.isAvailable&&m.shouldCheck&&m.getStatus().then(e=>{if("building"===e.status)return g();if("needed"!==e.status)return;const t=M.createElement("div",null,a.__("JupyterLab build is suggested:"),M.createElement("br",null),M.createElement("pre",null,e.message));(0,l.ui)({title:a.__("Build Recommended"),body:t,buttons:[l.lG.cancelButton(),l.lG.okButton({label:a.__("Build")})]}).then(e=>e.button.accept?g():void 0)}),function(e){o.paths.then(()=>{if(u=e,!d){const n=p.PageConfig.getUrl({treePath:e}),i=p.URLExt.parse(n).pathname;t.navigate(i,{skipRouting:!0}),p.PageConfig.setOption("treePath",e)}})}},autoStart:!0},U={id:"@jupyterlab/application-extension:context-menu",description:"Populates the context menu.",autoStart:!0,requires:[E.X,d.sQ],optional:[f.kn],activate:(e,t,n,i)=>{const o=n.load("jupyterlab");function s(t){const n=new P.z({...t,commands:e.commands});return t.label&&(n.title.label=o.__(t.label)),n}e.started.then(()=>oe.loadSettingsContextMenu(e.contextMenu,e.commands,t,s,n)).then(()=>{i&&(null==i||i.addItem({category:o.__("Settings"),command:F.toggleContextMenu}))}).catch(e=>{console.error("Failed to load context menu items from settings registry.",e)})}},O={id:"@jupyterlab/application-extension:dirty",description:"Adds safeguard dialog when closing the browser tab with unsaved modifications.",autoStart:!0,requires:[d.sQ],activate:(e,t)=>{if(!(e instanceof r.n))throw new Error(`${O.id} must be activated in JupyterLab.`);const n=t.load("jupyterlab").__("Are you sure you want to exit JupyterLab?\n\nAny unsaved changes will be lost.");window.addEventListener("beforeunload",t=>{if(e.status.isDirty)return t.returnValue=n})}},V={id:"@jupyterlab/application-extension:layout",description:"Provides the shell layout restorer.",requires:[T.IStateDB,i.V,E.X],optional:[d.sQ],activate:(e,t,n,i,o)=>{const s=(null!=o?o:d.wK).load("jupyterlab"),a=e.started,r=e.commands,c=p.PageConfig.getOption("mode"),u=new h.r({connector:t,first:a,registry:r,mode:c});return i.load(Q.id).then(t=>{var i,o;const a=t.composite.layout;n.restoreLayout(c,u,{"multiple-document":null!==(i=a.multiple)&&void 0!==i?i:{},"single-document":null!==(o=a.single)&&void 0!==o?o:{}}).then(()=>{n.layoutModified.connect(()=>{u.save(n.saveLayout())}),t.changed.connect(g),oe.activateSidebarSwitcher(e,n,t,s)})}).catch(e=>{console.error("Fail to load settings for the layout restorer."),console.error(e)}),u;async function g(e){m.JSONExt.deepEqual(e.composite.layout,{single:n.userLayout["single-document"],multiple:n.userLayout["multiple-document"]})||(await(0,l.ui)({title:s.__("Information"),body:s.__("User layout customization has changed. You may need to reload JupyterLab to see the changes."),buttons:[l.lG.cancelButton(),l.lG.okButton({label:s.__("Reload")})]})).button.accept&&location.reload()}},autoStart:!0,provides:h.E},J={id:"@jupyterlab/application-extension:router",description:"Provides the URL router",requires:[o.e.IPaths],activate:(e,t)=>{const{commands:n}=e,i=t.urls.base,o=new v({base:i,commands:n});return e.started.then(()=>{o.route(),window.addEventListener("popstate",()=>{o.route()})}),o},autoStart:!0,provides:s.z$},H={id:"@jupyterlab/application-extension:tree-resolver",description:"Provides the tree route resolver",autoStart:!0,requires:[s.z$],provides:o.e.ITreeResolver,activate:(e,t)=>{const{commands:n}=e,i=new g.DisposableSet,o=new m.PromiseDelegate,s=new RegExp("/(lab|doc)(/workspaces/[a-zA-Z0-9-_]+)?(/tree/.*)?");i.add(n.addCommand(F.tree,{execute:async e=>{var t;if(i.isDisposed)return;const n=p.URLExt.queryStringToObject(null!==(t=e.search)&&void 0!==t?t:""),s=n["file-browser-path"]||"";delete n["file-browser-path"],i.dispose(),o.resolve({browser:s,file:p.PageConfig.getOption("treePath")})}})),i.add(t.register({command:F.tree,pattern:s}));const a=()=>{i.isDisposed||(i.dispose(),o.resolve(null))};return t.routed.connect(a),i.add(new g.DisposableDelegate(()=>{t.routed.disconnect(a)})),{paths:o.promise}}},G={id:"@jupyterlab/application-extension:notfound",description:"Defines the behavior for not found URL (aka route).",requires:[o.e.IPaths,s.z$,d.sQ],activate:(e,t,n,i)=>{const o=i.load("jupyterlab"),s=t.urls.notFound;if(!s)return;const a=n.base,r=o.__("The path: %1 was not found. JupyterLab redirected to: %2",s,a);n.navigate(""),(0,l.f1)(o.__("Path Not Found"),{message:r})},autoStart:!0},K={id:"@jupyterlab/application-extension:faviconbusy",description:"Handles the favicon depending on the application status.",requires:[s.n3],activate:async(e,t)=>{t.busySignal.connect((e,t)=>{const n=document.querySelector('link[rel="icon"]'+(t?".idle.favicon":".busy.favicon"));if(!n)return;const i=document.querySelector("link"+(t?".busy.favicon":".idle.favicon"));i&&n!==i&&(n.rel="",i.rel="icon",i.parentNode.replaceChild(i,i))})},autoStart:!0},Q={id:"@jupyterlab/application-extension:shell",description:"Provides the JupyterLab shell. It has an extended API compared to `app.shell`.",optional:[E.X],activate:(e,t)=>{if(!(e.shell instanceof i.K))throw new Error(`${Q.id} did not find a LabShell instance.`);return t&&t.load(Q.id).then(t=>{e.shell.updateConfig(t.composite),t.changed.connect(()=>{e.shell.updateConfig(t.composite)})}),e.shell},autoStart:!0,provides:i.V},X={id:"@jupyterlab/application-extension:status",description:"Provides the application status.",activate:e=>{if(!(e instanceof r.n))throw new Error(`${X.id} must be activated in JupyterLab.`);return e.status},autoStart:!0,provides:s.n3},Z={id:"@jupyterlab/application-extension:info",description:"Provides the application information.",activate:e=>{if(!(e instanceof r.n))throw new Error(`${Z.id} must be activated in JupyterLab.`);return e.info},autoStart:!0,provides:r.n.IInfo},Y={id:"@jupyterlab/application-extension:paths",description:"Provides the application paths.",activate:e=>{if(!(e instanceof r.n))throw new Error(`${Y.id} must be activated in JupyterLab.`);return e.paths},autoStart:!0,provides:o.e.IPaths},ee={id:"@jupyterlab/application-extension:property-inspector",description:"Provides the property inspector.",autoStart:!0,requires:[i.V,d.sQ],optional:[h.E],provides:w.v,activate:(e,t,n,i)=>{const o=n.load("jupyterlab"),s=new S({shell:t,translator:n});return s.title.icon=j.AA,s.title.caption=o.__("Property Inspector"),s.id="jp-property-inspector",t.add(s,"right",{rank:100,type:"Property Inspector"}),e.commands.addCommand(F.showPropertyPanel,{label:o.__("Property Inspector"),execute:()=>{t.activateById(s.id)}}),i&&i.add(s,"jp-property-inspector"),s}},te={id:"@jupyterlab/application-extension:logo",description:"Sets the application logo.",autoStart:!0,requires:[i.V],activate:(e,t)=>{const n=new k.x0;j.H8.element({container:n.node,elementPosition:"center",margin:"2px 2px 2px 8px",height:"auto",width:"16px"}),n.id="jp-MainLogo",t.add(n,"top",{rank:0})}},ne={id:"@jupyterlab/application-extension:mode-switch",description:"Adds the interface mode switch",requires:[i.V,d.sQ],optional:[A.$O,E.X],activate:(e,t,n,i,o)=>{if(null===i)return;const s=n.load("jupyterlab"),a=new B;if(a.id="jp-single-document-mode",a.valueChanged.connect((e,n)=>{t.mode=n.newValue?"single-document":"multiple-document"}),t.modeChanged.connect((e,t)=>{a.value="single-document"===t}),o){const n=o.load(Q.id),i=e=>{const n=e.get("startMode").composite;n&&(t.mode="single"===n?"single-document":"multiple-document")};Promise.all([n,e.restored]).then(([e])=>{i(e)}).catch(e=>{console.error(e.message)})}const r=()=>{const t=e.commands.keyBindings.find(e=>"application:toggle-mode"===e.command);if(t){const e=t.keys.map(L.J.formatKeystroke).join(", ");a.caption=s.__("Simple Interface (%1)",e)}else a.caption=s.__("Simple Interface")};r(),e.commands.keyBindingChanged.connect(()=>{r()}),a.label=s.__("Simple"),i.registerStatusItem(ne.id,{priority:1,item:a,align:"left",rank:-1})},autoStart:!0},ie=[U,O,q,z,V,J,H,G,K,Q,X,Z,ne,Y,ee,te,$];var oe;!function(e){async function t(e){(await(0,l.ui)({title:e.__("Information"),body:e.__("Context menu customization has changed. You will need to reload JupyterLab to see the changes."),buttons:[l.lG.cancelButton(),l.lG.okButton({label:e.__("Reload")})]})).button.accept&&location.reload()}e.loadSettingsContextMenu=async function(e,n,i,o,s){var a;const r=s.load("jupyterlab"),l=U.id;let d=null,c={};function u(e){var t,n;c={};const o=Object.keys(i.plugins).map(e=>{var t,n;const o=null!==(n=null===(t=i.plugins[e].schema["jupyter.lab.menus"])||void 0===t?void 0:t.context)&&void 0!==n?n:[];return c[e]=o,o}).concat([null!==(n=null===(t=e["jupyter.lab.menus"])||void 0===t?void 0:t.context)&&void 0!==n?n:[]]).reduceRight((e,t)=>I.S8.reconcileItems(e,t,!0),[]);e.properties.contextMenu.default=I.S8.reconcileItems(o,e.properties.contextMenu.default,!0).sort((e,t)=>{var n,i;return(null!==(n=e.rank)&&void 0!==n?n:1/0)-(null!==(i=t.rank)&&void 0!==i?i:1/0)})}i.transform(l,{compose:e=>{var t,n,i,o;d||(d=m.JSONExt.deepCopy(e.schema),u(d));const s=null!==(i=null===(n=null===(t=d.properties)||void 0===t?void 0:t.contextMenu)||void 0===n?void 0:n.default)&&void 0!==i?i:[],a={...e.data.user,contextMenu:null!==(o=e.data.user.contextMenu)&&void 0!==o?o:[]},r={...e.data.composite,contextMenu:I.S8.reconcileItems(s,a.contextMenu,!1)};return e.data={composite:r,user:a},e},fetch:e=>(d||(d=m.JSONExt.deepCopy(e.schema),u(d)),{data:e.data,id:e.id,raw:e.raw,schema:d,version:e.version})});const h=await i.load(l),p=e=>{const t=document.body,n=t.hasAttribute("data-jp-suppress-context-menu"),i=e.get("disabled").composite;n&&!i?t.removeAttribute("data-jp-suppress-context-menu"):i&&!n&&t.setAttribute("data-jp-suppress-context-menu","true")},g=null!==(a=h.composite.contextMenu)&&void 0!==a?a:[];I.S8.filterDisabledItems(g).forEach(t=>{y.K.addContextItem({rank:W,...t},e,o)}),h.changed.connect(()=>{var e;const n=null!==(e=h.composite.contextMenu)&&void 0!==e?e:[];m.JSONExt.deepEqual(g,n)||t(r),p(h)}),i.pluginChanged.connect(async(n,s)=>{var a,d,u,h;if(s!==l){const n=null!==(a=c[s])&&void 0!==a?a:[],l=null!==(u=null===(d=i.plugins[s].schema["jupyter.lab.menus"])||void 0===d?void 0:d.context)&&void 0!==u?u:[];if(!m.JSONExt.deepEqual(n,l))if(c[s])await t(r);else{c[s]=m.JSONExt.deepCopy(l);const t=null!==(h=I.S8.reconcileItems(l,g,!1,!1))&&void 0!==h?h:[];I.S8.filterDisabledItems(t).forEach(t=>{y.K.addContextItem({rank:W,...t},e,o)})}}}),p(h),n.addCommand(F.toggleContextMenu,{label:r.__("Enable Context Menu"),isToggleable:!0,isToggled:()=>!h.get("disabled").composite,execute:()=>{h.set("disabled",!h.get("disabled").composite)}})},e.activateSidebarSwitcher=function(e,t,n,i){e.commands.addCommand(F.switchSidebar,{label:i.__("Switch Sidebar Side"),execute:()=>{const i=e.contextMenuHitTest(e=>!!e.dataset.id);if(!i)return;const o=i.dataset.id,s=document.getElementById("jp-left-stack"),a=document.getElementById(o);let r=null;if(s&&a&&s.contains(a)){const e=(0,R.find)(t.widgets("left"),e=>e.id===o);e&&(r=t.move(e,"right"),t.activateById(e.id))}else{const e=(0,R.find)(t.widgets("right"),e=>e.id===o);e&&(r=t.move(e,"left"),t.activateById(e.id))}r&&n.set("layout",{single:r["single-document"],multiple:r["multiple-document"]}).catch(e=>{console.error("Failed to save user layout customization.",e)})}}),e.commands.commandExecuted.connect((e,t)=>{t.id===F.resetLayout&&n.remove("layout").catch(e=>{console.error("Failed to remove user layout customization.",e)})})}}(oe||(oe={}))},60639:(e,t,n)=>{n.d(t,{e:()=>s});const i="jp-HoverBox",o="-1000";var s;!function(e){e.setGeometry=function(e){const{anchor:t,host:n,node:s,privilege:a,outOfViewDisplay:r}=e,l=n.getBoundingClientRect();s.classList.contains(i)||s.classList.add(i),s.style.visibility&&(s.style.visibility=""),""===s.style.zIndex&&(s.style.zIndex=""),s.style.maxHeight="",s.style.marginTop="";const d=e.style||window.getComputedStyle(s),c=t.top-l.top,u=l.bottom-t.bottom,h=parseInt(d.marginTop,10)||0,p=parseInt(d.marginLeft,10)||0,m=parseInt(d.minHeight,10)||e.minHeight;let g=parseInt(d.maxHeight,10)||e.maxHeight;const b="forceAbove"!==a&&("forceBelow"===a||("above"===a?c<g&&c<u:u>=g||u>=c));if(b?g=Math.min(u-h,g):(g=Math.min(c,g),s.style.marginTop="0px"),s.style.maxHeight=`${g}px`,!(g>=m&&(u>=m||c>=m)))return s.style.zIndex=o,void(s.style.visibility="hidden");e.size?(s.style.width=`${e.size.width}px`,s.style.height=`${e.size.height}px`,s.style.contain="strict"):(s.style.contain="",s.style.width="auto",s.style.height="");const v=e.size?e.size.height:s.getBoundingClientRect().height,_=e.offset&&e.offset.vertical&&e.offset.vertical.above||0,f=e.offset&&e.offset.vertical&&e.offset.vertical.below||0;let y=b?l.bottom-u+f:l.top+c-v+_;s.style.top=`${Math.floor(y)}px`;const w=e.offset&&e.offset.horizontal||0;let x=t.left+w;s.style.left=`${Math.ceil(x)}px`;let k=s.getBoundingClientRect(),C=k.right;C>window.innerWidth&&(x-=C-window.innerWidth,C=window.innerWidth,s.style.left=`${Math.ceil(x)}px`),x<w-p&&(x=w-p,s.style.left=`${Math.ceil(x)}px`),s.style.zIndex="-1000";const S=k.bottom,E=n.contains(document.elementFromPoint(x,y)),I=n.contains(document.elementFromPoint(C,y)),T=n.contains(document.elementFromPoint(C,S)),A=n.contains(document.elementFromPoint(x,S));s.style.zIndex="";const P=E||I,j=A||T,B=E||A,R=T||I,L=S-y,M=C-x,D=y<l.top,N=S>l.bottom,$=x+p<l.left,W=C>l.right;let F=!1,z=!1,q=!1;if(D)switch((null==r?void 0:r.top)||"hidden-inside"){case"hidden-inside":P||(F=!0);break;case"hidden-outside":j||(F=!0);break;case"stick-inside":l.top>y&&(y=l.top,q=!0);break;case"stick-outside":l.top>S&&(y=l.top-L,q=!0)}if(N)switch((null==r?void 0:r.bottom)||"hidden-outside"){case"hidden-inside":j||(F=!0);break;case"hidden-outside":P||(F=!0);break;case"stick-inside":l.bottom<S&&(y=l.bottom-L,q=!0);break;case"stick-outside":l.bottom<y&&(y=l.bottom,q=!0)}if($)switch((null==r?void 0:r.left)||"hidden-inside"){case"hidden-inside":B||(F=!0);break;case"hidden-outside":R||(F=!0);break;case"stick-inside":l.left>x+p&&(x=l.left-p,z=!0);break;case"stick-outside":l.left>C&&(x=l.left-p-M,z=!0)}if(W)switch((null==r?void 0:r.right)||"hidden-outside"){case"hidden-inside":R||(F=!0);break;case"hidden-outside":B||(F=!0);break;case"stick-inside":l.right<C&&(x=l.right-M,z=!0);break;case"stick-outside":l.right<x&&(x=l.right,z=!0)}F&&(s.style.zIndex=o,s.style.visibility="hidden"),z&&(s.style.left=`${Math.ceil(x)}px`),q&&(s.style.top=`${Math.ceil(y)}px`)}}(s||(s={}))},62939:(e,t,n)=>{n.d(t,{NZ:()=>o,$O:()=>v,z2:()=>d,a3:()=>h,eA:()=>b,pC:()=>u,yp:()=>r});var i=n(9387);function o(e){const{spacing:t,children:n,className:o,...s}=e,a=i.Children.toArray(n).filter(Boolean),r=a.length;return i.createElement("div",{className:`jp-StatusBar-GroupItem ${o||""}`,...s},a.map((e,n)=>{const o=`group-item-${n}`;return 0===n?i.createElement("div",{key:o,style:{marginRight:`${t}px`}},e):n===r-1?i.createElement("div",{key:o,style:{marginLeft:`${t}px`}},e):i.createElement("div",{key:o,style:{margin:`0px ${t}px`}},e)}))}var s=n(60639),a=n(14809);function r(e){const t=new l(e);return e.startHidden||t.launch(),t}class l extends a.x0{constructor(e){super(),this.addClass("jp-ThemedContainer"),this._body=e.body,this._body.addClass("jp-StatusBar-HoverItem"),this._anchor=e.anchor,this._align=e.align,e.hasDynamicSize&&(this._observer=new ResizeObserver(()=>{this.update()})),(this.layout=new a.DG).addWidget(e.body),this._body.node.addEventListener("resize",()=>{this.update()})}launch(){this._setGeometry(),a.x0.attach(this,document.body),this.update(),this._anchor.addClass("jp-mod-clicked"),this._anchor.removeClass("jp-mod-highlight")}onUpdateRequest(e){this._setGeometry(),super.onUpdateRequest(e)}onAfterAttach(e){var t;document.addEventListener("click",this,!1),this.node.addEventListener("keydown",this,!1),window.addEventListener("resize",this,!1),null===(t=this._observer)||void 0===t||t.observe(this._body.node)}onBeforeDetach(e){var t;null===(t=this._observer)||void 0===t||t.disconnect(),document.removeEventListener("click",this,!1),this.node.removeEventListener("keydown",this,!1),window.removeEventListener("resize",this,!1)}onResize(){this.update()}dispose(){var e;null===(e=this._observer)||void 0===e||e.disconnect(),super.dispose(),this._anchor.removeClass("jp-mod-clicked"),this._anchor.addClass("jp-mod-highlight")}handleEvent(e){switch(e.type){case"keydown":this._evtKeydown(e);break;case"click":this._evtClick(e);break;case"resize":this.onResize()}}_evtClick(e){!e.target||this._body.node.contains(e.target)||this._anchor.node.contains(e.target)||this.dispose()}_evtKeydown(e){27===e.keyCode&&(e.stopPropagation(),e.preventDefault(),this.dispose())}_setGeometry(){let e=0;const t=this._anchor.node.getBoundingClientRect(),n=this._body.node.getBoundingClientRect();"right"===this._align&&(e=-(n.width-t.width));const i=window.getComputedStyle(this._body.node);s.e.setGeometry({anchor:t,host:document.body,maxHeight:500,minHeight:20,node:this._body.node,offset:{horizontal:e},privilege:"forceAbove",style:i})}}function d(e){const{width:t,percentage:n,...o}=e;return i.createElement("div",{className:"jp-Statusbar-ProgressBar-progress-bar",role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n},i.createElement(c,{percentage:n,...o,contentWidth:t}))}function c(e){return i.createElement("div",{style:{width:`${e.percentage}%`}},i.createElement("p",null,e.content))}function u(e){const{title:t,source:n,className:o,...s}=e;return i.createElement("span",{className:o?`jp-StatusBar-TextItem ${o}`:"jp-StatusBar-TextItem",title:t,...s},n)}function h(e){return i.createElement("div",{className:"jp-Statusbar-ProgressCircle",role:"progressbar","aria-label":e.label||"Unlabelled progress circle","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.progress},i.createElement("svg",{viewBox:"0 0 250 250"},i.createElement("circle",{cx:"125",cy:"125",r:"104",stroke:"var(--jp-inverse-layout-color3)",strokeWidth:"20",fill:"none"}),i.createElement("path",{className:"jp-Statusbar-ProgressCirclePath",transform:"translate(125,125) scale(.9)",d:(e=>{const t=Math.max(3.6*e,.1),n=t*Math.PI/180,i=104*Math.sin(n),o=-104*Math.cos(n);return"M 0 0 v -104 A 104 104 1 "+(t<180?1:0)+" 0 "+i.toFixed(4)+" "+o.toFixed(4)+" z"})(e.progress),fill:"var(--jp-inverse-layout-color3)"})))}var p,m=n(38921),g=n(79246);class b extends a.x0{constructor(){super(),this._isWindowNarrow=()=>window.innerWidth<=630,this._leftRankItems=[],this._rightRankItems=[],this._statusItems={},this._disposables=new g.DisposableSet,this.addClass("jp-StatusBar-Widget");const e=this.layout=new a.DG,t=this._leftSide=new a.Zk,n=this._middlePanel=new a.Zk,i=this._rightSide=new a.Zk;t.addClass("jp-StatusBar-Left"),n.addClass("jp-StatusBar-Middle"),i.addClass("jp-StatusBar-Right"),i.node.style.flexDirection="row",e.addWidget(t),e.addWidget(n),e.addWidget(i)}registerStatusItem(e,t){if(e in this._statusItems)throw new Error(`Status item ${e} already registered.`);const n={...p.statusItemDefaults,...t},{align:i,item:o,rank:s,priority:a}=n,r=()=>{this._refreshItem(e)};n.activeStateChanged&&n.activeStateChanged.connect(r);const l={id:e,rank:s,priority:a};if(n.item.addClass("jp-StatusBar-Item"),this._statusItems[e]=n,"left"===i){const e=this._findInsertIndex(this._leftRankItems,l);-1===e?(this._leftSide.addWidget(o),this._leftRankItems.push(l)):(m.ArrayExt.insert(this._leftRankItems,e,l),this._leftSide.insertWidget(e,o))}else if("right"===i){const e=m.ArrayExt.findFirstIndex(this._rightRankItems,e=>e.rank<l.rank);-1===e?(this._rightSide.addWidget(o),this._rightRankItems.push(l)):(m.ArrayExt.insert(this._rightRankItems,e,l),this._rightSide.insertWidget(e,o))}else this._middlePanel.addWidget(o);this._refreshItem(e);const d=new g.DisposableDelegate(()=>{delete this._statusItems[e],n.activeStateChanged&&n.activeStateChanged.disconnect(r),o.parent=null,o.dispose()});return this._disposables.add(d),d}dispose(){this._leftRankItems.length=0,this._rightRankItems.length=0,this._disposables.dispose(),super.dispose()}onUpdateRequest(e){this._refreshAll(),super.onUpdateRequest(e)}_findInsertIndex(e,t){return m.ArrayExt.findFirstIndex(e,e=>e.rank>t.rank)}_refreshItem(e){const t=this._statusItems[e];!t.isActive()||0===t.priority&&this._isWindowNarrow()?t.item.hide():(t.item.show(),t.item.update())}_refreshAll(){Object.keys(this._statusItems).forEach(e=>{this._refreshItem(e)})}}!function(e){e.statusItemDefaults={align:"left",rank:0,priority:0,isActive:()=>!0,activeStateChanged:void 0}}(p||(p={}));const v=new(n(98238).Token)("@jupyterlab/statusbar:IStatusBar","A service for the status bar on the application. Use this if you want to add new status bar items.")},68704:(e,t,n)=>{n.d(t,{a:()=>i,z:()=>l});var i,o=n(38921),s=n(79246),a=n(72490),r=n(14809);!function(e){e.DEFAULT_RANK=100}(i||(i={}));class l extends r.W1{constructor(e){var t;super(e),this._ranks=[],this.addClass("jp-ThemedContainer"),this._rank=e.rank,this._includeSeparators=null===(t=e.includeSeparators)||void 0===t||t}get rank(){return this._rank}addGroup(e,t){if(0===e.length)return new s.DisposableDelegate(()=>{});const n=null!=t?t:i.DEFAULT_RANK,o=e.map(e=>{var t;return{...e,rank:null!==(t=e.rank)&&void 0!==t?t:n}}).sort((e,t)=>e.rank-t.rank);let a=this._ranks.findIndex(e=>o[0].rank<e);a<0&&(a=this._ranks.length);const r=[];return this._includeSeparators&&r.push(this.insertItem(a++,{type:"separator",rank:n})),r.push(...o.map(e=>this.insertItem(a++,e))),this._includeSeparators&&r.push(this.insertItem(a++,{type:"separator",rank:n})),new s.DisposableDelegate(()=>{r.forEach(e=>e.dispose())})}addItem(e){let t=-1;return e.rank&&(t=this._ranks.findIndex(t=>e.rank<t)),t<0&&(t=this._ranks.length),this.insertItem(t,e)}clearItems(){this._ranks.length=0,super.clearItems()}dispose(){this._ranks.length=0,super.dispose()}getRankAt(e){return this._ranks[e]}insertItem(e,t){var n,s;const a=Math.max(0,Math.min(e,this._ranks.length));o.ArrayExt.insert(this._ranks,a,null!==(n=t.rank)&&void 0!==n?n:Math.max(i.DEFAULT_RANK,null!==(s=this._ranks[this._ranks.length-1])&&void 0!==s?s:i.DEFAULT_RANK));const r=super.insertItem(a,t);return new d(r,this)}removeItemAt(e){o.ArrayExt.removeAt(this._ranks,e),super.removeItemAt(e)}}class d{constructor(e,t){this._item=new WeakRef(e),this._menu=t;const n=e=>{e.disposed.disconnect(n,this),this.dispose()};this._menu.disposed.connect(n,this)}get isDisposed(){return this._isDisposed}get type(){return this._item.deref().type}get command(){return this._item.deref().command}get args(){return this._item.deref().args}get submenu(){return this._item.deref().submenu}get label(){return this._item.deref().label}get mnemonic(){return this._item.deref().mnemonic}get icon(){return this._item.deref().icon}get iconClass(){return this._item.deref().iconClass}get iconLabel(){return this._item.deref().iconLabel}get caption(){return this._item.deref().caption}get className(){return this._item.deref().className}get dataset(){return this._item.deref().dataset}get isEnabled(){return this._item.deref().isEnabled}get isToggled(){return this._item.deref().isToggled}get isVisible(){return this._item.deref().isVisible}get keyBinding(){return this._item.deref().keyBinding}dispose(){if(this._isDisposed)return;this._isDisposed=!0;const e=this._item.deref();e&&!this._menu.isDisposed&&this._menu.removeItem(e),a.Signal.clearData(this)}}}}]);