"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[46268],{46268:(e,t,n)=>{n.r(t),n.d(t,{Commands:()=>ve,default:()=>Ie,tabSpaceStatus:()=>ke});var i=n(16255),o=n(59179),r=n(48139),a=n(80578),s=n(41665),d=n(75478),l=n(4279),c=n(1290),u=n(52556),m=n(3138),h=n(78828),g=n(53819),p=n(98238);const f=new p.Token("@jupyterlab/fileeditor:IEditorTracker","A widget tracker for file editors.\n  Use this if you want to be able to iterate over and interact with file editors\n  created by the application."),v=new p.Token("@jupyterlab/fileeditor:IEditorWidgetFactory","A factory for creating file editors.");var y=n(96189),b=n(49723),_=n(13855),C=n(14809);class w extends C.x0{constructor(e){super(),this._ready=new p.PromiseDelegate,this.addClass("jp-FileEditor");const t=this._context=e.context;this._mimeTypeService=e.mimeTypeService;const n=this._editorWidget=new y.k({factory:e.factory,model:t.model,editorOptions:{config:w.defaultEditorConfig}});this._editorWidget.addClass("jp-FileEditorCodeWrapper"),this._editorWidget.node.dataset.jpCodeRunner="true",this._editorWidget.node.dataset.jpUndoer="true",this.editor=n.editor,this.model=n.model,t.ready.then(()=>{this._onContextReady()}),this._onPathChanged(),t.pathChanged.connect(this._onPathChanged,this),(this.layout=new C.gZ).addWidget(n)}get context(){return this._context}get ready(){return this._ready.promise}handleEvent(e){this.model&&"mousedown"===e.type&&this._ensureFocus()}onAfterAttach(e){super.onAfterAttach(e),this.node.addEventListener("mousedown",this)}onBeforeDetach(e){this.node.removeEventListener("mousedown",this)}onActivateRequest(e){this._ensureFocus()}_ensureFocus(){this.editor.hasFocus()||this.editor.focus()}_onContextReady(){this.isDisposed||(this.editor.clearHistory(),this._ready.resolve(void 0))}_onPathChanged(){const e=this.editor,t=this._context.localPath;e.model.mimeType=this._mimeTypeService.getMimeTypeByFilePath(t)}}!function(e){e.defaultEditorConfig={lineNumbers:!0,scrollPastEnd:!0}}(w||(w={}));class x extends b.Yr{async setFragment(e){const t=e.split("=");if("#line"!==t[0])return;const n=t[1];let i;return i=n.includes(",")?n.split(",")[0]||"0":n,this.context.ready.then(()=>{const e={line:parseInt(i,10),column:0};this.content.editor.setCursorPosition(e),this.content.editor.revealPosition(e)})}}class k extends b.tR{constructor(e){super(e.factoryOptions),this._services=e.editorServices}createNewWidget(e){const t=this._services.factoryService.newDocumentEditor,n=new w({factory:e=>t(e),context:e,mimeTypeService:this._services.mimeTypeService});return n.title.icon=_.mL,new x({content:n,context:e})}}var E=n(62939),S=n(85181),T=n(88037),M=n(9387);function I(e){const t=(e.translator||S.wK).load("jupyterlab"),n="number"==typeof e.tabSpace?t.__("Spaces"):t.__("Tab Indent");return M.createElement(E.pC,{role:"button","aria-haspopup":!0,tabIndex:0,onClick:e.handleClick,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||e.handleClick()},source:"number"==typeof e.tabSpace?`${n}: ${e.tabSpace}`:n,title:t.__("Change the indentation…")})}class W extends T.QX{constructor(e){super(new W.Model),this._popup=null,this._menu=e.menu,this.translator=e.translator||S.wK,this.addClass("jp-mod-highlighted")}render(){var e;if(null===(e=this.model)||void 0===e?void 0:e.indentUnit){const e="Tab"===this.model.indentUnit?null:parseInt(this.model.indentUnit,10);return M.createElement(I,{tabSpace:e,handleClick:()=>this._handleClick(),translator:this.translator})}return null}_handleClick(){const e=this._menu;this._popup&&this._popup.dispose(),e.aboutToClose.connect(this._menuClosed,this),this._popup=(0,E.yp)({body:e,anchor:this,align:"right"}),e.update()}_menuClosed(){this.removeClass("jp-mod-clicked")}}!function(e){class t extends T.AF{get indentUnit(){return this._indentUnit}set indentUnit(e){e!==this._indentUnit&&(this._indentUnit=e,this.stateChanged.emit())}}e.Model=t}(W||(W={}));var N=n(62863);class B extends c.Fo{constructor(e){super(),this.widget=e,this._searchActive=!1}get isReadOnly(){return this.editor.getOption("readOnly")}get replaceOptionsSupport(){return{preserveCase:!0}}get editor(){return this.widget.content.editor}get model(){return this.widget.content.model}async startQuery(e,t){this._searchActive=!0,await super.startQuery(e,t),await this.highlightNext(!0,{from:"selection-start",scroll:!1,select:!1})}async endQuery(){this._searchActive=!1,await super.endQuery()}async onSharedModelChanged(e,t){if(this._searchActive)return super.onSharedModelChanged(e,t)}static createNew(e,t){return new B(e)}static isApplicable(e){return e instanceof N.p&&e.content instanceof w&&e.content.editor instanceof c.ge}getInitialQuery(){const e=this.editor;return e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to)}}var P=n(83656),A=n(87614),L=n(17863);class j extends L.K{createNew(e,t){const n=super.createNew(e,t),i=(t,n)=>{n&&e.content.editor.setCursorPosition({line:n.line,column:0})};return n.activeHeadingChanged.connect(i),e.disposed.connect(()=>{n.activeHeadingChanged.disconnect(i)}),n}}const F={part:1,chapter:1,section:1,subsection:2,subsubsection:3,paragraph:4,subparagraph:5},R=/^\s*\\(section|subsection|subsubsection){(.+)}/;class z extends P.T{get documentType(){return"latex"}get supportedOptions(){return["maximalDepth","numberHeaders"]}getHeadings(){if(!this.isActive)return Promise.resolve(null);const e=this.widget.content.model.sharedModel.getSource().split("\n"),t=new Array;let n=t.length;const i=new Array;for(let o=0;o<e.length;o++){const r=e[o].match(R);if(r){const e=F[r[1]];if(e<=this.configuration.maximalDepth){const a=A.$Y(e,n,t,{...this.configuration,baseNumbering:1,numberingH1:!0});n=e,i.push({text:r[2],prefix:a,level:e,line:o})}}}return Promise.resolve(i)}}class O extends j{isApplicable(e){var t,n;if(super.isApplicable(e)){let i=null===(n=null===(t=e.content)||void 0===t?void 0:t.model)||void 0===n?void 0:n.mimeType;return i&&("text/x-latex"===i||"text/x-stex"===i)}return!1}_createNew(e,t){return new z(e,t)}}var $=n(30102);class D extends P.T{get documentType(){return"markdown"}getHeadings(){if(!this.isActive)return Promise.resolve(null);const e=this.widget.content.model.sharedModel.getSource(),t=A.uQ($.cf(e),{...this.configuration,numberHeaders:!1});return Promise.resolve(t)}}class U extends j{isApplicable(e){var t,n;if(super.isApplicable(e)){let i=null===(n=null===(t=e.content)||void 0===t?void 0:t.model)||void 0===n?void 0:n.mimeType;return i&&$.sl(i)}return!1}_createNew(e,t){return new D(e,t)}}let H;try{H=new RegExp("^\\s*(class |def |async def |from |import )","d")}catch(e){H=new RegExp("^\\s*(class |def |async def |from |import )")}class K extends P.T{get documentType(){return"python"}async getHeadings(){if(!this.isActive)return Promise.resolve(null);const e=this.widget.content.model.sharedModel.getSource().split("\n");let t=new Array,i=!1,o=1,r=-1;for(const a of e){let e;if(r++,H.flags.includes("d"))e=H.exec(a);else{const{default:t}=await n.e(57417).then(n.t.bind(n,57417,23));e=t(H,a)}if(e){const[n]=e.indices[1];1===o&&n>0&&(o=n);const s=["from ","import "].includes(e[1]);if(s&&i)continue;i=s;const d=1+n/o;if(d>this.configuration.maximalDepth)continue;t.push({text:a.slice(n),level:d,line:r})}}return Promise.resolve(t)}}class V extends j{isApplicable(e){var t,n;if(super.isApplicable(e)){let i=null===(n=null===(t=e.content)||void 0===t?void 0:t.model)||void 0===n?void 0:n.mimeType;return i&&("application/x-python-code"===i||"text/x-python"===i)}return!1}_createNew(e,t){return new K(e,t)}}var q=n(85913),Q=n(12246),G=n(12562);class X extends Q.x{constructor(e,t){const{docRegistry:n,...i}=t;super(e,i),this._readyDelegate=new p.PromiseDelegate,this.editor=e.content,this._docRegistry=n,this._virtualEditor=Object.freeze({getEditor:()=>this.editor.editor,ready:()=>Promise.resolve(this.editor.editor),reveal:()=>Promise.resolve(this.editor.editor)}),Promise.all([this.editor.context.ready,this.connectionManager.ready]).then(async()=>{await this.initOnceReady(),this._readyDelegate.resolve(),this._editorAdded.emit({editor:this._virtualEditor})}).catch(console.error)}get ready(){return this._readyDelegate.promise}get documentPath(){return this.widget.context.path}get mimeType(){var e;const t=this.editor.model.mimeType,n=Array.isArray(t)?null!==(e=t[0])&&void 0!==e?e:q.U.defaultMimeType:t,i=this.editor.context.contentsModel;return n!=q.U.defaultMimeType?n:i?this._docRegistry.getFileTypeForModel(i).mimeTypes[0]:n}get languageFileExtension(){let e=this.documentPath.split(".");return e[e.length-1]}get ceEditor(){return this.editor.editor}get activeEditor(){return this._virtualEditor}get wrapperElement(){return this.widget.node}get path(){return this.widget.context.path}get editors(){var e,t;return[{ceEditor:this._virtualEditor,type:"code",value:null!==(t=null===(e=this.editor)||void 0===e?void 0:e.model.sharedModel.getSource())&&void 0!==t?t:""}]}dispose(){this.isDisposed||(this._editorRemoved.emit({editor:this._virtualEditor}),this.editor.model.mimeTypeChanged.disconnect(this.reloadConnection),super.dispose())}createVirtualDocument(){return new G.v7({language:this.language,foreignCodeExtractors:this.options.foreignCodeExtractorsManager,path:this.documentPath,fileExtension:this.languageFileExtension,standalone:!0,hasLspSupportedFile:!0})}getEditorIndexAt(e){return 0}getEditorIndex(e){return 0}getEditorWrapper(e){return this.wrapperElement}async initOnceReady(){this.initVirtual(),await this.connectDocument(this.virtualDocument,!1),this.editor.model.mimeTypeChanged.connect(this.reloadConnection,this)}}var Z=n(97371),J=n(87196),Y=n(7053),ee=n(69584),te=n(98687),ne=n(61110),ie=n(53119),oe=n(38921),re=n(29299),ae=n(34369),se=n(30331),de=n(3708);class le extends C.x0{constructor(e){var t;super(),this.model=e.model;const n=new y.k({factory:e.factory,model:this.model,editorOptions:{...e.editorOptions,config:{...null===(t=e.editorOptions)||void 0===t?void 0:t.config,readOnly:!0}}});this.editor=n.editor,(this.layout=new C.gZ).addWidget(n)}static createCodeViewer(e){const{content:t,mimeType:n,...i}=e,o=new de.B.Model({mimeType:n});o.sharedModel.setSource(t);const r=new le({...i,model:o});return r.disposed.connect(()=>{o.dispose()}),r}get content(){return this.model.sharedModel.getSource()}get mimeType(){return this.model.mimeType}}var ce=n(63711),ue=n(72879),me=n(79246);const he="notebook:toggle-autoclosing-brackets",ge="console:toggle-autoclosing-brackets";var pe;!function(e){e.createNew="fileeditor:create-new",e.createNewMarkdown="fileeditor:create-new-markdown-file",e.changeFontSize="fileeditor:change-font-size",e.lineNumbers="fileeditor:toggle-line-numbers",e.currentLineNumbers="fileeditor:toggle-current-line-numbers",e.lineWrap="fileeditor:toggle-line-wrap",e.currentLineWrap="fileeditor:toggle-current-line-wrap",e.changeTabs="fileeditor:change-tabs",e.matchBrackets="fileeditor:toggle-match-brackets",e.currentMatchBrackets="fileeditor:toggle-current-match-brackets",e.autoClosingBrackets="fileeditor:toggle-autoclosing-brackets",e.autoClosingBracketsUniversal="fileeditor:toggle-autoclosing-brackets-universal",e.createConsole="fileeditor:create-console",e.replaceSelection="fileeditor:replace-selection",e.restartConsole="fileeditor:restart-console",e.runCode="fileeditor:run-code",e.runAllCode="fileeditor:run-all",e.markdownPreview="fileeditor:markdown-preview",e.undo="fileeditor:undo",e.redo="fileeditor:redo",e.cut="fileeditor:cut",e.copy="fileeditor:copy",e.paste="fileeditor:paste",e.selectAll="fileeditor:select-all",e.invokeCompleter="completer:invoke-file",e.selectCompleter="completer:select-file",e.openCodeViewer="code-viewer:open",e.changeTheme="fileeditor:change-theme",e.changeLanguage="fileeditor:change-language",e.find="fileeditor:find",e.goToLine="fileeditor:go-to-line"}(pe||(pe={}));const fe="Editor";var ve;!function(e){let t={},n=!0;function i(e){e.editor.setOptions({...t,scrollPastEnd:n})}function o(e){const t=e.getSelection(),{start:n,end:i}=t;return n.column!==i.column||n.line!==i.line}function r(e){const t=e.getSelection(),n=e.getOffsetAt(t.start),i=e.getOffsetAt(t.end);return e.model.sharedModel.getSource().substring(n,i)}async function a(e,t,n="txt"){const i=await e.execute("docmanager:new-untitled",{path:t,type:"file",ext:n});if(null!=i){const t=await e.execute("docmanager:open",{path:i.path,factory:fe});return t.isUntitled=!0,t}}function s(e,t){e.add({command:pe.createNew,category:t.__("Other"),rank:1})}function d(e,t){e.add({command:pe.createNewMarkdown,category:t.__("Other"),rank:2})}function l(e,t){const n=t.__("Text Editor"),i=pe.changeTabs;e.addItem({command:i,args:{size:4},category:n});for(const t of[1,2,4,8]){const o={size:t};e.addItem({command:i,args:o,category:n})}}function c(e,t){const n=t.__("Text Editor");e.addItem({command:pe.createNew,args:{isPalette:!0},category:n})}function u(e,t){const n=t.__("Text Editor");e.addItem({command:pe.createNewMarkdown,args:{isPalette:!0},category:n})}function m(e,t){const n=t.__("Text Editor"),i=pe.changeFontSize;let o={delta:1};e.addItem({command:i,args:o,category:n}),o={delta:-1},e.addItem({command:i,args:o,category:n})}function h(e,t,n){const i=e=>n()&&e.context&&!!t.find(t=>{var n;return(null===(n=t.sessionContext.session)||void 0===n?void 0:n.path)===e.context.path});e.runMenu.codeRunners.restart.add({id:pe.restartConsole,isEnabled:i}),e.runMenu.codeRunners.run.add({id:pe.runCode,isEnabled:i}),e.runMenu.codeRunners.runAll.add({id:pe.runAllCode,isEnabled:i})}e.updateSettings=function(e,i){var o;t=null!==(o=e.get("editorConfig").composite)&&void 0!==o?o:{},n=e.get("scrollPasteEnd").composite,i.notifyCommandChanged(pe.lineNumbers),i.notifyCommandChanged(pe.currentLineNumbers),i.notifyCommandChanged(pe.lineWrap),i.notifyCommandChanged(pe.currentLineWrap),i.notifyCommandChanged(pe.changeTabs),i.notifyCommandChanged(pe.matchBrackets),i.notifyCommandChanged(pe.currentMatchBrackets),i.notifyCommandChanged(pe.autoClosingBrackets),i.notifyCommandChanged(pe.changeLanguage)},e.updateTracker=function(e){e.forEach(e=>{i(e.content)})},e.updateWidget=i,e.addCommands=function(e,n,i,s,d,l,c,u,m,h,g,p){var f;e.addCommand(pe.changeFontSize,{execute:e=>{var i;const o=Number(e.delta);if(Number.isNaN(o))return void console.error(`${pe.changeFontSize}: delta arg must be a number`);const r=window.getComputedStyle(document.documentElement),a=parseInt(r.getPropertyValue("--jp-code-font-size"),10);t.customStyles||(t.customStyles={});const d=(null!==(i=t.customStyles.fontSize)&&void 0!==i?i:u.baseConfiguration.customStyles.fontSize)||a;return t.customStyles.fontSize=d+o,n.set(s,"editorConfig",t).catch(e=>{console.error(`Failed to set ${s}: ${e.message}`)})},label:e=>{const t=Number(e.delta);return Number.isNaN(t)&&console.error(`${pe.changeFontSize}: delta arg must be a number`),t>0?e.isMenu?i.__("Increase Text Editor Font Size"):i.__("Increase Font Size"):e.isMenu?i.__("Decrease Text Editor Font Size"):i.__("Decrease Font Size")}}),e.addCommand(pe.lineNumbers,{execute:async()=>{var e;t.lineNumbers=!(null!==(e=t.lineNumbers)&&void 0!==e?e:u.baseConfiguration.lineNumbers);try{return await n.set(s,"editorConfig",t)}catch(e){console.error(`Failed to set ${s}: ${e.message}`)}},isEnabled:d,isToggled:()=>{var e;return null!==(e=t.lineNumbers)&&void 0!==e?e:u.baseConfiguration.lineNumbers},label:i.__("Show Line Numbers")}),e.addCommand(pe.currentLineNumbers,{label:i.__("Show Line Numbers"),caption:i.__("Show the line numbers for the current file."),execute:()=>{const e=l.currentWidget;if(!e)return;const t=!e.content.editor.getOption("lineNumbers");e.content.editor.setOption("lineNumbers",t)},isEnabled:d,isToggled:()=>{var e;const t=l.currentWidget;return null!==(e=null==t?void 0:t.content.editor.getOption("lineNumbers"))&&void 0!==e&&e}}),e.addCommand(pe.lineWrap,{execute:async e=>{var i;t.lineWrap=null!==(i=e.mode)&&void 0!==i&&i;try{return await n.set(s,"editorConfig",t)}catch(e){console.error(`Failed to set ${s}: ${e.message}`)}},isEnabled:d,isToggled:e=>{var n,i;return(null!==(n=e.mode)&&void 0!==n&&n)===(null!==(i=t.lineWrap)&&void 0!==i?i:u.baseConfiguration.lineWrap)},label:i.__("Word Wrap")}),e.addCommand(pe.currentLineWrap,{label:i.__("Wrap Words"),caption:i.__("Wrap words for the current file."),execute:()=>{const e=l.currentWidget;if(!e)return;const t=e.content.editor.getOption("lineWrap");e.content.editor.setOption("lineWrap",!t)},isEnabled:d,isToggled:()=>{var e;const t=l.currentWidget;return null!==(e=null==t?void 0:t.content.editor.getOption("lineWrap"))&&void 0!==e&&e}}),e.addCommand(pe.changeTabs,{label:e=>{var t;return e.size?i._p("v4","Spaces: %1",null!==(t=e.size)&&void 0!==t?t:""):i.__("Indent with Tab")},execute:async e=>{var i;t.indentUnit=void 0!==e.size?(null!==(i=e.size)&&void 0!==i?i:"4").toString():"Tab";try{return await n.set(s,"editorConfig",t)}catch(e){console.error(`Failed to set ${s}: ${e.message}`)}},isToggled:e=>{var n;const i=null!==(n=t.indentUnit)&&void 0!==n?n:u.baseConfiguration.indentUnit;return e.size?e.size===i:"Tab"==i}}),e.addCommand(pe.matchBrackets,{execute:async()=>{var e;t.matchBrackets=!(null!==(e=t.matchBrackets)&&void 0!==e?e:u.baseConfiguration.matchBrackets);try{return await n.set(s,"editorConfig",t)}catch(e){console.error(`Failed to set ${s}: ${e.message}`)}},label:i.__("Match Brackets"),isEnabled:d,isToggled:()=>{var e;return null!==(e=t.matchBrackets)&&void 0!==e?e:u.baseConfiguration.matchBrackets}}),e.addCommand(pe.currentMatchBrackets,{label:i.__("Match Brackets"),caption:i.__("Change match brackets for the current file."),execute:()=>{const e=l.currentWidget;if(!e)return;const t=!e.content.editor.getOption("matchBrackets");e.content.editor.setOption("matchBrackets",t)},isEnabled:d,isToggled:()=>{var e;const t=l.currentWidget;return null!==(e=null==t?void 0:t.content.editor.getOption("matchBrackets"))&&void 0!==e&&e}}),e.addCommand(pe.autoClosingBrackets,{execute:async e=>{var i,o;t.autoClosingBrackets=!!(null!==(i=e.force)&&void 0!==i?i:!(null!==(o=t.autoClosingBrackets)&&void 0!==o?o:u.baseConfiguration.autoClosingBrackets));try{return await n.set(s,"editorConfig",t)}catch(e){console.error(`Failed to set ${s}: ${e.message}`)}},label:i.__("Auto Close Brackets in Text Editor"),isToggled:()=>{var e;return null!==(e=t.autoClosingBrackets)&&void 0!==e?e:u.baseConfiguration.autoClosingBrackets}}),e.addCommand(pe.autoClosingBracketsUniversal,{execute:()=>{e.isToggled(pe.autoClosingBrackets)||e.isToggled(he)||e.isToggled(ge)?(e.execute(pe.autoClosingBrackets,{force:!1}),e.execute(he,{force:!1}),e.execute(ge,{force:!1})):(e.execute(pe.autoClosingBrackets,{force:!0}),e.execute(he,{force:!0}),e.execute(ge,{force:!0}))},label:i.__("Auto Close Brackets"),isToggled:()=>e.isToggled(pe.autoClosingBrackets)||e.isToggled(he)||e.isToggled(ge)}),e.addCommand(pe.changeTheme,{label:e=>{var n,o,r,a;return null!==(a=null!==(r=null!==(o=null!==(n=e.displayName)&&void 0!==n?n:e.theme)&&void 0!==o?o:t.theme)&&void 0!==r?r:u.baseConfiguration.theme)&&void 0!==a?a:i.__("Editor Theme")},execute:async e=>{var i;t.theme=null!==(i=e.theme)&&void 0!==i?i:t.theme;try{return await n.set(s,"editorConfig",t)}catch(e){console.error(`Failed to set theme - ${e.message}`)}},isToggled:e=>{var n;return e.theme===(null!==(n=t.theme)&&void 0!==n?n:u.baseConfiguration.theme)}}),e.addCommand(pe.find,{label:i.__("Find…"),execute:()=>{const e=l.currentWidget;e&&e.content.editor.execCommand(ae.Hg)},isEnabled:d}),e.addCommand(pe.goToLine,{label:i.__("Go to Line…"),execute:e=>{const t=l.currentWidget;if(!t)return;const n=t.content.editor,i=e.line,o=e.column;void 0!==i||void 0!==o?n.setCursorPosition({line:(null!=i?i:1)-1,column:(null!=o?o:1)-1}):n.execCommand(ae.cB)},isEnabled:d}),e.addCommand(pe.changeLanguage,{label:e=>{var t,n;return null!==(n=null!==(t=e.displayName)&&void 0!==t?t:e.name)&&void 0!==n?n:i.__("Change editor language.")},execute:e=>{var t;const n=e.name,i=l.currentWidget;if(n&&i){const e=m.findByName(n);e&&(Array.isArray(e.mime)?i.content.model.mimeType=null!==(t=e.mime[0])&&void 0!==t?t:q.U.defaultMimeType:i.content.model.mimeType=e.mime)}},isEnabled:d,isToggled:e=>{const t=l.currentWidget;if(!t)return!1;const n=t.content.model.mimeType,i=m.findByMIME(n),o=i&&i.name;return e.name===o}}),e.addCommand(pe.replaceSelection,{execute:e=>{var t,n;const i=e.text||"",o=l.currentWidget;o&&(null===(n=(t=o.content.editor).replaceSelection)||void 0===n||n.call(t,i))},isEnabled:d,label:i.__("Replace Selection in Editor")}),e.addCommand(pe.createConsole,{execute:t=>{const n=l.currentWidget;if(n)return function(e,t){return async function(n,i){var o,r,a;const s=i||{},d=await e.execute("console:create",{activate:s.activate,name:null===(o=n.context.contentsModel)||void 0===o?void 0:o.name,path:n.context.path,preferredLanguage:n.context.model.defaultKernelLanguage||(null!==(a=null===(r=t.findByFileName(n.context.path))||void 0===r?void 0:r.name)&&void 0!==a?a:""),ref:n.id,insertMode:"split-bottom"});n.context.pathChanged.connect((e,t)=>{var i;d.session.setPath(t),d.session.setName(null===(i=n.context.contentsModel)||void 0===i?void 0:i.name)})}}(e,m)(n,t)},isEnabled:d,icon:_.zk,label:i.__("Create Console for Editor")}),e.addCommand(pe.restartConsole,{execute:async()=>{var e;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;if(!t||null===h)return;const n=h.find(e=>{var n;return(null===(n=e.sessionContext.session)||void 0===n?void 0:n.path)===t.context.path});return n?g.restart(n.sessionContext):void 0},label:i.__("Restart Kernel"),isEnabled:()=>null!==h&&d()}),e.addCommand(pe.runCode,{execute:()=>{var t,n;const i=null===(t=l.currentWidget)||void 0===t?void 0:t.content;if(!i)return;let o="";const r=i.editor,a=i.context.path,s=ce.PathExt.extname(a),d=r.getSelection(),{start:c,end:u}=d;let m=c.column!==u.column||c.line!==u.line;if(m){const e=r.getOffsetAt(d.start),t=r.getOffsetAt(d.end);o=r.model.sharedModel.getSource().substring(e,t)}else if(ce.MarkdownCodeBlocks.isMarkdown(s)){const e=r.model.sharedModel.getSource(),t=ce.MarkdownCodeBlocks.findMarkdownCodeBlocks(e);for(const e of t)if(e.startLine<=c.line&&c.line<=e.endLine){o=e.code,m=!0;break}}if(!m){o=r.getLine(d.start.line);const e=r.getCursorPosition(),t=r.getLine(e.line+1);if(e.line+1===r.lineCount){const e=r.model.sharedModel.getSource();r.model.sharedModel.setSource(e+"\n")}r.setCursorPosition({line:e.line+1,column:null!==(n=null==t?void 0:t.length)&&void 0!==n?n:0})}return o?e.execute("console:inject",{activate:!1,code:o,path:a}):Promise.resolve(void 0)},isEnabled:d,label:i.__("Run Selected Code")}),e.addCommand(pe.runAllCode,{execute:()=>{var t;const n=null===(t=l.currentWidget)||void 0===t?void 0:t.content;if(!n)return;let i="";const o=n.editor.model.sharedModel.getSource(),r=n.context.path,a=ce.PathExt.extname(r);if(ce.MarkdownCodeBlocks.isMarkdown(a)){const e=ce.MarkdownCodeBlocks.findMarkdownCodeBlocks(o);for(const t of e)i+=t.code}else i=o;return i?e.execute("console:inject",{activate:!1,code:i,path:r}):Promise.resolve(void 0)},isEnabled:d,label:i.__("Run All Code")}),e.addCommand(pe.markdownPreview,{execute:()=>{const t=l.currentWidget;if(!t)return;const n=t.context.path;return e.execute("markdownviewer:open",{path:n,options:{mode:"split-right"}})},isVisible:()=>{const e=l.currentWidget;return e&&".md"===ce.PathExt.extname(e.context.path)||!1},icon:_.do,label:i.__("Show Markdown Preview")}),e.addCommand(pe.createNew,{label:e=>{var t,n;return e.isPalette?null!==(t=e.paletteLabel)&&void 0!==t?t:i.__("New Text File"):null!==(n=e.launcherLabel)&&void 0!==n?n:i.__("Text File")},caption:e=>{var t;return null!==(t=e.caption)&&void 0!==t?t:i.__("Create a new text file")},icon:e=>{var t;return e.isPalette?void 0:ue.Tl.resolve({icon:null!==(t=e.iconName)&&void 0!==t?t:_.mL})},execute:t=>{var n;const i=t.cwd||c.model.path;return a(e,i,null!==(n=t.fileExt)&&void 0!==n?n:"txt")}}),e.addCommand(pe.createNewMarkdown,{label:e=>e.isPalette?i.__("New Markdown File"):i.__("Markdown File"),caption:i.__("Create a new markdown file"),icon:e=>e.isPalette?void 0:_.do,execute:t=>{const n=t.cwd||c.model.path;return a(e,n,"md")}}),e.addCommand(pe.undo,{execute:()=>{var e;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;t&&t.editor.undo()},isEnabled:()=>{var e;if(!d())return!1;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;return!!t&&t.editor.model.sharedModel.canUndo()},icon:_._X.bindprops({stylesheet:"menuItem"}),label:i.__("Undo")}),e.addCommand(pe.redo,{execute:()=>{var e;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;t&&t.editor.redo()},isEnabled:()=>{var e;if(!d())return!1;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;return!!t&&t.editor.model.sharedModel.canRedo()},icon:_.Yp.bindprops({stylesheet:"menuItem"}),label:i.__("Redo")}),e.addCommand(pe.cut,{execute:()=>{var e;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;if(!t)return;const n=t.editor,i=r(n);se.B.copyToSystem(i),n.replaceSelection&&n.replaceSelection("")},isEnabled:()=>{var e;if(!d())return!1;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;return!!t&&o(t.editor)},icon:_.OL.bindprops({stylesheet:"menuItem"}),label:i.__("Cut")}),e.addCommand(pe.copy,{execute:()=>{var e;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;if(!t)return;const n=r(t.editor);se.B.copyToSystem(n)},isEnabled:()=>{var e;if(!d())return!1;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;return!!t&&o(t.editor)},icon:_.nJ.bindprops({stylesheet:"menuItem"}),label:i.__("Copy")}),e.addCommand(pe.paste,{execute:async()=>{var e;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;if(!t)return;const n=t.editor,i=window.navigator.clipboard,o=await i.readText();o&&n.replaceSelection&&n.replaceSelection(o)},isEnabled:()=>{var e;return Boolean(d()&&(null===(e=l.currentWidget)||void 0===e?void 0:e.content))},icon:_.X3.bindprops({stylesheet:"menuItem"}),label:i.__("Paste")}),e.addCommand(pe.selectAll,{execute:()=>{var e;const t=null===(e=l.currentWidget)||void 0===e?void 0:e.content;t&&t.editor.execCommand(re.Ub)},isEnabled:()=>{var e;return Boolean(d()&&(null===(e=l.currentWidget)||void 0===e?void 0:e.content))},label:i.__("Select All")});const v=[pe.lineNumbers,pe.currentLineNumbers,pe.lineWrap,pe.currentLineWrap,pe.matchBrackets,pe.currentMatchBrackets,pe.find,pe.goToLine,pe.changeLanguage,pe.replaceSelection,pe.createConsole,pe.restartConsole,pe.runCode,pe.runAllCode,pe.undo,pe.redo,pe.cut,pe.copy,pe.paste,pe.selectAll,pe.createConsole],y=()=>{v.forEach(t=>e.notifyCommandChanged(t))};l.currentChanged.connect(y),null===(f=p.currentChanged)||void 0===f||f.connect(y)},e.addCompleterCommands=function(e,t,n,i){const o=(null!=i?i:S.wK).load("jupyterlab");e.addCommand(pe.invokeCompleter,{label:o.__("Display the completion helper."),execute:()=>{const e=t.currentWidget&&t.currentWidget.id;if(e)return n.invoke(e)}}),e.addCommand(pe.selectCompleter,{label:o.__("Select the completion suggestion."),execute:()=>{const e=t.currentWidget&&t.currentWidget.id;if(e)return n.select(e)}}),e.addKeyBinding({command:pe.selectCompleter,keys:["Enter"],selector:".jp-FileEditor .jp-mod-completer-active"})},e.addLauncherItems=function(e,t){s(e,t),d(e,t)},e.addCreateNewToLauncher=s,e.addCreateNewMarkdownToLauncher=d,e.addKernelLanguageLauncherItems=function(e,t,n){const i=new me.DisposableSet;for(const o of n)i.add(e.add({command:pe.createNew,category:t.__("Other"),rank:3,args:o}));return i},e.addPaletteItems=function(e,t){l(e,t),c(e,t),u(e,t),m(e,t)},e.addChangeTabsCommandsToPalette=l,e.addCreateNewCommandToPalette=c,e.addCreateNewMarkdownCommandToPalette=u,e.addChangeFontSizeCommandsToPalette=m,e.addKernelLanguagePaletteItems=function(e,t,n){const i=new me.DisposableSet,o=t.__("Text Editor");for(const t of n)i.add(e.addItem({command:pe.createNew,args:{...t,isPalette:!0},category:o}));return i},e.addMenuItems=function(e,t,n,i){e.editMenu.undoers.redo.add({id:pe.redo,isEnabled:i}),e.editMenu.undoers.undo.add({id:pe.undo,isEnabled:i}),e.viewMenu.editorViewers.toggleLineNumbers.add({id:pe.currentLineNumbers,isEnabled:i}),e.viewMenu.editorViewers.toggleMatchBrackets.add({id:pe.currentMatchBrackets,isEnabled:i}),e.viewMenu.editorViewers.toggleWordWrap.add({id:pe.currentLineWrap,isEnabled:i}),e.fileMenu.consoleCreators.add({id:pe.createConsole,isEnabled:i}),n&&h(e,n,i)},e.addKernelLanguageMenuItems=function(e,t){const n=new me.DisposableSet;for(const i of t)n.add(e.fileMenu.newMenu.addItem({command:pe.createNew,args:i,rank:31}));return n},e.addCodeRunnersToRunMenu=h,e.addOpenCodeViewerCommand=function(e,t,n,i){e.commands.addCommand(pe.openCodeViewer,{label:i.__("Open Code Viewer"),execute:o=>(async o=>{var r;const a=t.factoryService.newDocumentEditor;let s=o.mimeType;!s&&o.extension&&(s=t.mimeTypeService.getMimeTypeByFilePath(`temp.${o.extension.replace(/\\.$/,"")}`));const d=le.createCodeViewer({factory:e=>a(e),content:o.content,mimeType:s});d.title.label=o.label||i.__("Code Viewer"),d.title.caption=d.title.label;const l=(0,oe.find)(e.docRegistry.fileTypes(),e=>!!s&&e.mimeTypes.includes(s));d.title.icon=null!==(r=null==l?void 0:l.icon)&&void 0!==r?r:_.mL,o.widgetId&&(d.id=o.widgetId);const c=new N.p({content:d});return await n.add(c),e.shell.add(c,"main"),d})(o)})}}(ve||(ve={}));var ye=n(68122);function be(e){return M.createElement(E.pC,{role:"button","aria-haspopup":!0,tabIndex:0,source:e.language,onClick:e.handleClick,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||e.handleClick()}})}class _e extends T.QX{constructor(e){var t;super(new _e.Model(e.languages)),this._handleClick=()=>{const e=new C.W1({commands:this._commands});this._popup&&this._popup.dispose(),this.model.languages.getLanguages().sort((e,t)=>{var n,i;const o=null!==(n=e.displayName)&&void 0!==n?n:e.name,r=null!==(i=t.displayName)&&void 0!==i?i:t.name;return o.localeCompare(r)}).forEach(t=>{var n;if(0===t.name.toLowerCase().indexOf("brainf"))return;const i={name:t.name,displayName:null!==(n=t.displayName)&&void 0!==n?n:t.name};e.addItem({command:"fileeditor:change-language",args:i})}),this._popup=(0,E.yp)({body:e,anchor:this,align:"left"})},this._popup=null,this._commands=e.commands,this.translator=null!==(t=e.translator)&&void 0!==t?t:S.wK;const n=this.translator.load("jupyterlab");this.addClass("jp-mod-highlighted"),this.title.caption=n.__("Change text editor syntax highlighting")}render(){return this.model?M.createElement(be,{language:this.model.language,handleClick:this._handleClick}):null}}!function(e){class t extends T.AF{constructor(e){super(),this.languages=e,this._onMIMETypeChange=(e,t)=>{var n;const i=this._language,o=this.languages.findByMIME(t.newValue);this._language=null!==(n=null==o?void 0:o.name)&&void 0!==n?n:q.U.defaultMimeType,this._triggerChange(i,this._language)},this._language="",this._editor=null}get language(){return this._language}get editor(){return this._editor}set editor(e){var t;const n=this._editor;null!==n&&n.model.mimeTypeChanged.disconnect(this._onMIMETypeChange);const i=this._language;if(this._editor=e,null===this._editor)this._language="";else{const e=this.languages.findByMIME(this._editor.model.mimeType);this._language=null!==(t=null==e?void 0:e.name)&&void 0!==t?t:q.U.defaultMimeType,this._editor.model.mimeTypeChanged.connect(this._onMIMETypeChange)}this._triggerChange(i,this._language)}_triggerChange(e,t){e!==t&&this.stateChanged.emit(void 0)}}e.Model=t}(_e||(_e={}));const Ce={id:"@jupyterlab/fileeditor-extension:editor-syntax-status",description:"Adds a file editor syntax status widget.",autoStart:!0,requires:[f,c.SW,ye.V,S.sQ],optional:[E.$O],activate:(e,t,n,i,o,r)=>{if(!r)return;const a=new _e({commands:e.commands,languages:n,translator:o});i.currentChanged.connect(()=>{const e=i.currentWidget;e&&t.has(e)&&a.model&&(a.model.editor=e.content.editor)}),r.registerStatusItem(Ce.id,{item:a,align:"left",rank:0,isActive:()=>!!i.currentWidget&&!!t.currentWidget&&i.currentWidget===t.currentWidget})}},we={activate:function(e,t,n,i,o,r,d,l,c,u,m,h,g,p,f,v,y){const b=we.id,_=null!=v?v:S.wK,C=null!=p?p:new a.V({translator:_}),w=_.load("jupyterlab"),{commands:x,restored:k,shell:E}=e,T=new s.H({namespace:"editor"}),M=()=>null!==T.currentWidget&&T.currentWidget===E.currentWidget,I=new Map([["python",[{fileExt:"py",iconName:"ui-components:python",launcherLabel:w.__("Python File"),paletteLabel:w.__("New Python File"),caption:w.__("Create a new Python file")}]],["julia",[{fileExt:"jl",iconName:"ui-components:julia",launcherLabel:w.__("Julia File"),paletteLabel:w.__("New Julia File"),caption:w.__("Create a new Julia file")}]],["R",[{fileExt:"r",iconName:"ui-components:r-kernel",launcherLabel:w.__("R File"),paletteLabel:w.__("New R File"),caption:w.__("Create a new R file")}]]]),W=async()=>{var t,n;const i=e.serviceManager.kernelspecs;await i.ready;let o=new Set;const r=null!==(n=null===(t=i.specs)||void 0===t?void 0:t.kernelspecs)&&void 0!==n?n:{};return Object.keys(r).forEach(e=>{const t=r[e];if(t){const e=I.get(t.language);null==e||e.forEach(e=>o.add(e))}}),o};let N=null,B=null,P=null;const A=e=>{N&&(N.dispose(),N=null),B&&(B.dispose(),B=null),P&&(P.dispose(),P=null),m&&(N=ve.addKernelLanguageLauncherItems(m,w,e)),u&&(B=ve.addKernelLanguagePaletteItems(u,w,e)),h&&(P=ve.addKernelLanguageMenuItems(h,e))};if(e.serviceManager.kernelspecs.specsChanged.connect(async()=>{try{const e=await W();A(e)}catch(e){console.error("Error updating kernel file types:",e)}}),g&&g.restore(T,{command:"docmanager:open",args:e=>({path:e.context.path,factory:fe}),name:e=>e.context.path}),Promise.all([l.load(b),k]).then(([e])=>{var t,n,i;if(h){const e=null===(t=h.viewMenu.items.find(e=>{var t;return"submenu"===e.type&&"jp-mainmenu-view-codemirror-language"===(null===(t=e.submenu)||void 0===t?void 0:t.id)}))||void 0===t?void 0:t.submenu;e&&o.getLanguages().sort((e,t)=>{const n=e.name,i=t.name;return n.localeCompare(i)}).forEach(t=>{0!==t.name.toLowerCase().indexOf("brainf")&&e.addItem({command:pe.changeLanguage,args:{...t}})});const a=null===(n=h.settingsMenu.items.find(e=>{var t;return"submenu"===e.type&&"jp-mainmenu-settings-codemirror-theme"===(null===(t=e.submenu)||void 0===t?void 0:t.id)}))||void 0===n?void 0:n.submenu;if(a)for(const e of r.themes)a.addItem({command:pe.changeTheme,args:{theme:e.name,displayName:null!==(i=e.displayName)&&void 0!==i?i:e.name}});h.editMenu.goToLiners.add({id:pe.goToLine,isEnabled:e=>null!==T.currentWidget&&T.has(e)})}ve.updateSettings(e,x),ve.updateTracker(T),e.changed.connect(()=>{ve.updateSettings(e,x),ve.updateTracker(T)})}).catch(e=>{console.error(e.message),ve.updateTracker(T)}),y){const e=y.getRenderer("@jupyterlab/codemirror-extension:plugin.defaultConfig");e&&y.addRenderer("@jupyterlab/fileeditor-extension:plugin.editorConfig",e)}t.widgetCreated.connect((e,t)=>{t.context.pathChanged.connect(()=>{T.save(t)}),T.add(t),ve.updateWidget(t.content)}),T.widgetAdded.connect((e,t)=>{ve.updateWidget(t.content)}),ve.addCommands(e.commands,l,w,b,M,T,d,i,o,c,C,e.shell);const L=new s.H({namespace:"codeviewer"});return g&&g.restore(L,{command:pe.openCodeViewer,args:e=>({content:e.content.content,label:e.content.title.label,mimeType:e.content.mimeType,widgetId:e.content.id}),name:e=>e.content.id}),ve.addOpenCodeViewerCommand(e,n,L,w),m&&ve.addLauncherItems(m,w),u&&ve.addPaletteItems(u,w),h&&ve.addMenuItems(h,T,c,M),W().then(A).catch(e=>{console.error(e.message)}),f&&(f.add(new O(T)),f.add(new U(T)),f.add(new V(T))),T},id:"@jupyterlab/fileeditor-extension:plugin",description:"Provides the file editor widget tracker.",requires:[v,l.Fe,c.B,c.SW,c.hc,g.PP,ee.X],optional:[m.F,o.kn,Z.k,Y.I,i.E,o.i_,te.cv,S.sQ,ne.g],provides:f,autoStart:!0},xe={id:"@jupyterlab/fileeditor-extension:widget-factory",description:"Provides the factory for creating file editors.",autoStart:!0,requires:[l.Fe,ee.X],optional:[o.qe,S.sQ],provides:v,activate:(e,t,n,i,o)=>{const a=we.id,s=null!=o?o:S.wK,d=s.load("jupyterlab");let l;i&&(l=(0,r.g)(i,n,fe,a,s));const c=new k({editorServices:t,factoryOptions:{name:fe,label:d.__("Editor"),fileTypes:["markdown","*"],defaultFor:["markdown","*"],toolbarFactory:l,translator:s}});return e.docRegistry.addWidgetFactory(c),c}},ke={id:"@jupyterlab/fileeditor-extension:tab-space-status",description:"Adds a file editor indentation status widget.",autoStart:!0,requires:[f,c.B,ee.X,S.sQ],optional:[E.$O],activate:(e,t,n,i,o,r)=>{const a=o.load("jupyterlab");if(!r)return;const s=new ie.e({commands:e.commands}),d="fileeditor:change-tabs",{shell:l}=e,c={name:a.__("Indent with Tab")};s.addItem({command:d,args:c});for(const e of["1","2","4","8"]){const t={size:e,name:a._p("v4","Spaces: %1",e)};s.addItem({command:d,args:t})}const u=new W({menu:s,translator:o}),m=e=>{var t,i,o;u.model.indentUnit=null!==(o=null!==(i=null===(t=e.get("editorConfig").composite)||void 0===t?void 0:t.indentUnit)&&void 0!==i?i:n.baseConfiguration.indentUnit)&&void 0!==o?o:null};Promise.all([i.load("@jupyterlab/fileeditor-extension:plugin"),e.restored]).then(([e])=>{m(e),e.changed.connect(m)}),r.registerStatusItem("@jupyterlab/fileeditor-extension:tab-space-status",{item:u,align:"right",rank:1,isActive:()=>!!l.currentWidget&&t.has(l.currentWidget)})}},Ee={id:"@jupyterlab/fileeditor-extension:cursor-position",description:"Adds a file editor cursor position status widget.",activate:(e,t,n)=>{n.addEditorProvider(e=>Promise.resolve(e&&t.has(e)?e.content.editor:null))},requires:[f,l.UT],autoStart:!0},Se={id:"@jupyterlab/fileeditor-extension:completer",description:"Adds the completer capability to the file editor.",requires:[f],optional:[u.qx,S.sQ,o.zG],activate:function(e,t,n,i,o){if(!n)return;ve.addCompleterCommands(e.commands,t,n,i);const r=e.serviceManager.sessions,a=null!=o?o:new d.I,s=new Map,l=async(e,t)=>{const i={editor:t.content.editor,widget:t};await n.updateCompleter(i);const o=(e,i)=>{const o=s.get(t.id),d=(0,oe.find)(i,e=>e.path===t.context.path);if(d){if(o&&o.id===d.id)return;o&&(s.delete(t.id),o.dispose());const e=r.connectTo({model:d}),i={editor:t.content.editor,widget:t,session:e,sanitizer:a};n.updateCompleter(i).catch(console.error),s.set(t.id,e)}else o&&(s.delete(t.id),o.dispose())};o(0,Array.from(r.running())),r.runningChanged.connect(o),t.disposed.connect(()=>{r.runningChanged.disconnect(o);const e=s.get(t.id);e&&(s.delete(t.id),e.dispose())})};t.widgetAdded.connect(l),n.activeProvidersChanged.connect(()=>{t.forEach(e=>{l(0,e).catch(console.error)})})},autoStart:!0},Te={id:"@jupyterlab/fileeditor-extension:search",description:"Adds search capability to the file editor.",requires:[h.e],autoStart:!0,activate:(e,t)=>{t.add("jp-fileeditorSearchProvider",B)}},Me={id:"@jupyterlab/fileeditor-extension:language-server",description:"Adds Language Server capability to the file editor.",requires:[f,J.tK,J.cC,J.IG,J.qV],activate:function(e,t,n,i,o,r){t.widgetAdded.connect(async(t,a)=>{const s=new X(a,{connectionManager:n,featureManager:i,foreignCodeExtractorsManager:o,docRegistry:e.docRegistry});r.add(s)})},autoStart:!0},Ie=[xe,we,Ee,Se,Me,Te,Ce,ke]},60639:(e,t,n)=>{n.d(t,{e:()=>r});const i="jp-HoverBox",o="-1000";var r;!function(e){e.setGeometry=function(e){const{anchor:t,host:n,node:r,privilege:a,outOfViewDisplay:s}=e,d=n.getBoundingClientRect();r.classList.contains(i)||r.classList.add(i),r.style.visibility&&(r.style.visibility=""),""===r.style.zIndex&&(r.style.zIndex=""),r.style.maxHeight="",r.style.marginTop="";const l=e.style||window.getComputedStyle(r),c=t.top-d.top,u=d.bottom-t.bottom,m=parseInt(l.marginTop,10)||0,h=parseInt(l.marginLeft,10)||0,g=parseInt(l.minHeight,10)||e.minHeight;let p=parseInt(l.maxHeight,10)||e.maxHeight;const f="forceAbove"!==a&&("forceBelow"===a||("above"===a?c<p&&c<u:u>=p||u>=c));if(f?p=Math.min(u-m,p):(p=Math.min(c,p),r.style.marginTop="0px"),r.style.maxHeight=`${p}px`,!(p>=g&&(u>=g||c>=g)))return r.style.zIndex=o,void(r.style.visibility="hidden");e.size?(r.style.width=`${e.size.width}px`,r.style.height=`${e.size.height}px`,r.style.contain="strict"):(r.style.contain="",r.style.width="auto",r.style.height="");const v=e.size?e.size.height:r.getBoundingClientRect().height,y=e.offset&&e.offset.vertical&&e.offset.vertical.above||0,b=e.offset&&e.offset.vertical&&e.offset.vertical.below||0;let _=f?d.bottom-u+b:d.top+c-v+y;r.style.top=`${Math.floor(_)}px`;const C=e.offset&&e.offset.horizontal||0;let w=t.left+C;r.style.left=`${Math.ceil(w)}px`;let x=r.getBoundingClientRect(),k=x.right;k>window.innerWidth&&(w-=k-window.innerWidth,k=window.innerWidth,r.style.left=`${Math.ceil(w)}px`),w<C-h&&(w=C-h,r.style.left=`${Math.ceil(w)}px`),r.style.zIndex="-1000";const E=x.bottom,S=n.contains(document.elementFromPoint(w,_)),T=n.contains(document.elementFromPoint(k,_)),M=n.contains(document.elementFromPoint(k,E)),I=n.contains(document.elementFromPoint(w,E));r.style.zIndex="";const W=S||T,N=I||M,B=S||I,P=M||T,A=E-_,L=k-w,j=_<d.top,F=E>d.bottom,R=w+h<d.left,z=k>d.right;let O=!1,$=!1,D=!1;if(j)switch((null==s?void 0:s.top)||"hidden-inside"){case"hidden-inside":W||(O=!0);break;case"hidden-outside":N||(O=!0);break;case"stick-inside":d.top>_&&(_=d.top,D=!0);break;case"stick-outside":d.top>E&&(_=d.top-A,D=!0)}if(F)switch((null==s?void 0:s.bottom)||"hidden-outside"){case"hidden-inside":N||(O=!0);break;case"hidden-outside":W||(O=!0);break;case"stick-inside":d.bottom<E&&(_=d.bottom-A,D=!0);break;case"stick-outside":d.bottom<_&&(_=d.bottom,D=!0)}if(R)switch((null==s?void 0:s.left)||"hidden-inside"){case"hidden-inside":B||(O=!0);break;case"hidden-outside":P||(O=!0);break;case"stick-inside":d.left>w+h&&(w=d.left-h,$=!0);break;case"stick-outside":d.left>k&&(w=d.left-h-L,$=!0)}if(z)switch((null==s?void 0:s.right)||"hidden-outside"){case"hidden-inside":P||(O=!0);break;case"hidden-outside":B||(O=!0);break;case"stick-inside":d.right<k&&(w=d.right-L,$=!0);break;case"stick-outside":d.right<w&&(w=d.right,$=!0)}O&&(r.style.zIndex=o,r.style.visibility="hidden"),$&&(r.style.left=`${Math.ceil(w)}px`),D&&(r.style.top=`${Math.ceil(_)}px`)}}(r||(r={}))},62939:(e,t,n)=>{n.d(t,{NZ:()=>o,$O:()=>v,z2:()=>l,a3:()=>m,eA:()=>f,pC:()=>u,yp:()=>s});var i=n(9387);function o(e){const{spacing:t,children:n,className:o,...r}=e,a=i.Children.toArray(n).filter(Boolean),s=a.length;return i.createElement("div",{className:`jp-StatusBar-GroupItem ${o||""}`,...r},a.map((e,n)=>{const o=`group-item-${n}`;return 0===n?i.createElement("div",{key:o,style:{marginRight:`${t}px`}},e):n===s-1?i.createElement("div",{key:o,style:{marginLeft:`${t}px`}},e):i.createElement("div",{key:o,style:{margin:`0px ${t}px`}},e)}))}var r=n(60639),a=n(14809);function s(e){const t=new d(e);return e.startHidden||t.launch(),t}class d extends a.x0{constructor(e){super(),this.addClass("jp-ThemedContainer"),this._body=e.body,this._body.addClass("jp-StatusBar-HoverItem"),this._anchor=e.anchor,this._align=e.align,e.hasDynamicSize&&(this._observer=new ResizeObserver(()=>{this.update()})),(this.layout=new a.DG).addWidget(e.body),this._body.node.addEventListener("resize",()=>{this.update()})}launch(){this._setGeometry(),a.x0.attach(this,document.body),this.update(),this._anchor.addClass("jp-mod-clicked"),this._anchor.removeClass("jp-mod-highlight")}onUpdateRequest(e){this._setGeometry(),super.onUpdateRequest(e)}onAfterAttach(e){var t;document.addEventListener("click",this,!1),this.node.addEventListener("keydown",this,!1),window.addEventListener("resize",this,!1),null===(t=this._observer)||void 0===t||t.observe(this._body.node)}onBeforeDetach(e){var t;null===(t=this._observer)||void 0===t||t.disconnect(),document.removeEventListener("click",this,!1),this.node.removeEventListener("keydown",this,!1),window.removeEventListener("resize",this,!1)}onResize(){this.update()}dispose(){var e;null===(e=this._observer)||void 0===e||e.disconnect(),super.dispose(),this._anchor.removeClass("jp-mod-clicked"),this._anchor.addClass("jp-mod-highlight")}handleEvent(e){switch(e.type){case"keydown":this._evtKeydown(e);break;case"click":this._evtClick(e);break;case"resize":this.onResize()}}_evtClick(e){!e.target||this._body.node.contains(e.target)||this._anchor.node.contains(e.target)||this.dispose()}_evtKeydown(e){27===e.keyCode&&(e.stopPropagation(),e.preventDefault(),this.dispose())}_setGeometry(){let e=0;const t=this._anchor.node.getBoundingClientRect(),n=this._body.node.getBoundingClientRect();"right"===this._align&&(e=-(n.width-t.width));const i=window.getComputedStyle(this._body.node);r.e.setGeometry({anchor:t,host:document.body,maxHeight:500,minHeight:20,node:this._body.node,offset:{horizontal:e},privilege:"forceAbove",style:i})}}function l(e){const{width:t,percentage:n,...o}=e;return i.createElement("div",{className:"jp-Statusbar-ProgressBar-progress-bar",role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n},i.createElement(c,{percentage:n,...o,contentWidth:t}))}function c(e){return i.createElement("div",{style:{width:`${e.percentage}%`}},i.createElement("p",null,e.content))}function u(e){const{title:t,source:n,className:o,...r}=e;return i.createElement("span",{className:o?`jp-StatusBar-TextItem ${o}`:"jp-StatusBar-TextItem",title:t,...r},n)}function m(e){return i.createElement("div",{className:"jp-Statusbar-ProgressCircle",role:"progressbar","aria-label":e.label||"Unlabelled progress circle","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.progress},i.createElement("svg",{viewBox:"0 0 250 250"},i.createElement("circle",{cx:"125",cy:"125",r:"104",stroke:"var(--jp-inverse-layout-color3)",strokeWidth:"20",fill:"none"}),i.createElement("path",{className:"jp-Statusbar-ProgressCirclePath",transform:"translate(125,125) scale(.9)",d:(e=>{const t=Math.max(3.6*e,.1),n=t*Math.PI/180,i=104*Math.sin(n),o=-104*Math.cos(n);return"M 0 0 v -104 A 104 104 1 "+(t<180?1:0)+" 0 "+i.toFixed(4)+" "+o.toFixed(4)+" z"})(e.progress),fill:"var(--jp-inverse-layout-color3)"})))}var h,g=n(38921),p=n(79246);class f extends a.x0{constructor(){super(),this._isWindowNarrow=()=>window.innerWidth<=630,this._leftRankItems=[],this._rightRankItems=[],this._statusItems={},this._disposables=new p.DisposableSet,this.addClass("jp-StatusBar-Widget");const e=this.layout=new a.DG,t=this._leftSide=new a.Zk,n=this._middlePanel=new a.Zk,i=this._rightSide=new a.Zk;t.addClass("jp-StatusBar-Left"),n.addClass("jp-StatusBar-Middle"),i.addClass("jp-StatusBar-Right"),i.node.style.flexDirection="row",e.addWidget(t),e.addWidget(n),e.addWidget(i)}registerStatusItem(e,t){if(e in this._statusItems)throw new Error(`Status item ${e} already registered.`);const n={...h.statusItemDefaults,...t},{align:i,item:o,rank:r,priority:a}=n,s=()=>{this._refreshItem(e)};n.activeStateChanged&&n.activeStateChanged.connect(s);const d={id:e,rank:r,priority:a};if(n.item.addClass("jp-StatusBar-Item"),this._statusItems[e]=n,"left"===i){const e=this._findInsertIndex(this._leftRankItems,d);-1===e?(this._leftSide.addWidget(o),this._leftRankItems.push(d)):(g.ArrayExt.insert(this._leftRankItems,e,d),this._leftSide.insertWidget(e,o))}else if("right"===i){const e=g.ArrayExt.findFirstIndex(this._rightRankItems,e=>e.rank<d.rank);-1===e?(this._rightSide.addWidget(o),this._rightRankItems.push(d)):(g.ArrayExt.insert(this._rightRankItems,e,d),this._rightSide.insertWidget(e,o))}else this._middlePanel.addWidget(o);this._refreshItem(e);const l=new p.DisposableDelegate(()=>{delete this._statusItems[e],n.activeStateChanged&&n.activeStateChanged.disconnect(s),o.parent=null,o.dispose()});return this._disposables.add(l),l}dispose(){this._leftRankItems.length=0,this._rightRankItems.length=0,this._disposables.dispose(),super.dispose()}onUpdateRequest(e){this._refreshAll(),super.onUpdateRequest(e)}_findInsertIndex(e,t){return g.ArrayExt.findFirstIndex(e,e=>e.rank>t.rank)}_refreshItem(e){const t=this._statusItems[e];!t.isActive()||0===t.priority&&this._isWindowNarrow()?t.item.hide():(t.item.show(),t.item.update())}_refreshAll(){Object.keys(this._statusItems).forEach(e=>{this._refreshItem(e)})}}!function(e){e.statusItemDefaults={align:"left",rank:0,priority:0,isActive:()=>!0,activeStateChanged:void 0}}(h||(h={}));const v=new(n(98238).Token)("@jupyterlab/statusbar:IStatusBar","A service for the status bar on the application. Use this if you want to add new status bar items.")}}]);