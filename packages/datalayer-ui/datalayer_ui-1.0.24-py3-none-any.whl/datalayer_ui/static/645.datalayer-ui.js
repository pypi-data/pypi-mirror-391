"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[645,85003],{5700:(e,t,n)=>{n.d(t,{N:()=>c});var r=n(18683),a=n(38621),o=n(98754),i=n(58875),s=n(71791),l=n(84604);function c(e){const{commands:t,model:n}=e;return(0,r.jsxs)(o.A,{className:l.VL,sx:{width:16,position:"relative",marginTop:4,marginLeft:"16px !important","& p":{marginBottom:"0 !important"}},children:[(0,r.jsx)(i.K,{size:"small",color:"secondary","aria-label":"Run cell",title:"Run cell",onClick:e=>{e.preventDefault(),t.execute(s.nx.run).catch(e=>{console.error("Failed to run cell.",e)})},icon:a.udU,variant:"invisible"}),(0,r.jsx)(i.K,{size:"small",color:"secondary","aria-label":"Add code cell above",title:"Add code cell above",onClick:e=>{e.preventDefault(),t.execute(s.nx.insertAbove).catch(e=>{console.error("Failed to insert code cell above.",e)})},icon:a.Mtm,variant:"invisible"}),(0,r.jsx)(i.K,{size:"small",color:"secondary","aria-label":"Add markdown cell above",title:"Add markdown cell above",onClick:e=>{e.preventDefault(),t.execute(s.nx.insertAbove,{cellType:"markdown"}).catch(e=>{console.error("Failed to insert markdown cell above.",e)})},icon:a.Mtm,variant:"invisible"}),"code"===n.type?(0,r.jsx)(i.K,{"aria-label":"Convert to markdow cell",title:"Convert to markdow cell",icon:a.dHM,size:"small",variant:"invisible",onClick:e=>{e.preventDefault(),t.execute(s.nx.changeCellTypeToMarkdown).catch(e=>{console.error("Failed to change cell type to markdown.",e)})}}):(0,r.jsx)(i.K,{"aria-label":"Convert to code cell",title:"Convert to code cell",icon:a.dHM,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),t.execute(s.nx.changeCellTypeToCode).catch(e=>{console.error("Failed to change cell type to code.",e)})}}),(0,r.jsx)(i.K,{size:"small",color:"secondary","aria-label":"Add markdown cell below",title:"Add markdown cell below",onClick:e=>{e.preventDefault(),t.execute(s.nx.insertBelow,{cellType:"markdown"}).catch(e=>{console.error("Failed to insert markdown cell below.",e)})},icon:a.D3D,variant:"invisible"}),(0,r.jsx)(i.K,{size:"small",color:"secondary","aria-label":"Add code cell above",title:"Add code cell above",onClick:e=>{e.preventDefault(),t.execute(s.nx.insertBelow).catch(e=>{console.error("Failed to insert code cell below.",e)})},icon:a.D3D,variant:"invisible"}),(0,r.jsx)(i.K,{size:"small",color:"error","aria-label":"Delete cell",title:"Delete cell",onClick:e=>{e.preventDefault(),t.execute(s.nx.deleteCells).catch(e=>{console.error("Failed to delete cells.",e)})},icon:a.uv5,variant:"invisible"})]})}},6543:(e,t,n)=>{n.d(t,{C:()=>y});var r=n(18683),a=n(9387),o=n(46343),i=n(80736),s=n(10680),l=n(11471),c=n(15115),d=n(84514),u=n(92664),m=n(55682),h=n(9448),p=n(41273),v=n(36687),f=n(5362),g=n(92131),w=n(33872);function y(e){const{children:t,connection:n,podName:y,multiServiceManager:b,disabled:x}=e,{addRuntimeSnapshot:k,runtimesRunUrl:S,runtimeSnapshots:C,setRuntimeSnapshots:T}=(0,g.c6)(),{enqueueToast:A,trackAsyncTask:V}=(0,p.d)(),[I,E]=(0,a.useState)(!1),[_,j]=(0,a.useState)(!1),[R,N]=(0,a.useState)(!1),[z,P]=(0,a.useState)(C[0]?.id??""),[M,D]=(0,a.useState)();(0,a.useEffect)(()=>{(0,v.Ay)().then(e=>{T(e),!z&&e.length>0&&P(e[0].id)}).catch(e=>{console.error(`Failed to fetch remote kernel snapshots; ${e}`)})},[S]);const L=(0,a.useCallback)(()=>{D(void 0),E(!0)},[]),U=(0,a.useCallback)(e=>{P(e.target.value)},[]),$=(0,a.useCallback)(async({id:e,connection:t,podName:n})=>{n?(await(0,v.Pk)({id:n,from:e}),A(`Runtime snapshot ${n} is loaded.`,{variant:"success"})):t&&(await(0,f.j)({connection:t,id:e}),A(`Runtime snapshot ${e} is loaded.`,{variant:"success"}))},[]),F=(0,a.useCallback)(async()=>{try{let e,t;N(!0);let r="",a="";if(y&&b?.remote)a=(0,w.u)("cloud"),t=b.remote.runtimesManager.snapshotRuntime({podName:y,name:a,description:a,stop:!1}),r=y.split("-",2).reverse()[0],t.then(t=>{e=t});else if(n&&b?.browser){const o=n.model;r=o.id,a=(0,w.u)("browser");let i=!0;t=(0,f.T)({connection:b.browser.kernels.connectTo({model:o}),metadata:{filename:`${a}.data`},onUploadProgress:()=>{i&&(i=!1,(0,v.Ay)().then(t=>{e=t.find(e=>e.name===a)}))}})}t&&(V(t,{error:{message:(e,t)=>"Empty snapshot"===e?`Runtime ${r} will not be snapshotted as it does not contain any serializable state.`:`Failed to snapshot runtime ${r} - ${e}`},pending:{message:`Taking a snapshot of runtime ${r}…`},success:{message:()=>`Runtime ${r} successfully snapshotted as ${a}.`}}),await t,e&&k(e))}finally{N(!1)}},[n,y,b]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.W,{children:[(0,r.jsx)(c.W.Button,{leadingVisual:o.A,variant:"invisible",size:"small",disabled:_||R||x,children:t}),(0,r.jsx)(c.W.Overlay,{children:(0,r.jsxs)(i.l,{children:[(0,r.jsx)(i.l.Item,{onSelect:L,disabled:_||0===C.length,children:"Load a runtime snapshot…"}),(0,r.jsx)(i.l.Item,{onSelect:F,disabled:R,children:"Take a runtime snapshot"})]})})]}),I&&(0,r.jsx)(m.l,{title:(0,r.jsx)("span",{style:{color:"var(--fgColor-default)"},children:"Choose a runtime snapshot to load"}),onClose:()=>{E(!1)},footerButtons:[{buttonType:"default",content:"Cancel",onClick:e=>{e.defaultPrevented||(e.preventDefault(),E(!1))}},{buttonType:"primary",content:_?(0,r.jsx)(l.A,{size:"small"}):"Load",disabled:_,onClick:async e=>{if(!e.defaultPrevented){e.preventDefault(),j(!0);try{D(void 0);const e=C.find(e=>e.id===z);e&&(n||y)?await $({connection:n,id:e.id,podName:y}):D("No runtime snapshot found.")}finally{j(!1),E(!1)}}},autoFocus:!0}],children:(0,r.jsxs)(h.az,{as:"form",children:[(0,r.jsxs)(d.A,{children:[(0,r.jsx)(d.A.Label,{children:"Snapshot"}),(0,r.jsx)(u.A,{name:"snapshot",value:z,onChange:U,block:!0,children:C.map(e=>(0,r.jsx)(u.A.Option,{value:e.id,children:e.name?`${e.name} (${e.id})`:e.id},e.id))})]}),M&&(0,r.jsx)(s.A,{variant:"danger",children:M})]})})]})}y.defaultProps={disabled:!1}},7384:(e,t,n)=>{n.r(t),n.d(t,{createMarkdownParser:()=>c,default:()=>d});var r=n(98238),a=n(63711),o=n(1290),i=n(5279);new r.Token("@jupyterlab/mermaid:IMermaidManager","a manager for rendering mermaid text-based diagrams");const s=new r.Token("@jupyterlab/mermaid:IMermaidMarkdown","a manager for rendering mermaid text-based diagrams in markdown fenced code blocks"),l="```~~~";function c(e,t){return{render:n=>u.render(n,e,t)}}const d={id:"@jupyterlab/markedparser-extension:plugin",description:"Provides the Markdown parser.",autoStart:!0,provides:i.co,requires:[o.SW],optional:[s],activate:(e,t,n)=>c(t,{blocks:n?[n]:[]})};var u;!function(e){let t=null,o=null,i=[],s=null,c={},d=new a.LruCache;async function u(e){if(o)return o;if(t)return await t.promise;i=(null==e?void 0:e.blocks)||[],i=i.sort((e,t)=>{var n,r;return(null!==(n=e.rank)&&void 0!==n?n:1/0)-(null!==(r=t.rank)&&void 0!==r?r:1/0)}),t=new r.PromiseDelegate;const[{marked:a,Renderer:s},l]=await Promise.all([n.e(55846).then(n.bind(n,55846)),m()]);for(const e of l)a.use(e);return c={async:!0,gfm:!0,walkTokens:p,renderer:h(s)},o=a,t.resolve(o),o}async function m(){return Promise.all([(async()=>(await n.e(90529).then(n.bind(n,90529))).gfmHeadingId())(),(async()=>(await n.e(59741).then(n.bind(n,59741))).mangle())()])}function h(e){const t=new e,n=t.code;return t.code=({text:e,lang:r,escaped:a})=>{for(const t of i)if(r&&t.languages.includes(r)){const n=t.render(e);if(null!=n)return n}const o=`${r}${l}${e}${l}`,s=d.get(o);return null!=s?s:n.call(t,{text:e,lang:r,escaped:a})},t}async function p(e){if("code"===e.type){if(e.lang)for(const t of i)if(t.languages.includes(e.lang))return void await t.walk(e.text);await async function(e){const{lang:t,text:n}=e;if(!t||!s)return;const r=`${t}${l}${n}${l}`;if(d.get(r))return;const a=document.createElement("div");try{await s.highlight(n,s.findBest(t),a);const e=`<pre><code class="language-${t}">${a.innerHTML}</code></pre>`;d.set(r,e)}catch(e){console.error(`Failed to highlight ${t} code`,e)}finally{a.remove()}}(e)}}e.render=async function(e,t,n){return s=t,o||(o=await u(n)),o(e,c)},e.initializeMarked=u}(u||(u={}))},10069:(e,t,n)=>{n.d(t,{Ks:()=>i});var r=n(97283),a=n(7282);const o=(0,r.y)(e=>({aiAgents:[],addAIAgent:t=>{e(e=>e.aiAgents.includes(t)?{}:{aiAgents:e.aiAgents.concat([t])})},deleteAIAgent:t=>{e(e=>({aiAgents:e.aiAgents.filter(e=>e.documentId===t)}))},updateAIAgent:(t,n)=>{e(e=>{const r=e.aiAgents.findIndex(e=>e.documentId===t);return r>=0?(e.aiAgents[r].runtimeId=n,{aiAgents:[...e.aiAgents]}):{}})}}));function i(e){return(0,a.Pj)(o,e)}},20232:(e,t,n)=>{n.d(t,{k:()=>I});var r=n(29886),a=n(38229),o=n(39189),i=n(50809),s=n(9366);const l=(e,t)=>{o.zd(e,0);const n=s.FX(t);o.Gu(e,n)},c=(e,t,n)=>{o.zd(e,1),o.Gu(e,s.PR(t,n))},d=(e,t,n)=>{try{s.QE(t,i.bo(e),n)}catch(e){console.error("Caught error while handling a Yjs update",e)}},u=d;var m=n(54195),h=n(48201),p=n(51318),v=n(10531),f=n(8417),g=n(42165);const w=[];w[0]=(e,t,n,r,a)=>{o.zd(e,0);const s=((e,t,n,r)=>{const a=i.cw(e);switch(a){case 0:((e,t,n)=>{c(t,n,i.bo(e))})(e,t,n);break;case 1:d(e,n,r);break;case 2:u(e,n,r);break;default:throw new Error("Unknown message type")}return a})(t,e,n.doc,n);r&&1===s&&!n.synced&&(n.synced=!0)},w[3]=(e,t,n,r,a)=>{o.zd(e,1),o.Gu(e,m.X3(n.awareness,Array.from(n.awareness.getStates().keys())))},w[1]=(e,t,n,r,a)=>{m.tQ(n.awareness,i.bo(t),n)},w[2]=(e,t,n,r,a)=>{((e,t,n)=>{0===i.cw(e)&&n(0,i.t3(e))})(t,n.doc,(e,t)=>y(n,t))};const y=(e,t)=>console.warn(`Permission denied to access ${e.url}.\n${t}`),b=(e,t,n)=>{const r=i.$C(t),a=o.xv(),s=i.cw(r),l=e.messageHandlers[s];return l?l(a,r,e,n,s):console.error("Unable to compute message"),a},x=(e,t,n)=>{t===e.ws&&(e.emit("connection-close",[n,e]),e.ws=null,t.close(),e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,m._g(e.awareness,Array.from(e.awareness.getStates().keys()).filter(t=>t!==e.doc.clientID),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,setTimeout(k,p.jk(100*p.n7(2,e.wsUnsuccessfulReconnects),e.maxBackoffTime),e))},k=e=>{if(e.shouldConnect&&null===e.ws){const t=new e._WS(e.url,e.protocols);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=n=>{e.wsLastMessageReceived=a._g();const r=b(e,new Uint8Array(n.data),!0);o.Bw(r)>1&&t.send(o.Fo(r))},t.onerror=t=>{e.emit("connection-error",[t,e])},t.onclose=n=>{x(e,t,n)},t.onopen=()=>{e.wsLastMessageReceived=a._g(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);const n=o.xv();if(o.zd(n,0),l(n,e.doc),t.send(o.Fo(n)),null!==e.awareness.getLocalState()){const n=o.xv();o.zd(n,1),o.Gu(n,m.X3(e.awareness,[e.doc.clientID])),t.send(o.Fo(n))}},e.emit("status",[{status:"connecting"}])}},S=(e,t)=>{const n=e.ws;e.wsconnected&&n&&n.readyState===n.OPEN&&n.send(t),e.bcconnected&&r.mk(e.bcChannel,t,e)};class C extends h.W{constructor(e,t,n,{connect:i=!0,awareness:s=new m.ww(n),params:c={},protocols:d=[],WebSocketPolyfill:u=WebSocket,resyncInterval:h=-1,maxBackoffTime:p=2500,disableBc:v=!1}={}){for(super();"/"===e[e.length-1];)e=e.slice(0,e.length-1);this.serverUrl=e,this.bcChannel=e+"/"+t,this.maxBackoffTime=p,this.params=c,this.protocols=d,this.roomname=t,this.doc=n,this._WS=u,this.awareness=s,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=v,this.wsUnsuccessfulReconnects=0,this.messageHandlers=w.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=i,this._resyncInterval=0,h>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const e=o.xv();o.zd(e,0),l(e,n),this.ws.send(o.Fo(e))}},h)),this._bcSubscriber=(e,t)=>{if(t!==this){const t=b(this,new Uint8Array(e),!1);o.Bw(t)>1&&r.mk(this.bcChannel,o.Fo(t),this)}},this._updateHandler=(e,t)=>{if(t!==this){const t=o.xv();o.zd(t,0),((e,t)=>{o.zd(e,2),o.Gu(e,t)})(t,e),S(this,o.Fo(t))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:e,updated:t,removed:n},r)=>{const a=e.concat(t).concat(n),i=o.xv();o.zd(i,1),o.Gu(i,m.X3(s,a)),S(this,o.Fo(i))},this._exitHandler=()=>{m._g(this.awareness,[n.clientID],"app closed")},f.Ll&&void 0!==g&&g.on("exit",this._exitHandler),s.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&3e4<a._g()-this.wsLastMessageReceived&&x(this,this.ws,null)},3e3),i&&this.connect()}get url(){const e=v.V(this.params);return this.serverUrl+"/"+this.roomname+(0===e.length?"":"?"+e)}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),f.Ll&&void 0!==g&&g.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(r.B1(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const e=o.xv();o.zd(e,0),l(e,this.doc),r.mk(this.bcChannel,o.Fo(e),this);const t=o.xv();o.zd(t,0),c(t,this.doc),r.mk(this.bcChannel,o.Fo(t),this);const n=o.xv();o.zd(n,3),r.mk(this.bcChannel,o.Fo(n),this);const a=o.xv();o.zd(a,1),o.Gu(a,m.X3(this.awareness,[this.doc.clientID])),r.mk(this.bcChannel,o.Fo(a),this)}disconnectBc(){const e=o.xv();o.zd(e,1),o.Gu(e,m.X3(this.awareness,[this.doc.clientID],new Map)),S(this,o.Fo(e)),this.bcconnected&&(r.al(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&x(this,this.ws,null)}connect(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(k(this),this.connectBc())}}var T,A=n(63711),V=n(72490);!function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Error="error"}(T||(T={}));class I{type="datalayer";_status=T.Disconnected;_provider=null;_sharedModel=null;_statusChanged=new V.Signal(this);_errorOccurred=new V.Signal(this);_syncStateChanged=new V.Signal(this);_isDisposed=!1;_config;_onSync=null;_onConnectionClose=null;constructor(e){this._config=e}get status(){return this._status}get isConnected(){return this._status===T.Connected}get isDisposed(){return this._isDisposed}get events(){return{statusChanged:this._statusChanged,errorOccurred:this._errorOccurred,syncStateChanged:this._syncStateChanged}}setStatus(e){this._status!==e&&(this._status=e,this._statusChanged.emit(e))}async connect(e,t,n){if(this.isConnected)console.warn("Already connected to Datalayer collaboration service");else{this.setStatus(T.Connecting);try{const r=this._config.runUrl,a=this._config.token;if(!r)throw new Error("Datalayer runUrl is not configured - must be explicitly provided in DatalayerCollaborationProvider config");if(!a)throw new Error("Datalayer token is not configured - must be explicitly provided in DatalayerCollaborationProvider config");const{ydoc:o,awareness:i}=e,s=A.URLExt.join(r,"/api/spacer/v1/documents"),l=A.URLExt.join(r,"/api/spacer/v1/documents/ws").replace(/^http/,"ws"),c=await async function({url:e,token:t,fetchFn:n=fetch}){const r={Accept:"application/json"};t&&(r.Authorization=`Bearer ${t}`);const a=await n(e,{method:"GET",headers:r,credentials:t?"include":"omit",mode:"cors",cache:"no-store"});if(a.ok)return(await a.json()).sessionId;throw console.error("Failed to fetch session ID.",a),new Error("Failed to fetch session ID.")}({url:A.URLExt.join(s,t),token:a,fetchFn:this._config.fetchFn});this._provider=new C(l,t,o,{disableBc:!0,params:{sessionId:c,token:a},awareness:i,...n}),this._sharedModel=e,this._onSync=e=>{this.handleSync(e)},this._onConnectionClose=e=>{e&&this.handleConnectionClose(e)},this._provider.on("sync",this._onSync),this._provider.on("connection-close",this._onConnectionClose),console.log("Connected to Datalayer collaboration service")}catch(e){throw this.setStatus(T.Error),this._errorOccurred.emit(e),e}}}disconnect(){this._provider&&(this._onSync&&this._provider.off("sync",this._onSync),this._onConnectionClose&&this._provider.off("connection-close",this._onConnectionClose),this._provider.disconnect(),this._provider=null),this._sharedModel=null,this.setStatus(T.Disconnected)}getProvider(){return this._provider}getSharedModel(){return this._sharedModel}handleConnectionClose(e){console.warn("Collaboration connection closed:",e),this.setStatus(T.Disconnected),4002===e.code&&console.warn("Datalayer collaboration session expired")}handleSync(e){this._syncStateChanged.emit(e),e&&this.setStatus(T.Connected)}dispose(){this._isDisposed||(this.disconnect(),this._isDisposed=!0)}}},27203:(e,t,n)=>{n.d(t,{k:()=>pe});var r=n(18683),a=n(9387),o=n(22462),i=n(9448),s=n(90117),l=n(1290),c=n(37706),d=n(62097),u=n(89492),m=n(71784),h=n(77128),p=n(44623),v=n(85181),f=n(63711),g=n(14377),w=n(47501),y=n(83303),b=n(7384),x=n(30574),k=n(14738),S=n(29028),C=n(47798),T=n(39756),A=n(11796),V=n(70639),I=n(89915),E=n(53054),_=n(75987),j=n(38921),R=n(16950),N=n(79246),z=n(72490),P=n(14809),M=n(4537),D=n(20137),L=n(45458),U=n(89462),$=n(66698),F=n(17402),B=n(66087),H=n(98238),W=n(9366);const K=B.sj.define({combine:e=>e[e.length-1]}),O=D.Lz.baseTheme({".jp-remote-cursor":{borderLeft:"1px solid black",marginLeft:"-1px"},".jp-remote-cursor.jp-mod-primary":{borderLeftWidth:"2px"},".jp-remote-selection":{opacity:.5},".cm-tooltip":{border:"none"},".cm-tooltip.jp-remote-userInfo":{color:"var(--jp-ui-inverse-font-color0)",padding:"0px 2px"}}),q=B.YH.define();class Z{style;marker;constructor(e,t){this.style=e,this.marker=t}draw(){const e=this.marker.draw();for(const[t,n]of Object.entries(this.style))e.style[t]=n;return e}eq(e){return this.marker.eq(e.marker)&&H.JSONExt.deepEqual(this.style,e.style)}update(e,t){for(const[t,n]of Object.entries(this.style))e.style[t]=n;return this.marker.update(e,t.marker)}}const G=(0,D.qd)({above:!0,markers(e){const{awareness:t,ytext:n}=e.state.facet(K),r=n.doc,a=[];return t.getStates().forEach((o,i)=>{if(i===t.doc.clientID)return;const s=o.cursors;for(const t of s??[]){if(!t?.anchor||!t?.head)return;const i=(0,W.IT)(t.anchor,r),s=(0,W.IT)(t.head,r);if(i?.type!==n||s?.type!==n)return;const l=t.primary??1?"jp-remote-cursor jp-mod-primary":"jp-remote-cursor",c=B.OF.cursor(s.index,s.index>i.index?-1:1);for(const t of D.Ip.forRange(e,l,c))a.push(new Z({borderLeftColor:o.user?.color??"black"},t))}}),a},update:(e,t)=>!!e.transactions.find(e=>e.annotation(q)),class:"jp-remote-cursors"});function J(e){const t=new Array,{awareness:n,ytext:r}=e.facet(K),a=r.doc;for(const[e,o]of n.getStates())if(e!==n.doc.clientID)for(const e of o.cursors??[]){if(!e?.head)continue;const n=(0,W.IT)(e.head,a);n?.type===r&&t.push({pos:n.index,above:!0,create:()=>{const e=document.createElement("div");return e.classList.add("jp-remote-userInfo"),e.style.backgroundColor=o.user?.color??"darkgrey",e.textContent=o.user?.display_name??"Anonymous",{dom:e}}})}return t}const X=B.sU.define({create:J,update:(e,t)=>t.annotation(q)?J(t.state):e,provide:e=>D.DK.computeN([e],t=>t.field(e))}),Y=(0,D.qd)({above:!1,markers(e){const{awareness:t,ytext:n}=e.state.facet(K),r=n.doc,a=[];return t.getStates().forEach((o,i)=>{if(i===t.doc.clientID)return;const s=o.cursors;for(const t of s??[]){if((t.empty??1)||!t?.anchor||!t?.head)return;const i=(0,W.IT)(t.anchor,r),s=(0,W.IT)(t.head,r);if(i?.type!==n||s?.type!==n)return;const l="jp-remote-selection";for(const t of D.Ip.forRange(e,l,B.OF.range(i.index,s.index)))a.push(new Z({backgroundColor:o.user?.color??"black"},t))}}),a},update:(e,t)=>!!e.transactions.find(e=>e.annotation(q)),class:"jp-remote-selections"}),Q=D.Z9.fromClass(class{editorAwareness;_listener;constructor(e){this.editorAwareness=e.state.facet(K),this._listener=({added:t,updated:n,removed:r})=>{t.concat(n).concat(r).findIndex(e=>e!==this.editorAwareness.awareness.doc.clientID)>=0&&e.dispatch({annotations:[q.of([])]})},this.editorAwareness.awareness.on("change",this._listener)}destroy(){this.editorAwareness.awareness.off("change",this._listener)}update(e){if(!e.docChanged&&!e.selectionSet)return;const{awareness:t,ytext:n}=this.editorAwareness,r=t.getLocalState();if(r){const a=e.view.hasFocus&&e.view.dom.ownerDocument.hasFocus(),o=e.state.selection,i=new Array;if(a&&o){for(const e of o.ranges){const t=e===o.main,r=(0,W.SF)(n,e.anchor),a=(0,W.SF)(n,e.head);i.push({anchor:r,head:a,primary:t,empty:e.empty})}if(!r.cursors||i.length>0){const e=r.cursors?.map(e=>({...e,anchor:e?.anchor?(0,W.sH)(e.anchor):null,head:e?.head?(0,W.sH)(e.head):null}));H.JSONExt.deepEqual(i,e)||t.setLocalStateField("cursors",i)}}}}},{provide:()=>[O,G,Y,X,(0,D.vX)({position:"absolute",parent:document.body})]});var ee=n(50059),te=n(71791),ne=n(51671);class re{_commands;_panel;_notebook;_context;_defaultCellType="code";constructor(e,t,n){this._commands=e,this._panel=t,this._notebook=t.content,this._context=n}get commands(){return this._commands}get panel(){return this._panel}get notebook(){return this._notebook}get context(){return this._context}setDefaultCellType(e){this._defaultCellType=e}get defaultCellType(){return this._defaultCellType}insertAbove(e){const t=this._notebook;ne.Ft.insertAbove(t),"code"!==this._defaultCellType&&ne.Ft.changeCellType(t,this._defaultCellType),e&&t.activeCell&&t.activeCell.model.sharedModel.setSource(e),t.mode="edit"}insertBelow(e){const t=this._notebook;ne.Ft.insertBelow(t),"code"!==this._defaultCellType&&ne.Ft.changeCellType(t,this._defaultCellType),e&&t.activeCell&&t.activeCell.model.sharedModel.setSource(e),t.mode="edit"}changeCellType(e){const t=this._notebook;t.activeCell&&t.activeCell.model.type!==e&&ne.Ft.changeCellType(t,e)}deleteCells(){const e=this._notebook;ne.Ft.deleteCells(e)}get model(){return this._context.model}undo(){ne.Ft.undo(this._notebook)}redo(){ne.Ft.redo(this._notebook)}dispose(){}}const ae=(0,n(97283).y)((e,t)=>({notebooks:new Map,setNotebooks2:t=>e(e=>({notebooks:t})),selectNotebook2:e=>t().notebooks.get(e),selectNotebookAdapter2:e=>{const n=t().notebooks.get(e);if(n)return n.adapter},run:e=>{t().notebooks.get(e)?.adapter?.commands.execute(te.nx.run)},runAll:e=>{t().notebooks.get(e)?.adapter?.commands.execute(te.nx.runAll)},interrupt:e=>{t().notebooks.get(e)?.adapter?.commands.execute(te.nx.interrupt)},insertAbove:e=>{t().notebooks.get(e.id)?.adapter?.setDefaultCellType(e.cellType),t().notebooks.get(e.id)?.adapter?.insertAbove(e.source)},insertBelow:e=>{t().notebooks.get(e.id)?.adapter?.setDefaultCellType(e.cellType),t().notebooks.get(e.id)?.adapter?.insertBelow(e.source)},delete:e=>{t().notebooks.get(e)?.adapter?.commands.execute(te.nx.deleteCells)},changeCellType:e=>{t().notebooks.get(e.id)?.adapter?.changeCellType(e.cellType)},undo:e=>{const n=t().notebooks.get(e);n?n.adapter?n.adapter.undo():console.warn(`[Notebook2State] Cannot undo: adapter not available for notebook "${e}"`):console.warn(`[Notebook2State] Cannot undo: notebook with id "${e}" not found`)},redo:e=>{const n=t().notebooks.get(e);n?n.adapter?n.adapter.redo():console.warn(`[Notebook2State] Cannot redo: adapter not available for notebook "${e}"`):console.warn(`[Notebook2State] Cannot redo: notebook with id "${e}" not found`)},reset:()=>e(e=>({notebooks:new Map}))})),oe=1e3,ie=new Array,se=".datalayer/ping.ipynb";function le(e){const t={};return e&&e.forEach(e=>{const n=e.schema?.default;t[e.identifier]={enabled:!0,debouncerDelay:n?.debouncerDelay??200,timeout:n?.timeout??15e3,autoFillInMiddle:!0}}),t}function ce(e){console.log("[Notebook2Base] Component rendering with props:",{hasInlineProviders:!!e.inlineProviders,inlineProvidersCount:e.inlineProviders?.length,inlineProviders:e.inlineProviders});const{commands:t,extensions:n=ie,kernelId:o,renderers:l,serviceManager:f,model:w,onSessionConnection:y}=e,[b,x]=(0,a.useState)(!0),[A,V]=(0,a.useState)(new Array),[I,E]=(0,a.useState)(null),[_,R]=(0,a.useState)(null),N=(0,a.useMemo)(()=>e.id||(0,F.YG)(),[e.id]),D=(0,a.useMemo)(()=>e.path||se,[e.path]),B=(0,a.useMemo)(()=>new de({commands:t,renderers:l}),[t,l]),H=(0,a.useMemo)(()=>new k.S.ContentFactory({editorFactory:B.editorServices.factoryService.newInlineEditor}),[B.editorServices.factoryService.newInlineEditor]);(0,a.useEffect)(()=>{console.log("[Notebook2Base] Setting up completer with inlineProviders:",e.inlineProviders);const t=new c.A({model:new d.X}),n=new P.x0,r=le(e.inlineProviders);console.log("[Notebook2Base] Generated settings for providers:",r);const a=new u.C({context:{widget:n},providers:[new m.G],inlineProviders:e.inlineProviders,inlineProvidersSettings:r,timeout:oe});let o;if(console.log("[Notebook2Base] ProviderReconciliator created with inlineProviders:",e.inlineProviders),console.log("[Notebook2Base] ProviderReconciliator object:",a),e.inlineProviders&&e.inlineProviders.length>0){console.log("[Notebook2Base] Creating InlineCompleter widget");const t=v.wK.load("jupyterlab");o=new h.B({model:new h.B.Model,trans:t});const n={};e.inlineProviders?.forEach(e=>{n[e.identifier]={enabled:!0}}),o.configure({showWidget:"always",showShortcuts:!0,streamingAnimation:"none",suppressIfTabCompleterActive:!1,minLines:1,maxLines:10,editorResizeDelay:250,reserveSpaceForLongest:!1,providers:n}),P.x0.attach(o,document.body);const r=e=>!("Tab"!==e.key||e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)&&o&&o.model&&o.current?(console.log("[Notebook2Base] Tab pressed - accepting inline completion"),e.preventDefault(),e.stopPropagation(),o.accept(),!1):"Escape"===e.key&&o&&o.model&&o.current?(console.log("[Notebook2Base] Escape pressed - rejecting inline completion"),e.preventDefault(),e.stopPropagation(),o.model.reset(),!1):void 0;document.addEventListener("keydown",r,!0);const a=()=>{document.removeEventListener("keydown",r,!0)};console.log("[Notebook2Base] InlineCompleter created, configured, attached, and keyboard handlers set up"),o._keyboardCleanup=a}const i=new p.$({completer:t,reconciliator:a,inlineCompleter:o});return t.hide(),P.x0.attach(t,document.body),E(i),()=>{i.dispose(),t.dispose(),o&&(o._keyboardCleanup&&o._keyboardCleanup(),o.dispose()),n.dispose()}},[e.inlineProviders]);const[W,K]=(0,a.useState)(null);(0,a.useEffect)(()=>{const e=new S.k({name:"Notebook",label:"Notebook",modelName:"notebook",fileTypes:["notebook"],defaultFor:["notebook"],preferKernel:!0,autoStartDefault:!1,canStartKernel:!1,shutdownOnClose:!1,rendermime:B.rendermime,contentFactory:H,mimeTypeService:B.editorServices.mimeTypeService,notebookConfig:{...C.a.defaultNotebookConfig,recordTiming:!0}});return K(e),()=>{e.dispose(),K(t=>t===e?null:t)}},[H,B]);const[O,q]=(0,a.useState)(null);(0,a.useEffect)(()=>{const t=I?new T.G({namespace:N}):null,n=I?(0,te.VV)(B.commands,I,t,e.path):null;return q(t),()=>{n?.dispose(),t?.dispose(),q(e=>e===t?null:e)}},[I,N,B.commands,e.path]);const[Z,G]=(0,a.useState)(null);(0,a.useEffect)(()=>{const e=new ue(w),t=new g.o({factory:e,manager:f??new me,path:D,kernelPreference:{shouldStart:!1,canStart:!1,autoStartDefault:!1,shutdownOnDispose:!1}});return function(e,t,n,r,a=!1){const o=!n;e.sessionContext._initialize=async()=>{const t=e.sessionContext.sessionManager;await t.ready,await t.refreshRunning();const r=(0,j.find)(t.running(),t=>t.kernel?.id===(e.sessionContext.kernelPreference.id??""));if(r)try{const a=t.connectTo({model:{...r,path:n??r.path,name:n??r.name},kernelConnectionOptions:{handleComms:!0}});e.sessionContext._handleNewSession(a),this._kernel?.connection?.dispose()}catch(t){return e.sessionContext._handleSessionError(t),Promise.reject(t)}return await e.sessionContext._startIfNecessary()},e.dispose=()=>{e.isDisposed||(e._isDisposed=!0,e.sessionContext.dispose(),e._disposed.emit(void 0),z.Signal.clearData(this))},o&&(e._populate=async()=>{if(e._isPopulated=!0,e._isReady=!0,e._populatedPromise.resolve(void 0),e.isDisposed)return;const t=e._model.defaultKernelName||e.sessionContext.kernelPreference.name;e.sessionContext.kernelPreference={...e.sessionContext.kernelPreference,name:t,language:e._model.defaultKernelLanguage},a||e.sessionContext.initialize().then(t=>{t&&e._dialogs.selectKernel(e.sessionContext.sessionContext)})},e.initialize=async n=>{e.model.dirty=!1;const r=(new Date).toISOString(),a={path:t,name:t,type:"notebook",content:void 0,writable:!0,created:r,last_modified:r,mimetype:"application/x-ipynb+json",format:"json"};e._updateContentsModel(a),await e._populate(),e.model.sharedModel.clearUndoHistory()}),e.sessionContext.sessionChanged.connect((e,t)=>{const n=t.newValue;console.log("Current Jupyter Session Connection.",n),r?.(n??void 0)}),e.sessionContext.kernelChanged.connect((e,t)=>{const n=t.newValue;console.log("Current Jupyter Kernel Connection.",n),n&&!n.handleComms&&(console.log("Updating the current Kernel Connection to enforce Comms support.",n.handleComms),n.handleComms=!0)}),e.sessionContext.ready.then(()=>{r?.(e?.sessionContext.session??void 0)}),e.initialize(!n)}(t,N,D!==se?D:void 0,y,!f),G(t),()=>{t.dispose(),e.dispose(),G(e=>e===t?null:e)}},[N,f,w,y,D]),(0,a.useEffect)(()=>{Z&&o&&!Z.sessionContext.isDisposed&&Z.sessionContext.changeKernel({id:o}).catch(e=>{console.error("Failed to change kernel model.",e)})},[Z,o]);const[J,X]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=null,t=null,a=null;if(Z&&(e=W?.createNew(Z)??null,e)){t=new re(B.commands,e,Z),R(t),V(n.map(t=>(t.init({notebookId:N,commands:B.commands,panel:e}),t.createNew(e,Z),t.component??(0,r.jsx)(r.Fragment,{}))));const o=e.content.rendermime;a=new L.SS(Z,o,{saveState:!1}),o.addFactory({safe:!0,mimeTypes:[U.a],defaultRank:1,createRenderer:e=>new $.X(e,a)},1);for(const t of e.content.widgets)if("code"===t.model.type)for(const e of t.outputArea.widgets)for(const t of Array.from(e.children()))t instanceof $.X&&(t.manager=a);x(!1)}return X(e),e||(V([]),R(null)),()=>{if(a?.dispose(),t&&t.dispose(),e){e.content&&z.Signal.clearData(e.content);try{e.dispose()}catch(e){}}X(t=>t===e?null:t),R(e=>e===t?null:e)}},[Z,n,B.commands,W]),(0,a.useEffect)(()=>{if(_){const e=ae.getState().notebooks,t=new Map(e);t.set(N,{adapter:_}),ae.getState().setNotebooks2(t)}else{const e=ae.getState().notebooks;if(e.has(N)){const t=new Map(e);t.delete(N),ae.getState().setNotebooks2(t)}}},[_,N]),(0,a.useEffect)(()=>{let t=!0,n=null,r=null;return J&&(O&&(O.has(J)||O.add(J).catch(e=>{console.error(`Failed to track the notebook panel '${N}'.`)})),I&&(n=(e,t)=>{t&&t.ready.then(()=>{I.editor=t?.editor})},r=(n,r)=>{if(!t)return;const a=J.content.activeCell?.editor,o=new m.G,i=le(e.inlineProviders),s=r.newValue||{};console.log("[Notebook2Base] Creating ProviderReconciliator with editor and session",{hasEditor:!!a,hasSession:!!r.newValue,usingDummySession:!r.newValue,inlineProviders:e.inlineProviders,inlineProvidersSettings:i});const l=new u.C({context:{widget:J,editor:a,session:s},providers:[o],inlineProviders:e.inlineProviders,inlineProvidersSettings:i,timeout:oe});console.log("[Notebook2Base] ProviderReconciliator with editor created:",l),I.inlineCompleter&&(I.inlineCompleter.editor=a,console.log("[Notebook2Base] Updated InlineCompleter editor")),I.editor=a,I.reconciliator=l},J.context.sessionContext.sessionChanged.connect(r),J.context.sessionContext.ready.then(()=>{r?.(J.context.sessionContext,{name:"session",oldValue:null,newValue:J.context.sessionContext.session})}),J.content.activeCellChanged.connect(n))),()=>{if(t=!1,I){n&&J?.content.activeCellChanged.disconnect(n),r&&J?.context.sessionContext.sessionChanged.connect(r),I.editor=null;const t=le(e.inlineProviders);I.reconciliator=new u.C({context:{widget:new P.x0},providers:[new m.G],inlineProviders:e.inlineProviders,inlineProvidersSettings:t,timeout:oe})}}},[I,J,O]),(0,a.useEffect)(()=>{const e=e=>{B.commands.processKeydownEvent(e)};return document.addEventListener("keydown",e,!0),()=>{document.removeEventListener("keydown",e,!0)}},[B.commands]),(0,a.useEffect)(()=>()=>{const e=ae.getState().notebooks;if(e.has(N)){const t=new Map(e);t.delete(N),ae.getState().setNotebooks2(t)}},[N]),(0,r.jsxs)(r.Fragment,{children:[A.map((e,t)=>(0,r.jsx)(i.az,{children:e},`${e}-${t}`)),b?(0,r.jsx)(s.a,{},"notebook-loader"):J?(0,r.jsx)(i.az,{sx:{height:"100%"},children:(0,r.jsx)(ee.j,{id:N,children:J},"notebook-container")}):(0,r.jsx)(M.l,{variant:"critical",description:"Unable to create the notebook view.",hideTitle:!0,title:"Error"},"notebook-error")]})}class de{_commands;_editorServices;_rendermime;constructor(e={}){this._commands=e.commands??new R.J;const t=new l.T9;for(const e of l.T9.getDefaultLanguages())t.addLanguage(e);t.addLanguage({name:"ipythongfm",mime:"text/x-ipythongfm",load:async()=>(await Promise.all([n.e(96636),n.e(69946),n.e(12899),n.e(15949)]).then(n.bind(n,15949))).markdown({codeLanguages:e=>t.findBest(e)})});const r=I.dn.filter(e=>"text/javascript"!==e.mimeTypes[0]).concat([y.rendererFactory,w.rendererFactory]).concat(e.renderers??[]);this._rendermime=new E.K({initialFactories:r,latexTypesetter:new x.p,markdownParser:(0,b.createMarkdownParser)(t)});const a=new l.mN(t),o=new l.k8;for(const e of l.k8.getDefaultThemes())o.addTheme(e);const i=new l.AG;for(const e of l.AG.getDefaultExtensions({themes:o}))i.addExtension(e);i.addExtension({name:"shared-model-binding",factory:e=>{const t=e.model.sharedModel;return l.AG.createImmutableExtension((0,l.rX)({ytext:t.ysource,undoManager:t.undoManager??void 0}))}}),i.addExtension({name:"remote-user-cursors",factory(e){const{awareness:t,ysource:n}=e.model.sharedModel;return l.AG.createImmutableExtension((r={awareness:t,ytext:n},[K.of(r),Q]));var r}});const s=function(){const e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}();s&&i.addExtension({name:"csp-nonce",factory:()=>l.AG.createImmutableExtension(D.Lz.cspNonce.of(s))});const c=new l.Ez({extensions:i,languages:t});this._editorServices={factoryService:c,mimeTypeService:a}}get commands(){return this._commands}get editorServices(){return this._editorServices}get rendermime(){return this._rendermime}}class ue extends V.p{model;constructor(e){super(),this.model=e}createNew(e){return this.model}}class me{contents=Object.freeze({fileChanged:{connect:()=>{}},getSharedModelFactory:e=>null,localPath(e){const t=e.split("/"),n=t[0].split(":");return 1!==n.length&&this._additionalDrives.has(n[0])?f.PathExt.join(n.slice(1).join(":"),...t.slice(1)):f.PathExt.removeSlash(e)},normalize(e){const t=e.split(":");return 1===t.length?f.PathExt.normalize(e):`${t[0]}:${f.PathExt.normalize(t.slice(1).join(":"))}`}});kernelspecs=Object.freeze({ready:new Promise(()=>{})});sessions=Object.freeze({ready:new Promise(()=>{})});ready=Promise.resolve()}const he=o.DU`
  .dla-Box-Notebook .jp-Cell .dla-CellSidebar-Container {
    display: none;
  }
  .dla-Box-Notebook .jp-Cell.jp-mod-active .dla-CellSidebar-Container {
    display: block;
  }
`;function pe(e){const{Toolbar:t,children:n,cellSidebarMargin:o=120,collaborationProvider:l,commands:c,extensions:d,height:u="100vh",maxHeight:m="100vh",id:h,inlineProviders:p,nbformat:v,onNotebookModelChanged:f,onSessionConnection:g,path:w,readonly:y=!1,renderers:b,serviceManager:x,startDefaultKernel:k=!1,url:S}=e,[C,T]=(0,a.useState)(!0),V=function(e={}){const{kernels:t,requestedKernelId:n,startDefaultKernel:r=!1}=e,[o,i]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{let e,a=!0;return t&&(async()=>{let o;if(await t.ready,n)for(const e of t.running())if(e.id===n){o=n;break}!o&&r&&a&&(console.log("Starting new kernel."),e=await t.startNew(),a?o=e.id:e.dispose()),a&&i(o)})(),()=>{a=!1,e&&(console.log(`Shutting down kernel '${e.id}'.`),e.shutdown().catch(t=>{console.warn(`Failed to shutdown kernel '${e?.id}'.`,t)}).finally(()=>{e?.dispose()}))}},[t,n,r]),o}({requestedKernelId:e.kernelId,kernels:x.kernels,startDefaultKernel:k}),I=function(e){const{collaborationProvider:t,nbformat:n,readonly:r=!1,url:o,path:i,serviceManager:s,id:l}=e;console.log("[useNotebookModel] Hook called with options:",{hasCollaborationProvider:!!t,hasNbformat:!!n,readonly:r,hasUrl:!!o,path:i,hasServiceManager:!!s,id:l});const[c,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{console.log("[useNotebookModel] useEffect running");let e=!0;const a=new N.DisposableSet;if(t&&s&&l){console.log("[useNotebookModel] Setting up collaboration");const n=async()=>{try{const n=new _.Xn;if(await t.connect(n,l,{serviceManager:s,path:i}),e){console.log("[useNotebookModel] Creating collaboration model");const e=new A.x({collaborationEnabled:!0,disableDocumentWideUndoRedo:!0,sharedModel:n});e.readOnly=r,console.log("[useNotebookModel] Calling setModel with collaboration model"),d(e),a.add({dispose:()=>{t.disconnect()},get isDisposed(){return!1}})}}catch(e){console.error("Failed to setup collaboration:",e)}};n()}else{console.log("[useNotebookModel] No collaboration, creating standard model");const t=e=>{console.log("[useNotebookModel] createModel called with nbformat:",!!e);try{const t=new A.x;console.log("[useNotebookModel] NotebookModel created"),e&&(e.cells.forEach(e=>{e.metadata.editable=!r}),console.log("[useNotebookModel] About to call model.fromJSON"),t.fromJSON(e),console.log("[useNotebookModel] model.fromJSON completed successfully")),t.readOnly=r,console.log("[useNotebookModel] Calling setModel with standard model"),d(t)}catch(e){throw console.error("[useNotebookModel] Error creating model:",e),e}};!n&&o?(console.log("[useNotebookModel] Loading from URL:",o),async function(e){return fetch(e).then(e=>e.text()).then(e=>JSON.parse(e))}(o).then(n=>{e&&t(n)})):(console.log("[useNotebookModel] Creating model directly (nbformat provided or no URL)"),t(n))}return()=>{e=!1,a.dispose()}},[t,n,r,o,i,s,l]),console.log("[useNotebookModel] Returning model:",!!c),c}({collaborationProvider:l,nbformat:v,readonly:y,url:S,path:w,serviceManager:x,id:h});return(0,a.useEffect)(()=>{console.log("[Notebook2] useEffect - model changed:",{model:!!I,isLoading:C}),I&&(console.log("[Notebook2] Setting isLoading to false"),T(!1)),f?.(I)},[I,f]),(0,a.useEffect)(()=>{const e=()=>{l&&I&&I.sharedModel.awareness.setLocalStateField("user",x.user.identity)};return e(),x.user.userChanged.connect(e),()=>{x.user.userChanged.disconnect(e)}},[l,I,x]),console.log("[Notebook2] Rendering:",{isLoading:C,hasModel:!!I,hasServiceManager:!!x,hasInlineProviders:!!p}),C?(0,r.jsx)(s.a,{},"notebook-loader"):(0,r.jsxs)(i.az,{style:{height:u,width:"100%",position:"relative"},id:"dla-Jupyter-Notebook",children:[t&&(0,r.jsx)(t,{notebookId:h}),(0,r.jsxs)(i.az,{className:"dla-Box-Notebook",sx:{height:u,maxHeight:m,width:"100%",overflowY:"hidden","& .datalayer-NotebookPanel-header":{minHeight:"50px"},"& .jp-Notebook":{flex:"1 1 auto !important",height:"100%",overflowY:"scroll"},"& .jp-NotebookPanel":{},"& .jp-Toolbar":{display:"none",zIndex:0},"& .jp-Toolbar .jp-HTMLSelect.jp-DefaultStyle select":{fontSize:"14px"},"& .jp-Toolbar > .jp-Toolbar-responsive-opener":{display:"none"},"& .jp-Toolbar-kernelName":{display:"none"},"& .jp-Cell":{width:`calc(100% - ${o}px)`},"& .jp-Notebook-footer":{width:`calc(100% - ${o+82}px)`},"& .jp-CodeMirrorEditor":{cursor:"text !important"},".dla-Box-Notebook":{position:"relative"}},children:[n,(0,r.jsx)(he,{}),I&&x&&(0,r.jsx)(ce,{commands:c,id:h,extensions:d,inlineProviders:p,kernelId:V,model:I,path:w,renderers:b,serviceManager:x,onSessionConnection:g})]})]})}},27446:(e,t,n)=>{n.d(t,{R:()=>s});var r=n(18683),a=n(99180),o=n(38621),i=n(18316);const s=e=>{const{data:t,fileName:n,variant:s,extension:l}=e;return(0,r.jsx)(a.Q,{variant:s,leadingVisual:o.s3U,onClick:e=>(0,i.xD)(t,n,l),children:"Download"})};s.defaultProps={variant:"default",name:"data",extension:"json"}},32916:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(9387);const a={small:16,medium:32,large:64};function o({title:e,titleId:t,size:n,colored:o,...i},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:o?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",fillRule:"evenodd",style:{width:n?"string"==typeof n?a[n]:n:"16px",flex:"none",lineHeight:1},viewBox:"0 0 24 24","aria-hidden":"true",ref:s,"aria-labelledby":t},i),e?r.createElement("title",{id:t},e):null,r.createElement("path",{d:"M15.688 2.343a2.588 2.588 0 00-3.61 0l-9.626 9.44a.863.863 0 01-1.203 0 .823.823 0 010-1.18l9.626-9.44a4.313 4.313 0 016.016 0 4.116 4.116 0 011.204 3.54 4.3 4.3 0 013.609 1.18l.05.05a4.115 4.115 0 010 5.9l-8.706 8.537a.274.274 0 000 .393l1.788 1.754a.823.823 0 010 1.18.863.863 0 01-1.203 0l-1.788-1.753a1.92 1.92 0 010-2.754l8.706-8.538a2.47 2.47 0 000-3.54l-.05-.049a2.588 2.588 0 00-3.607-.003l-7.172 7.034-.002.002-.098.097a.863.863 0 01-1.204 0 .823.823 0 010-1.18l7.273-7.133a2.47 2.47 0 00-.003-3.537z"}),r.createElement("path",{d:"M14.485 4.703a.823.823 0 000-1.18.863.863 0 00-1.204 0l-7.119 6.982a4.115 4.115 0 000 5.9 4.314 4.314 0 006.016 0l7.12-6.982a.823.823 0 000-1.18.863.863 0 00-1.204 0l-7.119 6.982a2.588 2.588 0 01-3.61 0 2.47 2.47 0 010-3.54l7.12-6.982z"}))}const i=r.forwardRef(o)},35903:(e,t,n)=>{n.d(t,{Gr:()=>i});var r=n(97283),a=n(7282);const o=(0,r.y)((e,t)=>({datasources:[],updateDatasources:t=>e(e=>({datasources:t}))}));function i(e){return(0,a.Pj)(o,e)}},37932:(e,t,n)=>{n.d(t,{XV:()=>fe});var r=n(18683),a=n(9387),o=n(63711),i=n(98238),s=n(3556),l=n(58875),c=n(11471),d=n(87319),u=n(38621),m=n(34164),h=n(46186),p=n.n(h),v=n(99913);p()(v.A,{insert:"head",singleton:!1}),v.A.locals;var f="prc-TreeView-TreeViewItemVisual-dRlGq",g="prc-TreeView-TreeViewVisuallyHidden-4-mPv",w=n(3345),y=n(36393),b=n(41896),x=n(92209),k=n(27432);function S(e){var t,n,r;const a=e.getAttribute("aria-label"),o=e.getAttribute("aria-labelledby");return a||(o?null!==(t=null===(n=document.getElementById(o))||void 0===n?void 0:n.textContent)&&void 0!==t?t:"":null!==(r=e.textContent)&&void 0!==r?r:"")}var C=n(27907);function T(e){return e&&e!==document.body?function(e){return e.scrollHeight>e.clientHeight&&!(-1!==window.getComputedStyle(e).overflowY.indexOf("hidden"))}(e)?e:T(e.parentElement):null}var A=n(94761);function V(e,t,n){var r;if(t instanceof HTMLElement){try{if(t.closest("dialog:modal"))return}catch{}return null!==(r=function(e,t){switch(`${function(e){if("treeitem"!==e.getAttribute("role"))throw new Error("Element is not a treeitem");switch(e.getAttribute("aria-expanded")){case"true":return"open";case"false":return"closed";default:return"end"}}(e)} ${t.key}`){case"open ArrowRight":return E(e);case"open ArrowLeft":case"closed ArrowRight":case"end ArrowRight":return;case"closed ArrowLeft":case"end ArrowLeft":return _(e)}switch(t.key){case"ArrowUp":return I(e,"previous");case"ArrowDown":return I(e,"next");case"Backspace":return _(e);case"Home":return function(e){const t=e.closest("[role=tree]"),n=null==t?void 0:t.querySelector("[role=treeitem]");return n instanceof HTMLElement?n:void 0}(e);case"End":return function(e){const t=e.closest("[role=tree]"),n=Array.from((null==t?void 0:t.querySelectorAll("[role=treeitem]"))||[]);if(0===n.length)return;let r=n.length-1,a=n[r];for(;r>0&&a instanceof HTMLElement&&null!==(o=a.parentElement)&&void 0!==o&&o.closest("[role=treeitem][aria-expanded=false]");){var o;r-=1,a=n[r]}return a instanceof HTMLElement?a:void 0}(e);case"PageUp":return function(e){const t=e.closest('[role="tree"]');if(!t)return;const n=Array.from(t.querySelectorAll('[role="treeitem"]'));if(0===n.length)return;const r=R(t,n[0].firstElementChild),a=Math.floor(n.indexOf(e)/r),o=n.indexOf(e)-r*a;return n[Math.max(0,(a-1)*r+o)]}(e);case"PageDown":return function(e){const t=e.closest('[role="tree"]');if(!t)return;const n=Array.from(t.querySelectorAll('[role="treeitem"]'));if(0===n.length)return;const r=R(t,n[0].firstElementChild),a=Math.floor(n.indexOf(e)/r),o=n.indexOf(e)-r*a;return n[Math.min(n.length-1,(a+1)*r+o)]}(e)}}(t,n))&&void 0!==r?r:t}}function I(e,t){const n=e.closest("[role=tree]");if(!n)return;const r=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,e=>e instanceof HTMLElement&&"treeitem"===e.getAttribute("role")?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP);let a=r.firstChild();for(;a!==e;)a=r.nextNode();let o="next"===t?r.nextNode():r.previousNode();for(;o instanceof HTMLElement&&null!==(i=o.parentElement)&&void 0!==i&&i.closest("[role=treeitem][aria-expanded=false]");){var i;o="next"===t?r.nextNode():r.previousNode()}return o instanceof HTMLElement?o:void 0}function E(e){const t=e.querySelector("[role=treeitem]");return t instanceof HTMLElement?t:void 0}function _(e){const t=e.closest("[role=group]"),n=null==t?void 0:t.closest("[role=treeitem]");return n instanceof HTMLElement?n:void 0}const j={height:32};function R(e,t){var n,r;const a=T(e),{height:o}=null!==(n=null==t?void 0:t.getBoundingClientRect())&&void 0!==n?n:j,i=null!==(r=null==a?void 0:a.clientHeight)&&void 0!==r?r:window.innerHeight;return Math.floor(i/o)}function N(e){return e===document.activeElement}var z=n(80006),P=n(18704),M=n(68911);const D=a.createContext({announceUpdate:()=>{},expandedStateCache:{current:new Map}}),L=a.createContext({itemId:"",level:1,isSubTreeEmpty:!1,setIsSubTreeEmpty:()=>{},isExpanded:!1,setIsExpanded:()=>{},leadingVisualId:"",trailingVisualId:""}),U=e=>{const t=(0,d.c)(23),{"aria-label":n,"aria-labelledby":o,children:i,flat:s,truncate:l,className:c,style:u}=e,h=void 0===l||l,p=a.useRef(null),v=a.useRef(!1),[f,g]=a.useState("");let w;t[0]===Symbol.for("react.memo_cache_sentinel")?(w=e=>{g(e)},t[0]=w):w=t[0];const b=w;let k;t[1]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{v.current=!0},t[1]=k):k=t[1];const T=k;let I,E,_,j;t[2]===Symbol.for("react.memo_cache_sentinel")?(I=()=>{const e=function(){v.current=!1};return document.addEventListener("mouseup",e),()=>{document.removeEventListener("mouseup",e)}},E=[],t[2]=I,t[3]=E):(I=t[2],E=t[3]),(0,a.useEffect)(I,E),t[4]===Symbol.for("react.memo_cache_sentinel")?(_={containerRef:p,mouseDownRef:v},t[4]=_):_=t[4],function(e){const t=(0,d.c)(6),{containerRef:n,mouseDownRef:r}=e;let a,o;t[0]!==n||t[1]!==r?(a=()=>{var e,t,a;if(r.current)return;const o=null===(e=n.current)||void 0===e?void 0:e.querySelector("[aria-current]"),i=null===(t=n.current)||void 0===t?void 0:t.querySelector('[role="treeitem"]');return o instanceof HTMLElement?o:document.activeElement instanceof HTMLElement&&null!==(a=n.current)&&void 0!==a&&a.contains(document.activeElement)&&"treeitem"===document.activeElement.getAttribute("role")?document.activeElement:i instanceof HTMLElement?i:void 0},t[0]=n,t[1]=r,t[2]=a):a=t[2],t[3]!==n||t[4]!==a?(o={containerRef:n,bindKeys:A.z0.ArrowVertical|A.z0.ArrowHorizontal|A.z0.HomeAndEnd|A.z0.Backspace|A.z0.PageUpDown,preventScroll:!0,getNextFocusable:V,focusInStrategy:a},t[3]=n,t[4]=a,t[5]=o):o=t[5],(0,C.G)(o)}(_),t[5]===Symbol.for("react.memo_cache_sentinel")?(j={containerRef:p,onFocusChange:Q},t[5]=j):j=t[5],function(e){const t=(0,d.c)(11),{containerRef:n,onFocusChange:r}=e,o=a.useRef(""),i=a.useRef(0),s=a.useRef(r),{safeSetTimeout:l,safeClearTimeout:c}=(0,x.A)();let u,m,h;t[0]!==r?(u=()=>{s.current=r},m=[r],t[0]=r,t[1]=u,t[2]=m):(u=t[1],m=t[2]),a.useEffect(u,m),t[3]!==n?(h=e=>{if(!e)return;if(!n.current)return;const t=n.current,r=Array.from(t.querySelectorAll('[role="treeitem"]')),a=r.findIndex(N);let o=(l=a,(i=r).map((e,t)=>i[(l+t)%i.length]));var i,l;1===e.length&&(o=o.slice(1));const c=o.find(t=>S(t).toLowerCase().startsWith(e.toLowerCase()));c&&s.current(c)},t[3]=n,t[4]=h):h=t[4];const p=h;let v,f;t[5]!==n||t[6]!==p||t[7]!==c||t[8]!==l?(v=()=>{if(!n.current)return;const e=n.current,t=function(e){!e.key||e.key.length>1||" "===e.key||e.ctrlKey||e.altKey||e.metaKey||(o.current=o.current+e.key,p(o.current),c(i.current),i.current=l(()=>o.current="",300),e.preventDefault(),e.stopPropagation())};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)},f=[n,p,c,l],t[5]=n,t[6]=p,t[7]=c,t[8]=l,t[9]=v,t[10]=f):(v=t[9],f=t[10]),a.useEffect(v,f)}(j);const R=a.useRef(null);if(null===R.current){let e;t[6]===Symbol.for("react.memo_cache_sentinel")?(e=new Map,t[6]=e):e=t[6],R.current=e}let z,P;t[7]===Symbol.for("react.memo_cache_sentinel")?(z={announceUpdate:b,expandedStateCache:R},t[7]=z):z=t[7],t[8]!==f?(P=(0,r.jsx)(y.A,{role:"status","aria-live":"polite","aria-atomic":"true",children:f}),t[8]=f,t[9]=P):P=t[9];const M=h||!1;let L,U,$;return t[10]!==c?(L=(0,m.$)(c,"prc-TreeView-TreeViewRootUlStyles-eZtxW"),t[10]=c,t[11]=L):L=t[11],t[12]!==n||t[13]!==o||t[14]!==i||t[15]!==s||t[16]!==u||t[17]!==M||t[18]!==L?(U=(0,r.jsx)("ul",{ref:p,role:"tree","aria-label":n,"aria-labelledby":o,"data-omit-spacer":s,"data-truncate-text":M,onMouseDown:T,className:L,style:u,children:i}),t[12]=n,t[13]=o,t[14]=i,t[15]=s,t[16]=u,t[17]=M,t[18]=L,t[19]=U):U=t[19],t[20]!==U||t[21]!==P?($=(0,r.jsx)(D.Provider,{value:z,children:(0,r.jsxs)(r.Fragment,{children:[P,U]})}),t[20]=U,t[21]=P,t[22]=$):$=t[22],$};U.displayName="TreeView";const $=a.forwardRef(({id:e,containIntrinsicSize:t,current:n=!1,defaultExpanded:o,expanded:i,onExpandedChange:s,onSelect:l,children:c,className:h,"aria-label":p,"aria-labelledby":v},f)=>{const[g,w]=(0,k.H)(c,{leadingAction:J,leadingVisual:Z,trailingVisual:G}),{expandedStateCache:y}=a.useContext(D),x=(0,b.B)(),S=(0,b.B)(),C=(0,b.B)(),[T,A]=function({name:e="custom",defaultValue:t,value:n,onChange:r}){const[o,i]=a.useState(null!=n?n:t),s=a.useRef(null),l=a.useRef(r);a.useEffect(()=>{l.current=r}),null===s.current&&(s.current=void 0!==n);const c=a.useCallback(e=>{var t;const n="function"==typeof e?e(o):e;!1===s.current&&i(n),null===(t=l.current)||void 0===t||t.call(l,n)},[o]);return a.useEffect(()=>{s.current,s.current},[e,n]),!0===s.current?[n,c]:[o,c]}({name:e,defaultValue:()=>{var t,r,a;return null!==(t=null!==(r=null===(a=y.current)||void 0===a?void 0:a.get(e))&&void 0!==r?r:o)&&void 0!==t?t:n},value:null!==i&&i,onChange:s}),{level:V}=a.useContext(L),{hasSubTree:I,subTree:E,childrenWithoutSubTree:_}=function(e){const t=(0,d.c)(8);let n,r;t[0]!==e?(r=a.Children.toArray(e).find(q),t[0]=e,t[1]=r):r=t[1];const o=r;let i;t[2]!==e?(i=a.Children.toArray(e).filter(O),t[2]=e,t[3]=i):i=t[3];const s=i,l=Boolean(o);let c;return t[4]!==s||t[5]!==o||t[6]!==l?(c={subTree:o,childrenWithoutSubTree:s,hasSubTree:l},t[4]=s,t[5]=o,t[6]=l,t[7]=c):c=t[7],n=c,n}(w),[j,R]=a.useState(!I),[N,z]=a.useState(!1),P=a.useCallback(t=>{var n;A(t),null===(n=y.current)||void 0===n||n.set(e,t)},[e,A,y]),M=a.useCallback(e=>{P(!T),null==e||e.stopPropagation()},[T,P]),U=a.useCallback(e=>{switch(e.key){case"Enter":case" ":l?l(e):M(e),e.stopPropagation();break;case"ArrowRight":if(e.altKey||e.metaKey)return;e.preventDefault(),e.stopPropagation(),P(!0);break;case"ArrowLeft":if(e.altKey||e.metaKey)return;e.preventDefault(),e.stopPropagation(),P(!1)}},[l,P,M]),$=[g.leadingVisual?S:null,g.trailingVisual?C:null].filter(Boolean);return(0,r.jsx)(L.Provider,{value:{itemId:e,level:V+1,isSubTreeEmpty:j,setIsSubTreeEmpty:R,isExpanded:T,setIsExpanded:P,leadingVisualId:S,trailingVisualId:C},children:(0,r.jsxs)("li",{className:(0,m.$)("PRIVATE_TreeView-item",h,"prc-TreeView-TreeViewItem-ShJr0"),ref:f,tabIndex:0,id:e,role:"treeitem","aria-label":p,"aria-labelledby":p?void 0:v||x,"aria-describedby":$.length?$.join(" "):void 0,"aria-level":V,"aria-expanded":(!j||T&&I)&&null!==i?T:void 0,"aria-current":n?"true":void 0,"aria-selected":N?"true":"false","data-has-leading-action":!!g.leadingAction||void 0,onKeyDown:U,onFocus:e=>{var t;null===(t=e.currentTarget.firstElementChild)||void 0===t||t.scrollIntoView({block:"nearest",inline:"nearest"}),z(!0),e.stopPropagation()},onBlur:()=>z(!1),onClick:e=>{l?l(e):M(e),e.stopPropagation()},onAuxClick:e=>{l&&1===e.button&&l(e),e.stopPropagation()},children:[(0,r.jsxs)("div",{className:(0,m.$)("PRIVATE_TreeView-item-container","prc-TreeView-TreeViewItemContainer--2Rkn"),style:{"--level":V,contentVisibility:t?"auto":void 0,containIntrinsicSize:t},children:[(0,r.jsx)("div",{style:{gridArea:"spacer",display:"flex"},children:(0,r.jsx)(F,{level:V})}),g.leadingAction,I?(0,r.jsx)("div",{className:(0,m.$)("PRIVATE_TreeView-item-toggle",l&&"PRIVATE_TreeView-item-toggle--hover",1===V&&"PRIVATE_TreeView-item-toggle--end","prc-TreeView-TreeViewItemToggle-gWUdE","prc-TreeView-TreeViewItemToggleHover-nEgP-","prc-TreeView-TreeViewItemToggleEnd-t-AEB"),onClick:e=>{l&&M(e)},children:T?(0,r.jsx)(u.D3D,{size:12}):(0,r.jsx)(u.vKP,{size:12})}):null,(0,r.jsxs)("div",{id:x,className:(0,m.$)("PRIVATE_TreeView-item-content","prc-TreeView-TreeViewItemContent-f0r0b"),children:[g.leadingVisual,(0,r.jsx)("span",{className:(0,m.$)("PRIVATE_TreeView-item-content-text","prc-TreeView-TreeViewItemContentText-smZM-"),children:_}),g.trailingVisual]})]}),E]})})}),F=e=>{const t=(0,d.c)(3),{level:n}=e;let a,o;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a={width:"100%",display:"flex"},t[0]=a):a=t[0],t[1]!==n?(o=(0,r.jsx)("div",{style:a,children:Array.from({length:n-1}).map(ee)}),t[1]=n,t[2]=o):o=t[2],o};$.displayName="TreeView.Item";const B=e=>{const t=(0,d.c)(29),{count:n,state:o,children:i,"aria-label":s}=e,{announceUpdate:l}=a.useContext(D),{itemId:c,isExpanded:u,isSubTreeEmpty:m,setIsSubTreeEmpty:h}=a.useContext(L),p=a.useRef(null),v=a.useRef(null),[f,g]=a.useState(!1),[w,y]=a.useState(""),b=function(e){const t=a.useRef(e);return a.useEffect(()=>{t.current=e},[e]),t.current}(o),{safeSetTimeout:k}=(0,x.A)();let C,T,A,V,I,_,j;if(t[0]!==i||t[1]!==m||t[2]!==h||t[3]!==o?(C=()=>{void 0!==o&&"done"!==o||(m||i?m&&i&&h(!1):h(!0))},T=[o,m,h,i],t[0]=i,t[1]=m,t[2]=h,t[3]=o,t[4]=C,t[5]=T):(C=t[4],T=t[5]),a.useEffect(C,T),t[6]!==l||t[7]!==c||t[8]!==f||t[9]!==b||t[10]!==k||t[11]!==o?(A=()=>{const e=document.getElementById(c);if(e)if(y(S(e)),"loading"===b&&"done"===o){var t;const n=S(e);if(null!==(t=v.current)&&void 0!==t&&t.childElementCount?l(`${n} content loaded`):l(`${n} is empty`),f){const t=E(e);k(t?()=>{t.focus()}:()=>{e.focus()}),g(!1)}}else if("loading"===o){const t=S(e);l(`${t} content loading`)}},V=[f,b,o,c,l,v,k],t[6]=l,t[7]=c,t[8]=f,t[9]=b,t[10]=k,t[11]=o,t[12]=A,t[13]=V):(A=t[12],V=t[13]),a.useEffect(A,V),t[14]===Symbol.for("react.memo_cache_sentinel")?(I=()=>{const e=function(){g(!0)},t=function(e){e.relatedTarget&&g(!1)},n=p.current;if(n)return n.addEventListener("focus",e),n.addEventListener("blur",t),()=>{n.removeEventListener("focus",e),n.removeEventListener("blur",t)}},t[14]=I):I=t[14],t[15]!==o?(_=[p,o],t[15]=o,t[16]=_):_=t[16],a.useEffect(I,_),!u)return null;t[17]===Symbol.for("react.memo_cache_sentinel")?(j={listStyle:"none",padding:0,margin:0},t[17]=j):j=t[17];const R=s||w;let N,z,P;return t[18]!==i||t[19]!==n||t[20]!==o?(N="loading"===o?(0,r.jsx)(W,{ref:p,count:n}):i,t[18]=i,t[19]=n,t[20]=o,t[21]=N):N=t[21],t[22]!==m||t[23]!==o?(z=m&&"loading"!==o?(0,r.jsx)(K,{}):null,t[22]=m,t[23]=o,t[24]=z):z=t[24],t[25]!==z||t[26]!==R||t[27]!==N?(P=(0,r.jsxs)("ul",{role:"group",style:j,ref:v,"aria-label":R,children:[N,z]}),t[25]=z,t[26]=R,t[27]=N,t[28]=P):P=t[28],P};B.displayName="TreeView.SubTree";const H=()=>{const e=(0,d.c)(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsxs)("span",{className:(0,m.$)("prc-TreeView-TreeViewSkeletonItemContainerStyle-EB7p0","prc-TreeView-TreeViewItemSkeleton-fqk59","PRIVATE_TreeView-item-skeleton"),children:[(0,r.jsx)(P.N,{size:16,square:!0}),(0,r.jsx)(M.r,{className:"prc-TreeView-TreeItemSkeletonTextStyles-wnBY9"})]}),e[0]=t):t=e[0],t},W=a.forwardRef((e,t)=>{const n=(0,d.c)(15),{count:a}=e,o=(0,b.B)();if(a){let e,i,s,l;return n[0]!==a?(e=Array.from({length:a}).map(te),n[0]=a,n[1]=e):e=n[1],n[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.$)("PRIVATE_VisuallyHidden",g),n[2]=i):i=n[2],n[3]!==a?(s=(0,r.jsxs)("div",{className:i,children:["Loading ",a," items"]}),n[3]=a,n[4]=s):s=n[4],n[5]!==o||n[6]!==t||n[7]!==e||n[8]!==s?(l=(0,r.jsxs)($,{id:o,ref:t,children:[e,s]}),n[5]=o,n[6]=t,n[7]=e,n[8]=s,n[9]=l):l=n[9],l}let i,s,l;return n[10]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)(Z,{children:(0,r.jsx)(c.A,{size:"small"})}),s=(0,r.jsx)(z.A,{className:"fgColor-muted",children:"Loading..."}),n[10]=i,n[11]=s):(i=n[10],s=n[11]),n[12]!==o||n[13]!==t?(l=(0,r.jsxs)($,{id:o,ref:t,children:[i,s]}),n[12]=o,n[13]=t,n[14]=l):l=n[14],l}),K=a.forwardRef((e,t)=>{const n=(0,d.c)(4),a=(0,b.B)();let o,i;return n[0]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(z.A,{className:"fgColor-muted",children:"No items found"}),n[0]=o):o=n[0],n[1]!==t||n[2]!==a?(i=(0,r.jsx)($,{expanded:null,id:a,ref:t,children:o}),n[1]=t,n[2]=a,n[3]=i):i=n[3],i});function O(e){return!(a.isValidElement(e)&&e.type===B)}function q(e){return a.isValidElement(e)&&e.type===B}const Z=e=>{const t=(0,d.c)(13),{isExpanded:n,leadingVisualId:o}=a.useContext(L);let i;t[0]!==n||t[1]!==e.children?(i="function"==typeof e.children?e.children({isExpanded:n}):e.children,t[0]=n,t[1]=e.children,t[2]=i):i=t[2];const s=i;let l,c,u,h,p;return t[3]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.$)("PRIVATE_VisuallyHidden",g),t[3]=l):l=t[3],t[4]!==o||t[5]!==e.label?(c=(0,r.jsx)("div",{className:l,"aria-hidden":!0,id:o,children:e.label}),t[4]=o,t[5]=e.label,t[6]=c):c=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,m.$)("PRIVATE_TreeView-item-visual",f),t[7]=u):u=t[7],t[8]!==s?(h=(0,r.jsx)("div",{className:u,"aria-hidden":!0,children:s}),t[8]=s,t[9]=h):h=t[9],t[10]!==c||t[11]!==h?(p=(0,r.jsxs)(r.Fragment,{children:[c,h]}),t[10]=c,t[11]=h,t[12]=p):p=t[12],p};Z.displayName="TreeView.LeadingVisual";const G=e=>{const t=(0,d.c)(13),{isExpanded:n,trailingVisualId:o}=a.useContext(L);let i;t[0]!==n||t[1]!==e.children?(i="function"==typeof e.children?e.children({isExpanded:n}):e.children,t[0]=n,t[1]=e.children,t[2]=i):i=t[2];const s=i;let l,c,u,h,p;return t[3]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.$)("PRIVATE_VisuallyHidden",g),t[3]=l):l=t[3],t[4]!==e.label||t[5]!==o?(c=(0,r.jsx)("div",{className:l,"aria-hidden":!0,id:o,children:e.label}),t[4]=e.label,t[5]=o,t[6]=c):c=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,m.$)("PRIVATE_TreeView-item-visual",f),t[7]=u):u=t[7],t[8]!==s?(h=(0,r.jsx)("div",{className:u,"aria-hidden":!0,children:s}),t[8]=s,t[9]=h):h=t[9],t[10]!==c||t[11]!==h?(p=(0,r.jsxs)(r.Fragment,{children:[c,h]}),t[10]=c,t[11]=h,t[12]=p):p=t[12],p};G.displayName="TreeView.TrailingVisual";const J=e=>{const t=(0,d.c)(12),{isExpanded:n}=a.useContext(L);let o;t[0]!==n||t[1]!==e.children?(o="function"==typeof e.children?e.children({isExpanded:n}):e.children,t[0]=n,t[1]=e.children,t[2]=o):o=t[2];const i=o;let s,l,c,u,h;return t[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.$)("PRIVATE_VisuallyHidden",g),t[3]=s):s=t[3],t[4]!==e.label?(l=(0,r.jsx)("div",{className:s,"aria-hidden":!0,children:e.label}),t[4]=e.label,t[5]=l):l=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.$)("PRIVATE_TreeView-item-leading-action","prc-TreeView-TreeViewItemLeadingAction-VXx8I"),t[6]=c):c=t[6],t[7]!==i?(u=(0,r.jsx)("div",{className:c,"aria-hidden":!0,children:i}),t[7]=i,t[8]=u):u=t[8],t[9]!==l||t[10]!==u?(h=(0,r.jsxs)(r.Fragment,{children:[l,u]}),t[9]=l,t[10]=u,t[11]=h):h=t[11],h};J.displayName="TreeView.LeadingAction";const X=e=>{const t=(0,d.c)(9),{title:n,children:o,onRetry:i,onDismiss:s}=e,l=void 0===n?"Error":n,{itemId:c,setIsExpanded:u}=a.useContext(L);let m,h;return t[0]!==c||t[1]!==s||t[2]!==i||t[3]!==u?(m=e=>{setTimeout(()=>{const e=document.getElementById(c);null==e||e.focus()}),"confirm"===e?null==i||i():(u(!1),null==s||s())},t[0]=c,t[1]=s,t[2]=i,t[3]=u,t[4]=m):m=t[4],t[5]!==o||t[6]!==m||t[7]!==l?(h=(0,r.jsx)("div",{onKeyDown:ne,children:(0,r.jsx)(w.K,{title:l,onClose:m,confirmButtonContent:"Retry",cancelButtonContent:"Dismiss",children:o})}),t[5]=o,t[6]=m,t[7]=l,t[8]=h):h=t[8],h};X.displayName="TreeView.ErrorDialog";const Y=Object.assign(U,{Item:$,SubTree:B,LeadingAction:J,LeadingVisual:Z,TrailingVisual:G,DirectoryIcon:()=>{const e=(0,d.c)(3),{isExpanded:t}=a.useContext(L),n=t?u.OpE:u.mL$;let o,i;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.$)("PRIVATE_TreeView-directory-icon","prc-TreeView-TreeViewDirectoryIcon-PHbeP"),e[0]=o):o=e[0],e[1]!==n?(i=(0,r.jsx)("div",{className:o,children:(0,r.jsx)(n,{})}),e[1]=n,e[2]=i):i=e[2],i},ErrorDialog:X});function Q(e){e instanceof HTMLElement&&e.focus()}function ee(e,t){return(0,r.jsx)("div",{className:(0,m.$)("PRIVATE_TreeView-item-level-line","prc-TreeView-TreeViewItemLevelLine-KPSSL")},t)}function te(e,t){return(0,r.jsx)(H,{"aria-hidden":!0},t)}function ne(e){["Backspace","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Enter"].includes(e.key)&&e.stopPropagation()}ee.displayName="_temp2",te.displayName="_temp3";var re=n(15115),ae=n(80736),oe=n(9448),ie=n(55682),se=n(23093),le=n(48461),ce=n(55285),de=n(41273),ue=n(80258);function me(e,t){let n=e.map(e=>({...e,fileType:t?.getFileTypeForModel(e)}));return n=n.filter(e=>!e.name.startsWith(".")),n.sort((e,t)=>"directory"===e.type&&"directory"!==t.type?-1:"directory"!==e.type&&"directory"===t.type?1:e.name.localeCompare(t.name)),n}function he(e){const{item:t,contents:n,current:o,documentRegistry:i,onContextMenu:s,onSelect:l}=e,c=(0,a.useRef)(null),[d,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1),p=(0,a.useCallback)(()=>{h(!0),n.get(t.path).then(e=>{h(!1),u(me(e.content,i))}).catch(()=>{h(!1)})},[n,t,i]),v=(0,a.useCallback)(async e=>{null===d&&e&&p()},[d,t,n]);return(0,r.jsxs)(Y.Item,{ref:c,id:`${t.type}-${t.name}`,onExpandedChange:v,onSelect:()=>{l(t,p)},current:t.path===o?.path,children:[(0,r.jsx)(Y.LeadingVisual,{children:(0,r.jsx)(Y.DirectoryIcon,{})}),(0,r.jsx)("span",{onContextMenu:e=>{e.preventDefault(),o?.path!==t.path&&l(t,p),s(c)},children:t.name}),(0,r.jsx)(Y.SubTree,{state:m?"loading":(d?.length??-1)>=0?"done":"initial",children:d?.map(e=>"directory"===e.type?(0,r.jsx)(he,{item:e,contents:n,current:o,documentRegistry:i,onContextMenu:s,onSelect:l},e.name):(0,r.jsx)(pe,{item:e,current:e.path===o?.path,onSelect:e=>l(e,p),onContextMenu:s},e.name))})]})}function pe(e){const{item:t,current:n,onSelect:o,onContextMenu:i}=e,s=(0,a.useRef)(null),l=t.fileType?.icon;return(0,r.jsxs)(Y.Item,{ref:s,id:`${t.type}-${t.name}`,current:n,onSelect:()=>{o(t)},children:[(0,r.jsx)(Y.LeadingVisual,{children:l?(0,r.jsx)(l.react,{tag:"span"}):(0,r.jsx)(u.oSV,{})}),(0,r.jsx)("span",{onContextMenu:e=>{e.preventDefault(),n||o(t),i(s)},children:t.name})]},t.name)}const ve=1048576;function fe(e){const{contents:t,localContents:n,documentRegistry:d}=e,u=(0,ce.aq)(),{trackAsyncTask:m}=(0,de.d)(),[h,p]=(0,a.useState)(null),[v,f]=(0,a.useState)(!0),[g,w]=(0,a.useState)(null),[y,b]=(0,a.useState)(null),[x,k]=(0,a.useState)(!1),[S,C]=(0,a.useState)(!1),T=(0,a.useCallback)(()=>{t.get("").then(e=>{f(!1),p(me(e.content,d))}).catch(e=>{f(!1),console.error(`Failed to fetch folder '' content for manager ${t.serverSettings.appUrl}.`,e)})},[t]);(0,a.useEffect)(()=>{T()},[T]);const A=(0,a.useCallback)(async e=>{const n=()=>{if(!u())return Promise.reject(`Failed to upload ${e.name}; StorageBrowser component is unmounted.`)};n();const r=e.size>ve,a=g?"directory"===g.type?g.path:o.PathExt.dirname(g.path):"",s=a?o.PathExt.join(a,e.name):e.name,l=e.name,c=async(r,a)=>{n();const o=new FileReader;o.readAsDataURL(r),await new Promise((t,n)=>{o.onload=t,o.onerror=t=>n(`Failed to upload "${e.name}":`+t)}),n();const i=o.result.split(",")[1],c={type:"file",format:"base64",name:l,chunk:a,content:i};return await t.save(s,c)},d={error:{message:t=>{const n=`Failed to upload ${e.name}.`;return console.error(n,t),n}},pending:{message:`Uploading ${e.name}…`},success:{message:()=>`${e.name} uploaded.`}};if(!r){const t=c(e);return m(t,d),t.then(()=>{g?g.refresh():T()}),t}{const t=new i.PromiseDelegate;m(t.promise,d);try{let n;for(let r=0;!n;r+=ve){const a=r+ve,o=a>=e.size,i=o?-1:a/ve,s=await c(e.slice(r,a),i);o&&(n=s,t.resolve(n))}return g?g.refresh():T(),n}catch(e){throw t.reject(e),e}}},[t,g,T]),V=(0,a.useCallback)(e=>{b(y===e?null:e)},[y]),I=(0,a.useCallback)(()=>{k(!0)},[]),E=(0,a.useCallback)(()=>{if(g){const e=t.delete(g.path);m(e,{success:{message:()=>`${g.path} deleted.`},pending:{message:`Deleting ${g.path}…`},error:{message:e=>{const t=`Failed to delete ${g.path}.`;return console.error(t,e),t}}}),e.finally(()=>{g.refresh()})}k(!1)},[t,g]),_=(0,a.useCallback)(()=>{C(!0)},[]),j=(0,a.useCallback)(()=>{g&&n&&t.get(g.path).then(e=>{const t=n?.save(e.path,e);m(t,{success:{message:()=>`${g.path} copied to local.`},pending:{message:`Copying to local ${g.path}…`},error:{message:e=>{const t=`Failed to copy to local ${g.path}.`;return console.error(t,e),t}}}),t.finally(()=>{g.refresh()}),C(!1)})},[n,g]),R=(0,a.useCallback)((e,t)=>{w(e.path===g?.path?null:{...e,refresh:t})},[g]);return(0,r.jsxs)(oe.az,{sx:{display:"grid",gridTemplateAreas:'"header" "content"'},children:[(0,r.jsxs)(oe.az,{sx:{gridArea:"header",display:"flex",alignItems:"center"},children:[(0,r.jsx)(s.A,{as:"h4",sx:{fontSize:"var(--text-title-size-small)",lineHeight:"var(--text-title-lineHeight-medium)",fontWeight:"var(--text-title-weight-medium)",flex:"1 1 auto"},children:"Contents Browser"}),(0,r.jsxs)(oe.az,{children:[(0,r.jsx)(l.K,{variant:"invisible","aria-label":"Refresh contents browser.",title:"Refresh contents browser.",icon:le.A,onClick:T}),(0,r.jsx)(ue.HF,{label:"Upload a file",multiple:!0,upload:A})]})]}),v?(0,r.jsx)(oe.az,{sx:{gridArea:"content",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40px",height:"100vh"},children:(0,r.jsx)(c.A,{})}):(0,r.jsx)(oe.az,{sx:{gridArea:"content"},children:h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Y,{children:h?.map(e=>"directory"===e.type?(0,r.jsx)(he,{item:e,contents:t,current:g,documentRegistry:d,onContextMenu:V,onSelect:R},e.name):(0,r.jsx)(pe,{item:e,current:g?.path===e.path,onSelect:e=>{R(e,T)},onContextMenu:V},e.name))}),(0,r.jsx)(re.W,{anchorRef:y??void 0,open:null!==y?.current,onOpenChange:()=>{b(null)},children:(0,r.jsx)(re.W.Overlay,{children:(0,r.jsxs)(ae.l,{children:[(0,r.jsx)(ae.l.Item,{title:"Delete the active item.",onSelect:I,children:"Delete…"}),n&&(0,r.jsx)(ae.l.Item,{title:"Copy the active item to the local drive.",onSelect:_,children:"Copy to local drive…"})]})})}),x&&(0,r.jsx)(ie.l,{title:(0,r.jsx)("span",{style:{color:"var(--fgColor-default)"},children:"Confirm deletion"}),onClose:()=>{k(!1)},footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>{k(!1)}},{buttonType:"danger",content:"Delete",onClick:()=>{E()}}],children:`Are you sure you want to delete ${g?.path}?`}),S&&(0,r.jsx)(ie.l,{title:(0,r.jsx)("span",{style:{color:"var(--fgColor-default)"},children:"Confirm copy to local"}),onClose:()=>{C(!1)},footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>{C(!1)}},{buttonType:"danger",content:"Copy to local",onClick:()=>{j()}}],children:`Are you sure you want to copy to local ${g?.path}?`})]}):(0,r.jsx)(se.E,{children:(0,r.jsx)(se.E.Heading,{children:"No contents"})})})]})}},45077:(e,t,n)=>{n.d(t,{O:()=>a});var r=n(18683);const a=e=>{const{code:t}=e;return(0,r.jsx)("pre",{style:{fontSize:"12px",wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:t})}},56944:(e,t,n)=>{n.d(t,{w:()=>i});var r=n(63711),a=n(9570),o=n(76199);const i=(e="api/ai-agents/v1")=>{const{configuration:t}=(0,a._O)(),{requestDatalayer:n}=(0,o.F)({notifyOnError:!1});return{createAIAgent:(a,o,i,s,l,{signal:c,baseUrl:d=e}={})=>n({url:r.URLExt.join(t.aiagentsRunUrl,d,"agents"),method:"POST",body:{document_id:a,document_type:o,runtime:{ingress:i,token:s,kernel_id:l}},signal:c}),getAIAgents:({signal:a,baseUrl:o=e}={})=>n({url:r.URLExt.join(t.aiagentsRunUrl,o,"agents"),method:"GET",signal:a}),deleteAIAgent:(a,{signal:o,baseUrl:i=e}={})=>n({url:r.URLExt.join(t.aiagentsRunUrl,i,"agents",a),method:"DELETE",signal:o}),getAIAgent:(a,{signal:o,baseUrl:i=e}={})=>n({url:r.URLExt.join(t.aiagentsRunUrl,i,"agents",a),method:"GET",signal:o}),patchAIAgent:(a,o,i,s,{signal:l,baseUrl:c=e}={})=>n({url:r.URLExt.join(t.aiagentsRunUrl,c,"agents",a),method:"PATCH",body:{runtime:o&&i&&s?{ingress:o,token:i,kernel_id:s}:null},signal:l})}}},59759:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(52908),a=n.n(r),o=n(10293),i=n.n(o)()(a());i.push([e.id,'.prc-AvatarStack-AvatarStack-N-r3C{--avatar-border-width:1px;--mask-size:calc(100% + var(--avatar-border-width)*2);--mask-start:-1;--opacity-step:15%;display:flex;height:var(--avatar-stack-size);isolation:isolate;min-width:var(--avatar-stack-size);position:relative}.prc-AvatarStack-AvatarStack-N-r3C:where([data-variant=cascade]){--overlap-size:calc(var(--avatar-stack-size)*0.55);--overlap-size-avatar-three-plus:calc(var(--avatar-stack-size)*0.85)}.prc-AvatarStack-AvatarStack-N-r3C:where([data-variant=stack]){--overlap-size:calc(var(--avatar-stack-size)*0.55);--overlap-size-avatar-three-plus:calc(var(--avatar-stack-size)*0.55)}@media screen and (max-width:calc(48rem - 0.02px)){.prc-AvatarStack-AvatarStack-N-r3C:where([data-responsive]){--avatar-stack-size:var(--stackSize-narrow)}}@media screen and (min-width:48rem){.prc-AvatarStack-AvatarStack-N-r3C:where([data-responsive]){--avatar-stack-size:var(--stackSize-regular)}}@media screen and (min-width:87.5rem){.prc-AvatarStack-AvatarStack-N-r3C:where([data-responsive]){--avatar-stack-size:var(--stackSize-wide)}}.prc-AvatarStack-AvatarStack-N-r3C:where([data-avatar-count="1"][data-shape=circle]) .prc-AvatarStack-AvatarItem-nS1mt{box-shadow:0 0 0 var(--avatar-border-width) var(--avatar-borderColor,var(--color-avatar-border))}.prc-AvatarStack-AvatarStack-N-r3C:where([data-avatar-count="1"][data-shape=square]) .prc-AvatarStack-AvatarItem-nS1mt{box-shadow:1px 0 #000}.prc-AvatarStack-AvatarStack-N-r3C:where([data-avatar-count="1"][data-shape=square][data-align-right]) .prc-AvatarStack-AvatarItem-nS1mt{box-shadow:-1px 0 #000}.prc-AvatarStack-AvatarStack-N-r3C:where([data-avatar-count="2"]){min-width:calc(var(--avatar-stack-size) + var(--avatar-stack-size) - var(--overlap-size))}.prc-AvatarStack-AvatarStack-N-r3C:where([data-avatar-count="3"][data-variant=cascade]){min-width:calc(var(--avatar-stack-size) + var(--avatar-stack-size) - var(--overlap-size) + var(--avatar-stack-size) - var(--overlap-size-avatar-three-plus))}.prc-AvatarStack-AvatarStack-N-r3C:where([data-avatar-count="3"][data-variant=stack]){min-width:calc(var(--avatar-stack-size) + (var(--avatar-stack-size) - var(--overlap-size-avatar-three-plus))*2)}.prc-AvatarStack-AvatarStack-N-r3C:where([data-avatar-count="3+"][data-variant=cascade]){min-width:calc(var(--avatar-stack-size) + var(--avatar-stack-size) - var(--overlap-size) + (var(--avatar-stack-size) - var(--overlap-size-avatar-three-plus))*2)}.prc-AvatarStack-AvatarStack-N-r3C:where([data-avatar-count="3+"][data-variant=stack]){min-width:calc(var(--avatar-stack-size) + (var(--avatar-stack-size) - var(--overlap-size-avatar-three-plus))*3);--overlap-size:var(--overlap-size-avatar-three-plus)}.prc-AvatarStack-AvatarStack-N-r3C:where([data-align-right]){--mask-start:1;direction:rtl}.prc-AvatarStack-AvatarStackBody-mSyoJ{display:flex;position:absolute}.prc-AvatarStack-AvatarStackBody-mSyoJ:where([data-disable-expand]){position:relative}.prc-AvatarStack-AvatarItem-nS1mt{--avatarSize-regular:var(--avatar-stack-size);display:flex;flex-shrink:0;height:var(--avatar-stack-size);overflow:hidden;position:relative;transition:margin .2s ease-in-out,opacity .2s ease-in-out,mask-position .2s ease-in-out,mask-size .2s ease-in-out;width:var(--avatar-stack-size)}.prc-AvatarStack-AvatarStack-N-r3C:where([data-shape=circle]) .prc-AvatarStack-AvatarItem-nS1mt:is(img){box-shadow:0 0 0 var(--avatar-border-width) transparent}.prc-AvatarStack-AvatarStack-N-r3C:where([data-shape=square]) .prc-AvatarStack-AvatarItem-nS1mt:is(img){box-shadow:1px 0 #fff}.prc-AvatarStack-AvatarStack-N-r3C:where([data-shape=square][data-align-right]) .prc-AvatarStack-AvatarItem-nS1mt:is(img){box-shadow:-1px 0 #fff}.prc-AvatarStack-AvatarItem-nS1mt:first-child{margin-inline-start:0}.prc-AvatarStack-AvatarItem-nS1mt:nth-child(n+2){margin-inline-start:calc(var(--overlap-size)*-1);mask-composite:exclude;mask-position:calc((var(--avatar-stack-size) - var(--overlap-size))*var(--mask-start) - var(--avatar-border-width)) center,0 0;mask-repeat:no-repeat,no-repeat;mask-size:var(--mask-size) var(--mask-size),auto;padding:.1px}.prc-AvatarStack-AvatarStack-N-r3C:where([data-shape=circle]) .prc-AvatarStack-AvatarItem-nS1mt:nth-child(n+2){mask-image:radial-gradient(at 50% 50%,#000 70%,transparent 71%),linear-gradient(#000 0 0)}.prc-AvatarStack-AvatarStack-N-r3C:where([data-shape=square]) .prc-AvatarStack-AvatarItem-nS1mt:nth-child(n+2){mask-image:linear-gradient(at 50% 50%,#000 70%,transparent 71%),linear-gradient(#000 0 0)}.prc-AvatarStack-AvatarStack-N-r3C:where([data-variant=cascade]) .prc-AvatarStack-AvatarItem-nS1mt:nth-child(n+3){--overlap-size:var(--overlap-size-avatar-three-plus);opacity:calc(100% - var(--opacity-step)*2)}.prc-AvatarStack-AvatarStack-N-r3C:where([data-variant=cascade]) .prc-AvatarStack-AvatarItem-nS1mt:nth-child(n+4){opacity:calc(100% - var(--opacity-step)*3)}.prc-AvatarStack-AvatarStack-N-r3C:where([data-variant=cascade]) .prc-AvatarStack-AvatarItem-nS1mt:nth-child(n+5){opacity:calc(100% - var(--opacity-step)*4)}.prc-AvatarStack-AvatarStack-N-r3C:where([data-shape=square]) .prc-AvatarStack-AvatarItem-nS1mt:first-child{z-index:5}.prc-AvatarStack-AvatarStack-N-r3C:where([data-shape=square]) .prc-AvatarStack-AvatarItem-nS1mt:nth-child(2){z-index:4}.prc-AvatarStack-AvatarStack-N-r3C:where([data-shape=square]) .prc-AvatarStack-AvatarItem-nS1mt:nth-child(3){z-index:3}.prc-AvatarStack-AvatarStack-N-r3C:where([data-shape=square]) .prc-AvatarStack-AvatarItem-nS1mt:nth-child(4){z-index:2}.prc-AvatarStack-AvatarStack-N-r3C:where([data-shape=square]) .prc-AvatarStack-AvatarItem-nS1mt:nth-child(5){z-index:1}.prc-AvatarStack-AvatarItem-nS1mt:nth-child(n+6){opacity:0;visibility:hidden}.prc-AvatarStack-AvatarStackBody-mSyoJ:not([data-disable-expand]):focus-within,.prc-AvatarStack-AvatarStackBody-mSyoJ:not([data-disable-expand]):hover{width:auto}:is(.prc-AvatarStack-AvatarStackBody-mSyoJ:not([data-disable-expand]):hover,.prc-AvatarStack-AvatarStackBody-mSyoJ:not([data-disable-expand]):focus-within) .prc-AvatarStack-AvatarItem-nS1mt{--mask-size:100%;margin-inline-start:var(--base-size-4,.25rem);mask-position:calc(var(--avatar-stack-size)*var(--mask-start)) center,0 0;opacity:1;visibility:visible}:is(:is(.prc-AvatarStack-AvatarStackBody-mSyoJ:not([data-disable-expand]):hover,.prc-AvatarStack-AvatarStackBody-mSyoJ:not([data-disable-expand]):focus-within) .prc-AvatarStack-AvatarItem-nS1mt):first-child{margin-inline-start:0}',""]);const s=i},66210:(e,t,n)=>{n.d(t,{G:()=>i});var r=n(9387),a=n(10069),o=n(56944);function i(e){const{getAIAgent:t}=(0,o.w)(),{aiAgents:n,addAIAgent:i,deleteAIAgent:s,updateAIAgent:l}=(0,a.Ks)();return(0,r.useEffect)(()=>{let r;const a=setInterval(async()=>{r=new AbortController;try{const a=await t(e,{signal:r.signal});if(!a.success)return void s(e);const o=n.find(t=>t.documentId===e),c=a.agent.runtime?.id;o?o.runtimeId!==c&&l(e,c):i({documentId:e,runtimeId:c})}catch(t){s(e)}},6e4);return()=>{r?.abort("Component unmounted"),clearInterval(a)}},[n,e]),n.find(t=>t.documentId===e)}},73615:(e,t,n)=>{n.d(t,{P:()=>V});var r=n(18683),a=n(9387),o=n(34164),i=n(77606),s=n(2918),l=n(46186),c=n.n(l),d=n(59759);c()(d.A,{insert:"head",singleton:!1}),d.A.locals;const u={disabled:"[disabled]",hidden:"[hidden]",inert:"[inert]",negativeTabIndex:'[tabindex="-1"]'},m=["a[href]","button","summary","select","input:not([type=hidden])","textarea",'[tabindex="0"]',"audio[controls]","video[controls]","[contenteditable]"].map(e=>`${e}:not(${Object.values(u).join("):not(")})`);function h(e,t){if(!e||p(e))return!1;const n=v(e,[e]);return Boolean(n)}function p(e){const t=getComputedStyle(e),n=e.matches("[disabled], [hidden], [inert]"),r="none"===t.display||"hidden"===t.visibility;return n||r}function v(e,t){if(!e)return;const n=t.find(t=>t===e),r=p(e);if(e.matches(m.join(", "))&&!n&&!r)return e;for(const n of e.children)if(v(n,t))return!0}var f=n(70070);const g=(e,t)=>a.Children.map(e,e=>a.isValidElement(e)?a.cloneElement(e,{...e.props,square:"square"===t||void 0,className:(0,o.$)(e.props.className,"pc-AvatarItem","prc-AvatarStack-AvatarItem-nS1mt")}):e),w=({disableExpand:e,hasInteractiveChildren:t,stackContainer:n,children:a})=>(0,r.jsx)("div",{"data-disable-expand":e?"":void 0,className:(0,o.$)({"pc-AvatarStack--disableExpand":e},"pc-AvatarStackBody","prc-AvatarStack-AvatarStackBody-mSyoJ"),tabIndex:t||e?void 0:0,ref:n,children:a});w.displayName="AvatarStackBody";const y=({children:e,variant:t="cascade",shape:n="circle",alignRight:l,disableExpand:c,size:d,className:u,style:m,sx:p})=>{const[v,y]=(0,a.useState)(!1),b=(0,a.useRef)(null),x=a.Children.count(e),k=(()=>{const t={narrow:[],regular:[],wide:[]};return a.Children.toArray(e).reduce((e,n)=>{if(!a.isValidElement(n))return e;for(const r of Object.keys(t))(0,s.W8)(n.props.size)?t[r].push(n.props.size[r]||i.E):t[r].push(n.props.size||i.E),e[r]=Math.min(...t[r]);return e},{narrow:i.E,regular:i.E,wide:i.E})})();return(0,a.useEffect)(()=>{if(b.current){const e=()=>{y(h(b.current))},t=new MutationObserver(e);return t.observe(b.current,{childList:!0}),e(),()=>{t.disconnect()}}},[]),(0,r.jsx)(f._,{as:"span","data-variant":t,"data-shape":n,"data-avatar-count":x>3?"3+":x,"data-align-right":l?"":void 0,"data-responsive":!d||(0,s.W8)(d)?"":void 0,className:(0,o.$)({"pc-AvatarStack--variant":t,"pc-AvatarStack--shape":n,"pc-AvatarStack--two":2===x,"pc-AvatarStack--three":3===x,"pc-AvatarStack--three-plus":x>3,"pc-AvatarStack--right":l},u,"prc-AvatarStack-AvatarStack-N-r3C"),style:{...d?(0,s.W8)(d)?{"--stackSize-narrow":`${d.narrow||i.E}px`,"--stackSize-regular":`${d.regular||i.E}px`,"--stackSize-wide":`${d.wide||i.E}px`}:{"--avatar-stack-size":`${d}px`}:{"--stackSize-narrow":`${k.narrow}px`,"--stackSize-regular":`${k.regular}px`,"--stackSize-wide":`${k.wide}px`},...m},sx:p,children:(0,r.jsxs)(w,{disableExpand:c,hasInteractiveChildren:v,stackContainer:b,children:[" ",g(e,n)]})})};y.displayName="AvatarStack";var b=n(45724),x=n(20061);const k=28,S="DatalayerSpacer",C=3e4;var T;!function(e){e.PROGRESS="var(--borderColor-accent-emphasis)",e.ERROR="var(--borderColor-danger-emphasis)",e.SUCCESS="var(--borderColor-success-emphasis)"}(T||(T={}));const A={"-1":T.ERROR,0:T.PROGRESS,1:T.SUCCESS};function V({awareness:e,currentUserHandle:t}){const[n,o]=(0,a.useState)([]);return(0,a.useEffect)(()=>{const n=()=>{const n=e.getStates();o(Array.from(n.values()).filter(e=>e.user&&e.user?.name!==t&&!(e.user?.agent??"").startsWith(S)).reduce((e,t)=>{const n=t.user,r=!((t.notification?.timestamp??0)+C<Date.now()),a=n.agent?{avatarUrl:"https://static.vecteezy.com/system/resources/previews/006/662/139/large_2x/artificial-intelligence-ai-processor-chip-icon-symbol-for-graphic-design-logo-web-site-social-media-mobile-app-ui-illustration-free-vector.jpg",color:n.color,displayName:n.agent,handle:"agent",initials:"AI",username:n.agent,notification:r?`${t.notification?.message} ${(0,b.g)(new Date(t.notification.timestamp))}`:void 0,notificationType:r&&void 0!==t.notification?.message_type?A[t.notification?.message_type.toString()]:void 0}:{avatarUrl:n.avatar_url,color:n.color,displayName:n.display_name,handle:n.name,initials:n.initials,username:n.username};return e.map(e=>e.username).includes(a.username)||e.push(a),e},[]))};n(),e.on("change",n);const r=setInterval(n,C/3);return()=>{clearInterval(r),e.off("change",n)}},[e,t]),(0,r.jsx)(y,{children:n.map(e=>{let t=`${e.displayName}\n${e.handle}`;return e.notification&&(t+=`\n${e.notification}`),(0,r.jsx)(i.A,{sx:{border:e.notificationType?`var(--borderWidth-thick) solid ${e.notificationType}`:"none"},title:t,src:e.avatarUrl?(0,x.$K)(e.avatarUrl):(n=e.color,a=e.initials,"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="12" fill="${n}" stroke="none" /><text x="12" y="12" fill="black">${a}</text></svg>`)),size:k},e.displayName);var n,a})})}},75345:(e,t,n)=>{n.d(t,{E:()=>l});var r=n(18683),a=n(71791),o=n(99180),i=n(38621),s=n(9387);function l(e){const{commandRegistry:t,runtimeDesc:n,sessionConnection:l}=e,[c,d]=(0,s.useState)();return(0,s.useEffect)(()=>{const e=()=>{d(l?.kernel?.status)};return e(),l?.statusChanged.connect(e),l?.connectionStatusChanged.connect(e),()=>{l?.statusChanged.disconnect(e),l?.connectionStatusChanged.disconnect(e)}},[l]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Q,{variant:"invisible",size:"small",leadingVisual:i.udU,disabled:!n?.location||"busy"===c,onClick:e=>t?.execute(a.nx.runAll),children:"Run all"}),(0,r.jsx)(o.Q,{variant:"invisible",size:"small",leadingVisual:i.wFz,disabled:!n?.location||"busy"!==c,onClick:e=>t?.execute(a.nx.interrupt),children:"Interrupt"})]})}},99913:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(52908),a=n.n(r),o=n(10293),i=n.n(o)()(a());i.push([e.id,'.prc-TreeView-TreeViewRootUlStyles-eZtxW{list-style:none;margin:0;padding:0}.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItem-ShJr0{outline:none}:is(.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItem-ShJr0):focus-visible>div,:is(.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItem-ShJr0).focus-visible>div{box-shadow:var(--boxShadow-thick,inset 0 0 0 .125rem) var(--fgColor-accent,var(--color-accent-fg))}@media (forced-colors:active){:is(.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItem-ShJr0):focus-visible>div,:is(.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItem-ShJr0).focus-visible>div{outline:2px solid HighlightText;outline-offset:-2}}[data-has-leading-action]:is(.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItem-ShJr0){--has-leading-action:1}.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemContainer--2Rkn{--level:1;--toggle-width:1rem;--min-item-height:2rem;border-radius:var(--borderRadius-medium,.375rem);color:var(--fgColor-default,var(--color-fg-default));cursor:pointer;display:grid;font-size:var(--text-body-size-medium,.875rem);grid-template-areas:"spacer leadingAction toggle content";grid-template-columns:var(--spacer-width) var(--leading-action-width) var(--toggle-width) 1fr;position:relative;width:100%;--leading-action-width:calc(var(--has-leading-action, 0)*1.5rem);--spacer-width:calc((var(--level) - 1)*(var(--toggle-width)/2))}:is(.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemContainer--2Rkn):hover{background-color:var(--control-transparent-bgColor-hover,var(--color-action-list-item-default-hover-bg))}@media (forced-colors:active){:is(.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemContainer--2Rkn):hover{outline:2px solid transparent;outline-offset:-2px}}@media (pointer:coarse){.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemContainer--2Rkn{--toggle-width:1.5rem;--min-item-height:2.75rem}}:is(.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemContainer--2Rkn):has(.prc-TreeView-TreeViewItemSkeleton-fqk59):hover{background-color:transparent;cursor:default}@media (forced-colors:active){:is(.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemContainer--2Rkn):has(.prc-TreeView-TreeViewItemSkeleton-fqk59):hover{outline:none}}.prc-TreeView-TreeViewRootUlStyles-eZtxW:where([data-omit-spacer=true]) .prc-TreeView-TreeViewItemContainer--2Rkn{grid-template-columns:0 0 0 1fr}.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItem-ShJr0[aria-current=true]>.prc-TreeView-TreeViewItemContainer--2Rkn{background-color:var(--control-transparent-bgColor-selected,var(--color-action-list-item-default-selected-bg))}:is(.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItem-ShJr0[aria-current=true]>.prc-TreeView-TreeViewItemContainer--2Rkn):after{background-color:var(--fgColor-accent,var(--color-accent-fg));border-radius:var(--borderRadius-medium,.375rem);content:"";height:1.5rem;left:calc(var(--base-size-8,.5rem)*-1);position:absolute;top:calc(50% - var(--base-size-12,.75rem));width:.25rem}@media (forced-colors:active){:is(.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItem-ShJr0[aria-current=true]>.prc-TreeView-TreeViewItemContainer--2Rkn):after{background-color:HighlightText}}.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemToggle-gWUdE{align-items:flex-start;color:var(--fgColor-muted,var(--color-fg-muted));display:flex;grid-area:toggle;height:100%;justify-content:center;padding-top:calc(var(--min-item-height)/2 - var(--base-size-12,.75rem)/2)}.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemToggleHover-nEgP-:hover{background-color:var(--control-transparent-bgColor-hover,var(--color-action-list-item-default-hover-bg))}.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemToggleEnd-t-AEB{border-bottom-left-radius:var(--borderRadius-medium,.375rem);border-top-left-radius:var(--borderRadius-medium,.375rem)}.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemContent-f0r0b{display:flex;gap:var(--stack-gap-condensed,.5rem);grid-area:content;height:100%;line-height:var(--custom-line-height,var(--text-body-lineHeight-medium,1.4285));padding:0 var(--base-size-8,.5rem);padding-bottom:calc((var(--min-item-height) - var(--custom-line-height, 1.3rem))/2);padding-top:calc((var(--min-item-height) - var(--custom-line-height, 1.3rem))/2)}.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemContentText-smZM-{flex:1 1 auto;width:0}.prc-TreeView-TreeViewRootUlStyles-eZtxW:where([data-truncate-text=true]) .prc-TreeView-TreeViewItemContentText-smZM-{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.prc-TreeView-TreeViewRootUlStyles-eZtxW:where([data-truncate-text=false]) .prc-TreeView-TreeViewItemContentText-smZM-{word-break:break-word}.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemVisual-dRlGq{align-items:center;color:var(--fgColor-muted,var(--color-fg-muted));display:flex;height:var(--custom-line-height,1.3rem)}.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemLeadingAction-VXx8I{color:var(--fgColor-muted,var(--color-fg-muted));display:flex;grid-area:leadingAction}:is(.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemLeadingAction-VXx8I)>button{flex-shrink:1}.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemLevelLine-KPSSL{border-color:var(--borderColor-muted,var(--color-border-muted));border-right:var(--borderWidth-thin,.0625rem) solid;height:100%;width:100%}@media (hover:hover){.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewItemLevelLine-KPSSL{border-color:transparent}.prc-TreeView-TreeViewRootUlStyles-eZtxW:focus-within .prc-TreeView-TreeViewItemLevelLine-KPSSL,.prc-TreeView-TreeViewRootUlStyles-eZtxW:hover .prc-TreeView-TreeViewItemLevelLine-KPSSL{border-color:var(--borderColor-muted,var(--color-border-muted))}}.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewDirectoryIcon-PHbeP{color:var(--treeViewItem-leadingVisual-iconColor-rest,var(--color-tree-view-item-directory-fill));display:grid}.prc-TreeView-TreeViewRootUlStyles-eZtxW .prc-TreeView-TreeViewVisuallyHidden-4-mPv{height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border-width:0;white-space:nowrap}.prc-TreeView-TreeViewSkeletonItemContainerStyle-EB7p0{align-items:center;column-gap:.5rem;display:flex;height:2rem}@media (pointer:coarse){.prc-TreeView-TreeViewSkeletonItemContainerStyle-EB7p0{height:2.75rem}}.prc-TreeView-TreeViewSkeletonItemContainerStyle-EB7p0:nth-of-type(5n+1){--tree-item-loading-width:67%}.prc-TreeView-TreeViewSkeletonItemContainerStyle-EB7p0:nth-of-type(5n+2){--tree-item-loading-width:47%}.prc-TreeView-TreeViewSkeletonItemContainerStyle-EB7p0:nth-of-type(5n+3){--tree-item-loading-width:73%}.prc-TreeView-TreeViewSkeletonItemContainerStyle-EB7p0:nth-of-type(5n+4){--tree-item-loading-width:64%}.prc-TreeView-TreeViewSkeletonItemContainerStyle-EB7p0:nth-of-type(5n+5){--tree-item-loading-width:50%}.prc-TreeView-TreeItemSkeletonTextStyles-wnBY9{width:var(--tree-item-loading-width,67%)}',""]);const s=i}}]);