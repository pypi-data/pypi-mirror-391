# NBotbb MCP Server
ä¸€ä¸ªåŸºäº Model Context Protocolï¼ˆMCPï¼‰çš„ä¸Šä¸‹æ–‡æœåŠ¡å™¨ï¼Œæä¾›å†œèµ„å•†å“æŸ¥è¯¢ä¸æ”¶è´§åœ°å€æå–èƒ½åŠ›ã€‚è¯¥æœåŠ¡å™¨ä½¿å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰èƒ½å¤Ÿç†è§£ç”¨æˆ·å…³äºå†œè¯ã€åŒ–è‚¥ç­‰å†œèµ„äº§å“çš„è‡ªç„¶è¯­è¨€æŸ¥è¯¢ï¼ˆåŒ…æ‹¬æœ‰æ•ˆæˆåˆ†ã€å“ç‰Œã€è§„æ ¼ç­‰ï¼‰ï¼Œå¹¶ä»æœ¬åœ°æ•°æ®åº“å®æ—¶æ£€ç´¢åº“å­˜ä¿¡æ¯ï¼›åŒæ—¶å¯ä»ä»»æ„æ¶ˆæ¯ä¸­ç²¾å‡†è§£æç»“æ„åŒ–æ”¶è´§åœ°å€ï¼Œå¹¶å†…ç½®å¯¹æ–‡æœ¬ã€å›¾ç‰‡ã€è¯­éŸ³ç­‰å¤šæ¨¡æ€è¾“å…¥çš„é€æ˜æ”¯æŒã€‚

ğŸ”— [Model Context Protocol å®˜ç½‘](https://modelcontextprotocol.io/)

---

## ğŸ§° æ ¸å¿ƒèƒ½åŠ›ï¼ˆMCP Toolsï¼‰

### 1. `agro_product_search`ï¼šå†œèµ„å•†å“æŸ¥è¯¢ä¸æ¨è   
ä»ç”¨æˆ·è¾“å…¥ä¸­è‡ªåŠ¨è¯†åˆ«å†œè¯/åŒ–è‚¥äº§å“ä¿¡æ¯ï¼Œå¹¶æŸ¥è¯¢æœ¬åœ°åº“å­˜ã€‚
- **é€‚ç”¨åœºæ™¯**ï¼šç”¨æˆ·è¯¢é—®â€œæœ‰æ²¡æœ‰è‰ç”˜è†¦ï¼Ÿâ€ã€â€œæ»¨å†œé‡‘ç‰¹200mlæœ‰è´§å—ï¼Ÿâ€
- **è¯†åˆ«å­—æ®µ**ï¼š
  - äº§å“åç§°ï¼ˆå¦‚â€œçƒ¯è‰é…®â€ï¼‰
  - æœ‰æ•ˆæˆåˆ†ï¼ˆå¦‚â€œçƒŸå˜§ç£ºéš†+è å»æ´¥â€ï¼‰
  - å“ç‰Œï¼ˆå¦‚â€œæ»¨å†œâ€ã€â€œå…ˆæ­£è¾¾â€ï¼‰
  - è§„æ ¼ï¼ˆå¦‚â€œ200æ¯«å‡â€ã€â€œ1å…¬æ–¤â€ï¼‰
  - ç”¨é€”ï¼ˆå¦‚â€œç‰ç±³ç”°é™¤è‰â€ã€â€œæ°´ç¨»é˜²è™«â€ï¼‰
- **æ•°æ®æº**ï¼šæœ¬åœ° SQLite æ•°æ®åº“ products.db
- **æ”¯æŒåå¥½**ï¼š
  - ä»·æ ¼æœ€ä½ï¼ˆ`cheapest`ï¼‰
  - ç”Ÿäº§æ—¥æœŸæœ€æ–°ï¼ˆ`recent`ï¼‰
  - æŠ˜æ‰£ä¼˜å…ˆï¼ˆ`discount`ï¼‰
- **è¾“å‡º**ï¼šç»“æ„åŒ–å•†å“åˆ—è¡¨ï¼ˆå«ä»·æ ¼ã€åº“å­˜ã€ç”Ÿäº§æ—¥æœŸã€æŠ˜æ‰£ä¿¡æ¯ï¼‰

---
### 2. `agro_product_recommend`ï¼šæ™ºèƒ½å†œèµ„æ¨è  
åŸºäºä½œç‰©ç±»å‹ã€ç—…è™«å®³ã€åœ°åŒºæ°”å€™ç­‰ä¸Šä¸‹æ–‡ï¼Œæ¨èæœ€åˆé€‚çš„å†œèµ„äº§å“ç»„åˆã€‚

- **é€‚ç”¨åœºæ™¯**ï¼šç”¨æˆ·è¯´â€œå±±ä¸œå°éº¦å¾—äº†é”ˆç—…æ€ä¹ˆåŠï¼Ÿâ€ã€â€œå—æ–¹æ°´ç¨»é˜²è™«ç”¨ä»€ä¹ˆè¯ï¼Ÿâ€
- **è¾“å…¥è§£æ**ï¼š
  - ä½œç‰©ï¼ˆå¦‚â€œå°éº¦â€ã€â€œæ°´ç¨»â€ï¼‰
  - ç—…å®³/è™«å®³ï¼ˆå¦‚â€œé”ˆç—…â€ã€â€œç¨»é£è™±â€ï¼‰
  - åœ°åŒºï¼ˆå¦‚â€œå±±ä¸œâ€ã€â€œåå—â€ï¼‰
  - ç”Ÿé•¿æœŸï¼ˆå¯é€‰ï¼‰
- **æ¨èé€»è¾‘**ï¼š
  - åŒ¹é…å†œä¸šçŸ¥è¯†åº“ + å½“åœ°ç”¨è¯ä¹ æƒ¯
  - æ’é™¤ç¦ç”¨/é«˜æ¯’äº§å“ï¼ˆç¬¦åˆå›½å®¶æ³•è§„ï¼‰
  - ä¼˜å…ˆæ¨èä½æ¯’ã€é«˜æ•ˆã€ç™»è®°ä½œç‰©åŒ¹é…çš„äº§å“
- **è¾“å‡º**ï¼š
  - æ¨èå•†å“åˆ—è¡¨ï¼ˆå«ä½¿ç”¨å‰‚é‡ã€å®‰å…¨é—´éš”æœŸï¼‰
  - ç®€æ˜ä½¿ç”¨å»ºè®®ï¼ˆå¦‚â€œäº©ç”¨30mlï¼Œå…‘æ°´30kgå–·é›¾â€ï¼‰

> ğŸ’¡ æ­¤å·¥å…·å¯ä¸ `agro_product_search` è”åŠ¨ï¼šå…ˆæ¨èï¼Œå†æŸ¥åº“å­˜ã€‚

---

### 3. `extract_delivery_address`ï¼šæ”¶è´§åœ°å€æ™ºèƒ½æå–
ä»ä»»æ„ç”¨æˆ·æ¶ˆæ¯ä¸­(æ–‡æœ¬/å›¾ç‰‡/è¯­éŸ³)ç²¾å‡†è§£æå®Œæ•´æ”¶è´§ä¿¡æ¯ã€‚
- **é€‚ç”¨åœºæ™¯**ï¼šç”¨æˆ·å‘æ¶ˆæ¯â€œæå›› 13912345678 ä¸Šæµ·æµ¦ä¸œé™†å®¶å˜´ç¯è·¯1000å·â€
- **è¯†åˆ«å­—æ®µ**ï¼š
  - å§“åã€æ‰‹æœºå·
  - çœã€å¸‚ã€åŒºï¼ˆè‡ªåŠ¨è¡¥å…¨å±‚çº§ï¼Œå¦‚â€œæµ¦ä¸œâ€ â†’ â€œä¸Šæµ·å¸‚ æµ¦ä¸œæ–°åŒºâ€ï¼‰
  - è¯¦ç»†åœ°å€ã€é‚®ç¼–ï¼ˆå¯é€‰ï¼‰
- **æ™ºèƒ½æ¸…æ´—**ï¼š
  - å»é‡ï¼ˆå¦‚â€œåŒ—äº¬å¸‚ åŒ—äº¬å¸‚â€ â†’ â€œåŒ—äº¬å¸‚â€ï¼‰
  - çº é”™ï¼ˆå¦‚â€œæµ¦æ±â€ â†’ â€œæµ¦ä¸œâ€ï¼‰
  - æ ‡å‡†åŒ–ï¼ˆç»Ÿä¸€â€œè·¯/è¡—/å··â€æ ¼å¼ï¼‰
- **è¾“å‡º**ï¼šæ ‡å‡†åŒ– JSON åœ°å€å¯¹è±¡ï¼Œä¾›ä¸‹å•æˆ–ç¡®è®¤ä½¿ç”¨

---

ğŸ’¡ å¤šæ¨¡æ€è¾“å…¥ï¼ˆæ–‡æœ¬/å›¾ç‰‡/è¯­éŸ³ï¼‰ç”±æœåŠ¡å™¨å†…éƒ¨ç»Ÿä¸€å¤„ç†ï¼ŒLLM æ— éœ€é¢å¤–è°ƒç”¨ OCR æˆ– ASR å·¥å…·ã€‚
å›¾ç‰‡ â†’ è°ƒç”¨ Qwen-VL è¯†åˆ«å†œè¯åŒ…è£…
è¯­éŸ³ â†’ è°ƒç”¨é€šä¹‰åƒé—® ASR è½¬å†™ä¸ºæ–‡æœ¬
æ‰€æœ‰è¾“å…¥æœ€ç»ˆè½¬åŒ–ä¸ºç»“æ„åŒ–ä¸Šä¸‹æ–‡ï¼Œä¾›ä¸Šè¿°ä¸¤ä¸ªå·¥å…·ä½¿ç”¨

## ç¼–è¯‘
```bash
conda create env -n uvx python=3.10 -y
conda activate uvx
pip install build twine
cd ~/autodl-tmp/servers/src/nbotbb/
python -m build .
twine upload dist/*
pypi-AgEIcHlwaS5vcmcCJDM0YmQ1N2EzLTQzZjEtNDMxNy05ZTZjLTUwZjU1NmE2NTMxZQACKlszLCI4NWJmOWE2My0wNDdkLTQ0MjItODAzNS1iZTRlMjUxN2VhNTciXQAABiA9sPWebBkkBvgZo4oegT8zA5bbhLFZP9QVswI1OdJRlA
source /etc/network_turbo
unset http_proxy && unset https_proxy
pip install --index-url https://pypi.org/simple/ your-package-name   http://mirrors.aliyun.com/pypi/simple
pip install -i http://mirrors.aliyun.com/pypi/simple/ nbotbb-w1bssjszkadbb-001

```
npx @modelcontextprotocol/inspector python -m mcp_server_nbotbb
[
    {
        "product_name": "çƒ¯è‰é…®",
        "brand": "æ»¨å†œé‡‘ç‰¹",
        "specification": "200ml",
        "main_effect": "é™¤è‰"
    }
]


## ğŸš€ ç™¾ç‚¼éƒ¨ç½²
- ä½¿ç”¨ uvx

```bash
# å®‰è£…å½“å‰é¡¹ç›®ï¼ˆå¯ç¼–è¾‘æ¨¡å¼ï¼‰
pip install -e .

# æµ‹è¯•å‘½ä»¤æ˜¯å¦å¯ç”¨
mcp-server-nbotbb --local-name "æµ‹è¯•"
pip install -i http://mirrors.aliyun.com/pypi/simple/ mcp-server-nbotbb==0.0.1
```

```json
{
  "mcpServers": {
    "NBotbb": {
      "command": "uvx",
      "args": ["mcp-server-nbotbb"]  
    }
  }
}
```
https://pypi.org/project/mcp-server-nbotbb/0.8.2/

## ğŸŒ å¤šæ¨¡æ€è¾“å…¥è‡ªåŠ¨å¤„ç†ï¼ˆé€æ˜åŒ–ï¼‰
| è¾“å…¥ç±»å‹ | å¤„ç†æ–¹å¼ |
|---------|----------|
| æ–‡æœ¬ | çº¯æ–‡æœ¬è¾“å…¥ï¼Œæ— éœ€å¤„ç† |
| å›¾ç‰‡ | è°ƒç”¨ Qwen-VL è¯†åˆ«åŒ…è£…ï¼Œè¿”å›ç»“æ„åŒ–ç»“æœ |
| è¯­éŸ³ | è°ƒç”¨é€šä¹‰åƒé—® ASR è½¬å†™ä¸ºæ–‡æœ¬ï¼Œè¿”å›ç»“æ„åŒ–ç»“æœ |
æœ€ç»ˆï¼Œæ‰€æœ‰å·¥å…·æ¥æ”¶çš„éƒ½æ˜¯**å¹²å‡€çš„ç»“æ„åŒ–æ–‡æœ¬ä¸Šä¸‹æ–‡**ã€‚

---


# ğŸ› ï¸ MCP å·¥å…·å®šä¹‰ï¼ˆä¾› LLM è°ƒç”¨ï¼‰
- agro_product_search
```json
{
  "name": "agro_product_search",
  "description": "æ ¹æ®ç”¨æˆ·æè¿°æŸ¥è¯¢å†œèµ„å•†å“åº“å­˜ã€ä»·æ ¼ä¸è§„æ ¼",
  "parameters": {
    "type": "object",
    "properties": {
      "query_text": { "type": "string", "description": "ç”¨æˆ·åŸå§‹è¾“å…¥ï¼ˆå·²å«å¤šæ¨¡æ€è§£æç»“æœï¼‰" },
      "preferences": {
        "type": "object",
        "properties": {
          "price_preference": { "enum": ["cheapest", "default"] },
          "date_preference": { "enum": ["recent", "default"] }
        }
      }
    }
  }
}
```
- extract_delivery_address
```json
{
  "name": "extract_delivery_address",
  "description": "ä»ç”¨æˆ·æ¶ˆæ¯ä¸­æå–å¹¶æ ‡å‡†åŒ–æ”¶è´§åœ°å€ä¿¡æ¯",
  "parameters": {
    "type": "object",
    "properties": {
      "message": { "type": "string", "description": "ç”¨æˆ·åŸå§‹æ¶ˆæ¯ï¼ˆå·²è½¬ä¸ºæ–‡æœ¬ï¼‰" }
    },
    "required": ["message"]
  }
}
```

# ğŸ’¬ ç¤ºä¾‹å¯¹è¯

```bash
ç”¨æˆ·ï¼š
æœ‰æ»¨å†œé‡‘ç‰¹200æ¯«å‡çš„çƒ¯è‰é…®å—ï¼Ÿæƒ³è¦æœ€è¿‘ç”Ÿäº§æ—¥æœŸçš„ã€‚

AI è°ƒç”¨ agro_product_search åå›å¤ï¼š
è€æ¿ï¼Œä¸ºæ‚¨æŸ¥è¯¢åˆ°
ğŸ” å…³é”®è¯: çƒ¯è‰é…®
ğŸ›’ çƒ¯è‰é…® 200ml
ğŸª åº—é“ºï¼šåŠ²ç‰›å†œèµ„æ——èˆ°åº—
ğŸ’° è§„æ ¼å’Œä»·æ ¼ï¼š
â€¢ 200mlï¼šÂ¥35.00 (ğŸŸ¢ æœ‰è´§:12) ç”Ÿäº§æ—¥æœŸï¼š2025-10-01 æŠ˜æ‰£æ´»åŠ¨ï¼šæ— 
`

ç”¨æˆ·ï¼š
æå››ï¼Œæ‰‹æœºå·13912345678ï¼Œåœ°å€ï¼šä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºé™†å®¶å˜´ç¯è·¯1000å·

AI è°ƒç”¨ extract_delivery_address åå›å¤ï¼š
ğŸ“¦ å·²ä¸ºæ‚¨æå–åœ°å€ä¿¡æ¯ï¼š
ğŸ‘¤ å§“åï¼šæå››
ğŸ“ æ‰‹æœºï¼š13912345678
ğŸ“ åœ°å€ï¼šä¸Šæµ·å¸‚ æµ¦ä¸œæ–°åŒº
ğŸ  è¯¦ç»†ï¼šé™†å®¶å˜´ç¯è·¯1000å·

è¯·ç¡®è®¤åœ°å€ä¿¡æ¯æ˜¯å¦æ­£ç¡®ï¼Ÿ
```
ğŸ è°ƒè¯•

ä½¿ç”¨ MCP Inspector å®æ—¶æŸ¥çœ‹å·¥å…·è°ƒç”¨ï¼š

bash
npx @modelcontextprotocol/inspector uvx jinniu-mcp-server

ğŸ“¦ é¡¹ç›®ç»“æ„
```bash
nbotbb/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ nbotbb_mcp_server/
â”‚       â”œâ”€â”€ __init__.py          # main() å…¥å£
â”‚       â”œâ”€â”€ __main__.py          # æ”¯æŒ python -m
â”‚       â”œâ”€â”€ server.py            # MCP Server åˆå§‹åŒ–
â”‚       â””â”€â”€ tools/
â”‚           â”œâ”€â”€ product_search.py     # agro_product_search
â”‚           â”œâ”€â”€ product_recommend.py  # agro_product_recommend
â”‚           â””â”€â”€ address_extract.py    # extract_delivery_address
â”œâ”€â”€ products.db                  # å†œèµ„å•†å“æ•°æ®åº“ï¼ˆéœ€è‡ªè¡Œå‡†å¤‡ï¼‰
â”œâ”€â”€ .env                         # DASHSCOPE_API_KEY ç­‰
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ Dockerfile
â””â”€â”€ README.md
```

