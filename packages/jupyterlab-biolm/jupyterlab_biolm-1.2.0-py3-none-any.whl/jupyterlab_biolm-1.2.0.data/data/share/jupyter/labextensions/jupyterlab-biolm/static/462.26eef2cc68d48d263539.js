(self.webpackChunkjupyterlab_biolm=self.webpackChunkjupyterlab_biolm||[]).push([[462],{462:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>M});var a=o(762),n=o(986),i=o(345),s=o.n(i);const r="/biolm/api/test-connection";let l=null;function c(e){const t=[];return e.predictor&&t.push("predict"),e.encoder&&t.push("encode"),e.generator&&t.push("generate"),e.classifier&&t.push("classify"),e.similarity&&t.push("similarity"),e.explainer&&t.push("explain"),e.transformer&&t.push("transform"),0===t.length&&t.push("predict"),{id:e.model_slug,name:e.model_name,description:e.description,tags:e.tags||[],apiVersion:e.api_version,communityModel:e.community_model,companyModel:e.company_model,actions:t,apiDocsLink:e.api_docs_link}}var m=o(606);const d="jupyterlab-biolm:settings",p={profiles:[],activeProfile:void 0,defaultModel:void 0,defaultAction:"predict"};function u(){try{const e=localStorage.getItem(d);if(e)return{...p,...JSON.parse(e)}}catch(e){console.warn("Failed to load settings from localStorage:",e)}return{...p}}function y(e){try{localStorage.setItem(d,JSON.stringify(e))}catch(e){console.warn("Failed to save settings to localStorage:",e)}}function g(){if(void 0!==m&&m.env&&m.env.BIOLM_API_KEY)return m.env.BIOLM_API_KEY;const e=u(),t=e.activeProfile;if(t){const o=e.profiles.find(e=>e.name===t);if(o)return o.apiKey}}async function f(e){const t=u();t.profiles=e,y(t)}async function h(e){const t=u();t.activeProfile=e,y(t)}function b(e,t,o){if(o)return o;let a="sequence",n='"YOUR_SEQUENCE_HERE"';return"generate"===t&&(a="context",n='"YOUR_CONTEXT_HERE"'),`# Complete example not available\nresult = biolm(entity="${e}", action="${t}", type="${a}", items=${n})\n\nprint(result)`}async function v(e,t){var o;const a=e.currentWidget;if(!a)return!1;const n=a.sessionContext;if(!n||!(null===(o=n.session)||void 0===o?void 0:o.kernel))return!1;try{const e=n.session.kernel,o=`import os\nos.environ['BIOLMAI_TOKEN'] = '${t.replace(/'/g,"\\'").replace(/\\/g,"\\\\")}'`,a=e.requestExecute({code:o,silent:!0});return await a.done,!0}catch(e){return console.error("Failed to set BIOLMAI_TOKEN in kernel:",e),!1}}async function E(e,t,o=!0){const a=e.currentWidget;if(!a)return await(0,n.showErrorMessage)("No Active Notebook","Please open a notebook before inserting code."),!1;const i=a.content.activeCell;if(!i)return await(0,n.showErrorMessage)("No Active Cell","Please select a cell in the notebook."),!1;const s=i.model.sharedModel,r=s.getSource();return o&&r.trim()?s.setSource(r+"\n"+t):s.setSource(t),!0}const w=({notebookTracker:e})=>{const[t,o]=(0,i.useState)([]),[a,r]=(0,i.useState)(!0),[m,d]=(0,i.useState)(null),[p,u]=(0,i.useState)(""),[y,f]=(0,i.useState)(null),[h,v]=(0,i.useState)(new Set),[w,N]=(0,i.useState)(new Map);(0,i.useEffect)(()=>{k()},[]);const k=async()=>{r(!0),d(null);try{const e=g(),t=await async function(e){if(l&&Date.now()-l.timestamp<3e5)return l.data;let t="https://biolm.ai/api/ui/community-api-models/",o=!1;e&&(t+=`?api_key=${encodeURIComponent(e)}`),console.log("[BioLM] Fetching models via server proxy..."),o=!0,t="/biolm/api/models";const a={"Content-Type":"application/json"};e&&(t+=`?api_key=${encodeURIComponent(e)}`,a.Authorization=`Bearer ${e}`);try{let e=await fetch(t,{method:"GET",headers:a,credentials:"same-origin"});if(console.log("[BioLM] Proxy response received:",e.status),console.log("[BioLM] Response status:",e.status,e.statusText),console.log("[BioLM] Response URL:",e.url),console.log("[BioLM] Response ok:",e.ok),console.log("[BioLM] Using proxy:",!0),!e.ok){let t=`Failed to fetch models: ${e.status} ${e.statusText}`,o=null;try{const a=await e.text();console.log("[BioLM] Error response body:",a);try{o=JSON.parse(a),o.message?t=o.message:o.error&&(t=o.error)}catch(e){a&&(t=`${t}: ${a.substring(0,200)}`)}}catch(e){console.error("[BioLM] Error reading response:",e)}throw console.error("[BioLM] API Error:",t,o),{message:t,status:e.status}}const o=await e.json(),n=Array.isArray(o)?o.map(c):[];return l={data:n,timestamp:Date.now()},n}catch(e){if(console.error("[BioLM] Proxy fetch failed:",e),l)return console.warn("Using cached models due to fetch error:",e),l.data;if(e instanceof Error)throw{message:e.message.includes("fetch")||e.message.includes("CORS")||e.message.includes("Failed to fetch")?"Unable to connect to BioLM API via server proxy. Please check your internet connection and ensure the server extension is loaded.":e.message};throw e}}(e);o(t)}catch(e){d(e.message||"Failed to load models"),console.error("Error loading models:",e)}finally{r(!1)}},C=(0,i.useMemo)(()=>{let e=t;if(y&&(e=e.filter(e=>e.actions&&e.actions.includes(y)||e.tags&&e.tags.includes(y))),p.trim()){const t=p.toLowerCase();e=e.filter(e=>{const o=(e.name||e.id||"").toLowerCase(),a=(e.description||"").toLowerCase(),n=(e.tags||[]).join(" ").toLowerCase();return o.includes(t)||a.includes(t)||n.includes(t)})}return e.sort((e,t)=>{const o=(e.name||e.id||"").toLowerCase(),a=(t.name||t.id||"").toLowerCase();return o.localeCompare(a)})},[t,p,y]),j=(0,i.useMemo)(()=>{const e=new Set;return t.forEach(t=>{t.actions&&t.actions.forEach(t=>e.add(t))}),Array.from(e).sort()},[t]);return s().createElement("div",{className:"biolm-models-tab"},s().createElement("div",{className:"biolm-tab-header"},s().createElement("input",{type:"text",className:"jp-mod-styled jp-InputGroup-input",placeholder:"Search models...",value:p,onChange:e=>u(e.target.value),style:{width:"100%",marginBottom:"8px"}}),s().createElement("div",{className:"biolm-tag-filter"},s().createElement("button",{className:"jp-mod-styled jp-mod-minimal "+(y?"":"jp-mod-active"),onClick:()=>f(null),style:{marginRight:"4px",marginBottom:"4px"}},"All"),j.map(e=>s().createElement("button",{key:e,className:"jp-mod-styled jp-mod-minimal "+(y===e?"jp-mod-active":""),onClick:()=>f(e===y?null:e),style:{marginRight:"4px",marginBottom:"4px"}},e))),s().createElement("button",{className:"jp-mod-styled jp-mod-minimal",onClick:()=>{l=null,k()},style:{marginTop:"8px"}},"Refresh")),s().createElement("div",{className:"biolm-models-list"},a&&s().createElement("div",{className:"biolm-loading"},"Loading models..."),m&&s().createElement("div",{className:"biolm-error"},s().createElement("p",null,"Error: ",m),s().createElement("button",{className:"jp-mod-styled jp-mod-minimal",onClick:k},"Retry")),!a&&!m&&0===C.length&&s().createElement("div",{className:"biolm-empty"},p||y?"No models match your filters":"No models available"),!a&&!m&&C.map(t=>{const o=h.has(t.id),a=t.description||"",i=a.length>150,r=i&&!o?a.substring(0,150)+"...":a;return s().createElement("div",{key:t.id,className:"biolm-model-card"},s().createElement("div",{className:"biolm-model-header"},s().createElement("h3",{className:"biolm-model-name"},t.name||t.id),s().createElement("button",{className:"jp-mod-styled jp-mod-minimal",onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),console.log("Model ID copied to clipboard")}catch(e){(0,n.showErrorMessage)("Copy Failed","Failed to copy model ID to clipboard")}})(t.id),title:"Copy Model ID"},"Copy ID")),a&&s().createElement("div",{className:"biolm-model-description"},s().createElement("p",null,r),i&&s().createElement("button",{className:"jp-mod-styled jp-mod-minimal",onClick:()=>(e=>{const t=new Set(h);t.has(e)?t.delete(e):t.add(e),v(t)})(t.id)},o?"Show less":"Show more")),t.actions&&t.actions.length>0&&s().createElement("div",{className:"biolm-model-tags"},t.actions.map(o=>s().createElement("button",{key:o,className:"biolm-tag-button",onClick:()=>(async(t,o)=>{var a;try{let n;const i=w.get(t.id);if(null==i?void 0:i.code_examples){const e=i.code_examples.find(e=>e.action===o);n=null==e?void 0:e.code}else{const e=g(),i=await async function(e,t){console.log("[BioLM] Fetching model details via server proxy...");let o=`/biolm/api/models/${e}`;const a={"Content-Type":"application/json"};t&&(o+=`?api_key=${encodeURIComponent(t)}`,a.Authorization=`Bearer ${t}`);try{const e=await fetch(o,{method:"GET",headers:a,credentials:"same-origin"});if(console.log("[BioLM] Proxy response received:",e.status),!e.ok){let t=`Failed to fetch model details: ${e.status} ${e.statusText}`;try{const o=await e.text();try{const e=JSON.parse(o);e.message?t=e.message:e.error&&(t=e.error)}catch(e){o&&(t=`${t}: ${o.substring(0,200)}`)}}catch(e){console.error("[BioLM] Error reading response:",e)}throw{message:t,status:e.status}}return await e.json()}catch(e){if(console.error("[BioLM] Proxy fetch failed:",e),e instanceof Error)throw{message:e.message};throw e}}(t.id,e);N(e=>new Map(e).set(t.id,i));const s=null===(a=i.code_examples)||void 0===a?void 0:a.find(e=>e.action===o);n=null==s?void 0:s.code}const s=b(t.id,o,n);await E(e,s,!0)&&console.log(`Inserted ${o} snippet for ${t.name||t.id}`)}catch(a){console.error("Error fetching code example:",a);const n=b(t.id,o);await E(e,n,!0)&&console.log(`Inserted ${o} snippet for ${t.name||t.id}`)}})(t,o),title:`Insert ${o} code for ${t.name||t.id}`},o))),t.tags&&t.tags.length>0&&s().createElement("div",{className:"biolm-model-meta-tags",style:{marginTop:"8px",fontSize:"11px",color:"var(--biolm-text-secondary)"}},s().createElement("strong",null,"Tags:")," ",t.tags.join(", ")))})))},N=[{title:"Import BioLM",description:"Import the BioLM library (run this once at the top of your notebook)",category:"Setup",code:"from biolmai import biolm",parameters:[]},{title:"Encode Sequence",description:"Encode a single sequence into embeddings using ESM2-8M",category:"Encoding",code:'result = biolm(entity="esm2-8m", action="encode", type="sequence", items="MSILVTRPSPAGEEL")\n\nprint(result)',parameters:["entity","action","type","items"]},{title:"Encode Batch",description:"Encode multiple sequences in a batch",category:"Encoding",code:'result = biolm(entity="esm2-8m", action="encode", type="sequence", items=["SEQ1", "SEQ2"])\n\nprint(result)',parameters:["entity","action","type","items"]},{title:"Predict Structure",description:"Predict protein structure from sequence using ESMFold",category:"Prediction",code:'result = biolm(entity="esmfold", action="predict", type="sequence", items="MDNELE")\n\nprint(result)',parameters:["entity","action","type","items"]},{title:"Predict Batch",description:"Predict structures for multiple sequences",category:"Prediction",code:'result = biolm(entity="esmfold", action="predict", type="sequence", items=["MDNELE", "MENDEL"])\n\nprint(result)',parameters:["entity","action","type","items"]},{title:"Generate Sequence",description:"Generate new sequences from a context using ProGen2-OAS",category:"Generation",code:'result = biolm(\n    entity="progen2-oas",\n    action="generate",\n    type="context",\n    items="M",\n    params={"temperature": 0.7, "top_p": 0.6, "num_samples": 2, "max_length": 17}\n)\n\nprint(result)',parameters:["entity","action","type","items","params"]},{title:"Write to Disk",description:"Save results directly to a file",category:"Output",code:'result = biolm(\n    entity="esmfold",\n    action="predict",\n    type="sequence",\n    items=["SEQ1", "SEQ2"],\n    output=\'disk\',\n    file_path="results.jsonl"\n)',parameters:["entity","action","type","items","output","file_path"]},{title:"Classify Sequence",description:"Classify a sequence",category:"Classification",code:'result = biolm(entity="your-model-id", action="classify", type="sequence", items="YOUR_SEQUENCE")\n\nprint(result)',parameters:["entity","action","type","items"]},{title:"Similarity Search",description:"Find similar sequences",category:"Similarity",code:'result = biolm(entity="your-model-id", action="similarity", type="sequence", items="YOUR_SEQUENCE")\n\nprint(result)',parameters:["entity","action","type","items"]}],k=({notebookTracker:e})=>{const[t,o]=(0,i.useState)(""),[a,r]=(0,i.useState)(null),l=(0,i.useMemo)(()=>{const e=new Set;return N.forEach(t=>e.add(t.category)),Array.from(e).sort()},[]),c=(0,i.useMemo)(()=>{let e=N;if(a&&(e=e.filter(e=>e.category===a)),t.trim()){const o=t.toLowerCase();e=e.filter(e=>{const t=e.title.toLowerCase(),a=e.description.toLowerCase(),n=e.category.toLowerCase();return t.includes(o)||a.includes(o)||n.includes(o)})}return e},[t,a]);return s().createElement("div",{className:"biolm-operations-tab"},s().createElement("div",{className:"biolm-tab-header"},s().createElement("input",{type:"text",className:"jp-mod-styled jp-InputGroup-input",placeholder:"Search operations...",value:t,onChange:e=>o(e.target.value),style:{width:"100%",marginBottom:"8px"}}),s().createElement("div",{className:"biolm-category-filter"},s().createElement("button",{className:"jp-mod-styled jp-mod-minimal "+(a?"":"jp-mod-active"),onClick:()=>r(null),style:{marginRight:"4px",marginBottom:"4px"}},"All"),l.map(e=>s().createElement("button",{key:e,className:"jp-mod-styled jp-mod-minimal "+(a===e?"jp-mod-active":""),onClick:()=>r(e===a?null:e),style:{marginRight:"4px",marginBottom:"4px"}},e)))),s().createElement("div",{className:"biolm-operations-list"},0===c.length&&s().createElement("div",{className:"biolm-empty"},t||a?"No operations match your filters":"No operations available"),c.map((t,o)=>s().createElement("div",{key:o,className:"biolm-operation-card"},s().createElement("div",{className:"biolm-operation-header"},s().createElement("h3",{className:"biolm-operation-title"},t.title),s().createElement("span",{className:"biolm-operation-category"},t.category)),s().createElement("p",{className:"biolm-operation-description"},t.description),t.parameters&&t.parameters.length>0&&s().createElement("div",{className:"biolm-operation-parameters"},s().createElement("strong",null,"Parameters:")," ",t.parameters.join(", ")),s().createElement("div",{className:"biolm-operation-code"},s().createElement("pre",null,s().createElement("code",null,t.code))),s().createElement("div",{className:"biolm-operation-actions"},s().createElement("button",{className:"jp-mod-styled jp-mod-accept",onClick:()=>(async t=>{await E(e,t.code,!0)&&console.log(`Inserted ${t.title} example`)})(t)},"Insert"),s().createElement("button",{className:"jp-mod-styled jp-mod-minimal",onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),console.log("Code snippet copied to clipboard")}catch(e){(0,n.showErrorMessage)("Copy Failed","Failed to copy code snippet to clipboard")}})(t.code)},"Copy"))))))};var C=o(606);const j=({notebookTracker:e})=>{const[t,o]=(0,i.useState)([]),[a,l]=(0,i.useState)(),[c,m]=(0,i.useState)(""),[d,p]=(0,i.useState)("predict"),[b,E]=(0,i.useState)(""),[w,N]=(0,i.useState)(""),[k,j]=(0,i.useState)(null),[S,x]=(0,i.useState)(""),[M,T]=(0,i.useState)(""),[I,L]=(0,i.useState)(!1),[B,P]=(0,i.useState)(null);(0,i.useEffect)(()=>{A()},[]),(0,i.useEffect)(()=>{const t=g();t&&v(e,t).catch(e=>{console.error("Failed to set token on mount:",e)})},[a,e]);const A=()=>{const e=u().profiles||[],t=u().activeProfile,a=u().defaultModel||"",n=u().defaultAction||"predict";o(e),l(t),m(a),p(n)},_=async()=>{if(!k||!S.trim()||!M.trim())return;const n=t.map(e=>e.name===k?{name:S.trim(),apiKey:M.trim()}:e);if(await f(n),o(n),a===k){await h(S.trim()),l(S.trim());const t=g();t&&await v(e,t)}j(null),x(""),T(""),console.log("Profile has been updated")},$=async t=>{await h(t),l(t),console.log(t?`Active profile: ${t}`:"Using environment variable");const o=g();o&&await v(e,o)},O=void 0!==C&&C.env&&!!C.env.BIOLM_API_KEY;return s().createElement("div",{className:"biolm-settings-tab"},s().createElement("div",{className:"biolm-settings-section"},s().createElement("h3",null,"API Key Profiles"),O&&s().createElement("div",{className:"biolm-env-notice"},s().createElement("p",null,"BIOLM_API_KEY environment variable is set and will be used if no profile is selected.")),s().createElement("div",{className:"biolm-profile-list"},0===t.length&&s().createElement("div",{className:"biolm-empty"},"No profiles configured. Add one below."),t.map(e=>s().createElement("div",{key:e.name,className:"biolm-profile-card"},k===e.name?s().createElement("div",{className:"biolm-profile-edit"},s().createElement("input",{type:"text",className:"jp-mod-styled jp-InputGroup-input",value:S,onChange:e=>x(e.target.value),placeholder:"Profile name",style:{marginBottom:"4px"}}),s().createElement("input",{type:"password",className:"jp-mod-styled jp-InputGroup-input",value:M,onChange:e=>T(e.target.value),placeholder:"API Key",style:{marginBottom:"4px"}}),s().createElement("div",null,s().createElement("button",{className:"jp-mod-styled jp-mod-accept",onClick:_},"Save"),s().createElement("button",{className:"jp-mod-styled jp-mod-minimal",onClick:()=>{j(null),x(""),T("")}},"Cancel"))):s().createElement(s().Fragment,null,s().createElement("div",{className:"biolm-profile-header"},s().createElement("strong",null,e.name),s().createElement("div",null,s().createElement("button",{className:"jp-mod-styled jp-mod-minimal "+(a===e.name?"jp-mod-active":""),onClick:()=>$(e.name),title:"Set as active"},a===e.name?"Active":"Set Active"),s().createElement("button",{className:"jp-mod-styled jp-mod-minimal",onClick:()=>(async e=>{L(!0),P(null);try{const t=await async function(e){let t="https://biolm.ai/api/ui/community-api-models/",o=!1;const a={"Content-Type":"application/json",Authorization:`Bearer ${e}`};try{let n=null,i=!1;try{n=await fetch(t,{method:"GET",headers:a,mode:"cors"}),0!==n.status&&"opaque"!==n.type||(i=!0,n=null)}catch(e){console.log("[BioLM] Direct API test failed with error:",e.message),i=!0,n=null}if(!i&&n||(console.log("[BioLM] Using server proxy for connection test due to CORS/network issue..."),o=!0,t=r,n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({api_key:e})})),n.ok){const e=await n.json();return{valid:e.valid||!1,message:e.message||"Connection test completed",accountInfo:e.accountInfo}}{let e=`HTTP ${n.status}: ${n.statusText}`;try{const t=await n.json().catch(()=>({}));t.message&&(e=t.message)}catch(e){}return{valid:!1,message:e}}}catch(t){if(!o&&t instanceof Error&&(t.message.includes("CORS")||t.message.includes("Failed to fetch")||t.message.includes("network"))){console.log("[BioLM] CORS error detected for connection test, trying server proxy...");try{const t=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({api_key:e})});if(t.ok){const e=await t.json();return{valid:e.valid||!1,message:e.message||"Connection test completed",accountInfo:e.accountInfo}}return{valid:!1,message:(await t.json().catch(()=>({}))).message||`HTTP ${t.status}: ${t.statusText}`}}catch(e){console.error("[BioLM] Proxy also failed:",e)}}return{valid:!1,message:t instanceof Error?t.message:"Connection failed"}}}(e);P(t),t.valid?console.log(t.message||"API key is valid"):(0,n.showErrorMessage)("Connection Failed",t.message||"Invalid API key")}catch(e){const t=e.message||"Connection test failed";P({valid:!1,message:t}),(0,n.showErrorMessage)("Connection Failed",t)}finally{L(!1)}})(e.apiKey),disabled:I},"Test"),s().createElement("button",{className:"jp-mod-styled jp-mod-minimal",onClick:()=>(e=>{j(e.name),x(e.name),T(e.apiKey)})(e)},"Edit"),s().createElement("button",{className:"jp-mod-styled jp-mod-minimal",onClick:()=>(async e=>{const n=t.filter(t=>t.name!==e);await f(n),o(n),a===e&&(await h(void 0),l(void 0)),console.log(`Profile "${e}" has been deleted`)})(e.name)},"Delete"))),B&&a===e.name&&s().createElement("div",{className:"biolm-connection-status "+(B.valid?"valid":"invalid")},B.message))))),s().createElement("div",{className:"biolm-add-profile"},s().createElement("h4",null,"Add New Profile"),s().createElement("input",{type:"text",className:"jp-mod-styled jp-InputGroup-input",value:b,onChange:e=>E(e.target.value),placeholder:"Profile name",style:{marginBottom:"4px"}}),s().createElement("input",{type:"password",className:"jp-mod-styled jp-InputGroup-input",value:w,onChange:e=>N(e.target.value),placeholder:"API Key",style:{marginBottom:"4px"}}),s().createElement("button",{className:"jp-mod-styled jp-mod-accept",onClick:async()=>{if(!b.trim()||!w.trim())return void(0,n.showErrorMessage)("Invalid Input","Please provide both profile name and API key");if(t.some(e=>e.name===b))return void(0,n.showErrorMessage)("Duplicate Profile","A profile with this name already exists");const i={name:b.trim(),apiKey:w.trim()},s=[...t,i];if(await f(s),o(s),E(""),N(""),console.log(`Profile "${i.name}" has been added`),!a){await h(i.name),l(i.name);const t=g();t&&await v(e,t)}}},"Add Profile")),s().createElement("div",{className:"biolm-env-option"},s().createElement("button",{className:"jp-mod-styled jp-mod-minimal "+(a?"":"jp-mod-active"),onClick:()=>$(void 0),disabled:!O},"Use Environment Variable ",O?"(Available)":"(Not Set)"))),s().createElement("div",{className:"biolm-settings-section"},s().createElement("h3",null,"Default Preferences"),s().createElement("div",{className:"biolm-defaults"},s().createElement("label",null,"Default Model ID:",s().createElement("input",{type:"text",className:"jp-mod-styled jp-InputGroup-input",value:c,onChange:e=>m(e.target.value),placeholder:"Optional",style:{marginLeft:"8px",width:"200px"}})),s().createElement("label",{style:{marginTop:"8px",display:"block"}},"Default Action:",s().createElement("select",{className:"jp-mod-styled",value:d,onChange:e=>p(e.target.value),style:{marginLeft:"8px"}},s().createElement("option",{value:"predict"},"predict"),s().createElement("option",{value:"generate"},"generate"),s().createElement("option",{value:"embed"},"embed"),s().createElement("option",{value:"encode"},"encode"),s().createElement("option",{value:"classify"},"classify"))),s().createElement("button",{className:"jp-mod-styled jp-mod-accept",onClick:async()=>{await async function(e){const t=u();t.defaultModel=e,y(t)}(c.trim()||void 0),await async function(e){const t=u();t.defaultAction=e,y(t)}(d),console.log("Default preferences have been saved")},style:{marginTop:"8px"}},"Save Defaults"))))};class S extends s().Component{constructor(e){super(e),this.state={activeTab:"models"}}render(){const{activeTab:e}=this.state,{notebookTracker:t}=this.props;return s().createElement("div",{className:"biolm-widget"},s().createElement("div",{className:"biolm-tabs"},s().createElement("button",{className:"biolm-tab-button "+("models"===e?"active":""),onClick:()=>this.setState({activeTab:"models"})},"ðŸ§  Models"),s().createElement("button",{className:"biolm-tab-button "+("operations"===e?"active":""),onClick:()=>this.setState({activeTab:"operations"})},"âš™ï¸ Operations"),s().createElement("button",{className:"biolm-tab-button "+("settings"===e?"active":""),onClick:()=>this.setState({activeTab:"settings"})},"ðŸ”‘ Settings")),s().createElement("div",{className:"biolm-tab-content"},"models"===e&&s().createElement(w,{notebookTracker:t}),"operations"===e&&s().createElement(k,{notebookTracker:t}),"settings"===e&&s().createElement(j,{notebookTracker:t})))}}class x extends n.ReactWidget{constructor(e){super(),this._notebookTracker=e,this.addClass("biolm-widget-container"),this.id="biolm-widget",this.title.label="BioLM",this.title.caption="BioLM Model Browser",this.title.iconClass="jp-MaterialIcon jp-Icon jp-Icon-16",this.title.closable=!0}render(){return s().createElement(S,{notebookTracker:this._notebookTracker})}}const M={id:"jupyterlab-biolm:plugin",autoStart:!0,requires:[a.INotebookTracker],optional:[n.ICommandPalette],activate:async(e,t,o)=>{console.log("JupyterLab extension jupyterlab-biolm is activated!"),console.log("BioLM: Creating widget...");const a=new x(t);console.log("BioLM: Widget created with ID:",a.id),console.log("BioLM: Adding widget to left sidebar..."),e.shell.add(a,"left",{rank:1e3}),console.log("BioLM: Widget added to sidebar. Title:",a.title.label),e.commands.addCommand("biolm:open",{label:"Open BioLM",execute:()=>{e.shell.activateById(a.id)}}),o&&o.addItem({command:"biolm:open",category:"BioLM"});const n=async()=>{const e=g();if(e&&t.currentWidget)try{await v(t,e)}catch(e){console.error("Failed to set token for notebook:",e)}};t.widgetAdded.connect(()=>{n()}),t.currentWidget&&n()}}},606:e=>{var t,o,a=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(o){try{return t.call(null,e,0)}catch(o){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{o="function"==typeof clearTimeout?clearTimeout:i}catch(e){o=i}}();var r,l=[],c=!1,m=-1;function d(){c&&r&&(c=!1,r.length?l=r.concat(l):m=-1,l.length&&p())}function p(){if(!c){var e=s(d);c=!0;for(var t=l.length;t;){for(r=l,l=[];++m<t;)r&&r[m].run();m=-1,t=l.length}r=null,c=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===i||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function u(e,t){this.fun=e,this.array=t}function y(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];l.push(new u(e,t)),1!==l.length||c||s(p)},u.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=y,a.addListener=y,a.once=y,a.off=y,a.removeListener=y,a.removeAllListeners=y,a.emit=y,a.prependListener=y,a.prependOnceListener=y,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}}}]);