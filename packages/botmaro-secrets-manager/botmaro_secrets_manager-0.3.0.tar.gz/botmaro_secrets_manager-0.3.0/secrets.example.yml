# Example secrets configuration file
# This file defines environments, projects, and their required secrets

version: "1.0"

environments:
  staging:
    name: staging
    gcp_project: botmaro-core-staging
    prefix: botmaro-staging  # Optional: defaults to "botmaro-{env}"

    # Service accounts that need access to all environment-level secrets
    # These will be automatically granted secretAccessor role during bootstrap
    service_accounts:
      - runtime-bot@botmaro-core-staging.iam.gserviceaccount.com
      - deployer@botmaro-core-staging.iam.gserviceaccount.com

    # Global secrets (environment-scoped, not project-specific)
    global_secrets:
      - name: SUPABASE_URL
        description: Supabase project URL
        required: true

      - name: SUPABASE_ANON_KEY
        description: Supabase anonymous key
        required: true

      - name: SUPABASE_SERVICE_ROLE_KEY
        description: Supabase service role key
        required: true

      - name: TWILIO_ACCOUNT_SID
        description: Twilio account SID
        required: true

      - name: TWILIO_AUTH_TOKEN
        description: Twilio authentication token
        required: true

    # Project-specific secrets
    projects:
      orchestrator:
        project_id: orchestrator
        # Optional: Service accounts that need access to this project's secrets
        # If not specified, environment-level service accounts will be used
        service_accounts:
          - orchestrator-runtime@botmaro-core-staging.iam.gserviceaccount.com
        secrets:
          - name: DATABASE_URL
            description: PostgreSQL connection string
            required: true

          - name: REDIS_URL
            description: Redis connection string
            required: false
            default: "redis://localhost:6379"

      api:
        project_id: api
        secrets:
          - name: JWT_SECRET
            description: JWT signing secret
            required: true

          - name: OPENAI_API_KEY
            description: OpenAI API key
            required: true

  prod:
    name: prod
    gcp_project: botmaro-core-prod
    prefix: botmaro-prod

    global_secrets:
      - name: SUPABASE_URL
        required: true

      - name: SUPABASE_ANON_KEY
        required: true

      - name: SUPABASE_SERVICE_ROLE_KEY
        required: true

      - name: TWILIO_ACCOUNT_SID
        required: true

      - name: TWILIO_AUTH_TOKEN
        required: true

      - name: SENTRY_DSN
        description: Sentry error tracking DSN
        required: false

    projects:
      orchestrator:
        project_id: orchestrator
        secrets:
          - name: DATABASE_URL
            required: true

          - name: REDIS_URL
            required: true

      api:
        project_id: api
        secrets:
          - name: JWT_SECRET
            required: true

          - name: OPENAI_API_KEY
            required: true

  # You can add more environments like 'dev', 'test', etc.
  dev:
    name: dev
    gcp_project: botmaro-core-dev
    prefix: botmaro-dev

    global_secrets:
      - name: SUPABASE_URL
        required: false
        default: "http://localhost:54321"

      - name: SUPABASE_ANON_KEY
        required: false
        default: "your-dev-anon-key"

      - name: SUPABASE_SERVICE_ROLE_KEY
        required: false
        default: "your-dev-service-key"