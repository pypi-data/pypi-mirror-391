"use strict";(self.webpackChunklino_react=self.webpackChunklino_react||[]).push([[7970],{7970:(e,t,n)=>{n.d(t,{PH:()=>S,TY:()=>V,Y_:()=>_,ZI:()=>P,Zn:()=>M,a7:()=>I,kA:()=>H,ki:()=>f.Ay,tA:()=>T,zl:()=>F});var l=n(4467),a=n(296),r=(n(2284),n(3029)),o=n(2901),i=n(6822),s=n(3954),c=n(991),u=n(5501),m=n(5548),d=n(2848),f=(n(8579),n(1669)),p=(n(9374),n(8913),n(3624),n(537)),b=n(194),g=n(3117),v=n.n(g),E=n(6540),h=n(6606);n(1367),n(5065);function A(e,t,n){return t=(0,s.A)(t),(0,i.A)(e,y()?Reflect.construct(t,n||[],(0,s.A)(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function q(e,t,n,l){var a=(0,c.A)((0,s.A)(1&l?e.prototype:e),t,n);return 2&l&&"function"==typeof a?function(e){return a.apply(n,e)}:a}d.Ay.import("modules/table");var N=d.Ay.import("formats/table"),w=d.Ay.import("formats/table-row"),x=(d.Ay.import("formats/table-container"),{});d.Ay.register("modules/imageDropAndPaste",p.A),d.Ay.register("modules/blotFormatter2",b.Ay),d.Ay.register({"blots/mention":m.Yj,"modules/mention":m.PX}),d.Ay.register("modules/htmlEditButton",v());var L,k=p.A.ImageData;L={queryString:Promise.all([n.e(4166),n.e(2298)]).then(n.bind(n,8091))};(0,h.RegisterImportPool)(L);var C=function(e,t){var n=Array.from(t.classList);n.forEach(function(n){e.includes(n)||t.classList.remove(n)}),n=Array.from(t.classList),e.forEach(function(e){n.includes(e)||t.classList.add(e)})},P=function(e){var t=e.ex.i18n,n=function(){return e.quill.focus(),e.quill.getModule("table")};return{model:[{command:function(e){n().insertColumnLeft()},icon:E.createElement("span",null,"Â â­°Â "),label:t.t("Insert column left")},{command:function(e){n().insertColumnRight()},icon:E.createElement("span",null,"Â â­²Â "),label:t.t("Insert column right")},{command:function(e){n().insertRowAbove()},icon:E.createElement("span",null,"Â â­±Â "),label:t.t("Insert row above")},{command:function(e){n().insertRowBelow()},icon:E.createElement("span",null,"Â â­³Â "),label:t.t("Insert row below")},{command:function(e){n().deleteColumn()},icon:"pi pi-delete-left",label:t.t("Delete column")},{command:function(e){n().deleteRow()},icon:"pi pi-eraser",label:t.t("Delete row")},{command:function(e){n().deleteTable()},icon:"pi pi-trash",label:t.t("Delete table")},{command:function(r){var o=n().getTable(),i=(0,a.A)(o,3),s=i[0],c=i[1],u=i[2],m=e.c,d=t.t("Comma separated TABLE clsasses"),f=t.t("Comma separated TR classes"),p=t.t("Comma separated TD classes"),b=t.t("Apply to all row?"),g=t.t("Apply to all cell?"),v=t.t("Apply to all cell of this row?"),E=t.t("Manage classes"),h=t.t("Apply");m.APP.dialogFactory.createParamDialog(m,(0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)({},d,{default:Array.from(s.domNode.classList).join(","),react_name:"CharFieldElement"}),f,{default:Array.from(c.domNode.classList).join(","),react_name:"CharFieldElement"}),b,{default:!1,react_name:"BooleanFieldElement"}),p,{default:Array.from(u.domNode.classList).join(","),react_name:"CharFieldElement"}),v,{default:!1,react_name:"BooleanFieldElement"}),g,{default:!1,react_name:"BooleanFieldElement"}),E,function(e){var t=e[d].split(",").filter(function(e){return!!e}).join(" ").trim(),n=t.split(" ").filter(function(e){return!!e});n.length>0&&C(n,s.domNode);var l,a=function(e,t){var n=e.split(" ").filter(function(e){return!!e});n.length>0&&C(n,t.domNode)},r=e[f].split(",").filter(function(e){return!!e}).join(" ").trim();if(a(r,c),e[b]){for(l=c.prev;null!==l;)a(r,l),l=l.prev;for(l=c.next;null!==l;)a(r,l),l=l.next}var o,i=e[g],m=e[p].split(",").filter(function(e){return!!e});if(C(m,u.domNode),i||e[v]){for(o=u.prev;null!==o;)C(m,o.domNode),o=o.prev;for(o=u.next;null!==o;)C(m,o.domNode),o=o.next}if(i){for(l=c.prev;null!==l;){if(null!==(o=l.children.head).prev)throw new Error("Programming error, row.children.head returned cell with prev item");for(;null!==o;)C(m,o.domNode),o=o.next;l=l.prev}for(l=c.next;null!==l;){if(null!==(o=l.children.head).prev)throw new Error("Programming error, row.children.head returned cell with prev item");for(;null!==o;)C(m,o.domNode),o=o.next;l=l.next}}return!0},h)},icon:E.createElement("span",null,"Â ðŸ„¿Â "),label:t.t("Properties")}]}},_=function(e){return e.state.plain?null:function(t){var n=e.quill.getModule("table").getTable();null!==(0,a.A)(n,1)[0]&&(t.preventDefault(),e.tableContextMenu.show(t))}},I=function(e,t){var n=e.getValue();e.state.plain?t.setText(n||""):t.clipboard.dangerouslyPasteHTML(n)},T=function(e,t,n,l,r,o){var i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s="l-ql-toolbar-".concat(o.props.elem.name),c={toolbar:"#".concat(s),mention:R({silentFetch:t,signal:n,mentionValues:l}),blotFormatter2:{debug:!0,resize:{useRelativeSize:!0},video:{registerBackspaceFix:!1}},table:!0};return i&&(c.htmlEditButton={msg:r.t('Edit HTML here, when you click "OK" the quill editor\'s contents will be replaced'),prependSelector:"div#raw-editor-container",okText:r.t("Ok"),cancelText:r.t("Cancel"),buttonTitle:r.t("Show HTML source")}),e.state.site_data.installed_plugins.includes("uploads")&&(c.imageDropAndPaste={handler:D(o)}),c.keyboard={bindings:{home:{key:"Home",shiftKey:null,handler:function(e,t){var n=o.quill,l=n.getLine(e.index),r=(0,a.A)(l,2),i=r[0];r[1];if(i&&"LI"===i.domNode.tagName){if(t.event.shiftKey){var s=i.offset(n.scroll);n.setSelection(s,e.index-s,"user")}else n.setSelection(i.offset(n.scroll),0,"user");return!1}return!0}}}},o.state.plain&&(c.keyboard.bindings["list autofill"]=!1),i||delete c.toolbar,c.clipboard={matchers:[]},{modules:c,meta:{toolbarID:s}}},F=function(e){return function(t,n,a){var r=e.quill,o=r.container.children[0],i=o?o.innerHTML:null,s=r.getText();if("<p><br></p>"===i&&(i=null),"api"===a){var c=r.container.children[0],u=document.createElement("div");if(u.innerHTML=e.getValue()||"",e.ex.prUtils.DomHandler.isEqualElement(c,u))return}!function(e,t){var n=t.textValue.slice(0,-1),a=(e.state.plain?n:t.htmlValue)||"";e.update((0,l.A)({},e.dataKey,a))}(e,{htmlValue:i,textValue:s,delta:t,source:a})}},H=function(e){e.getModule("toolbar").addHandler("image",function(t){var n;t&&((n=document.createElement("input")).setAttribute("type","file"),n.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),n.classList.add("ql-image"),n.addEventListener("change",function(t){var l,a=t.target.files;if(a.length>0){var r=(l=a[0]).type,o=new FileReader;o.onload=function(t){var a=t.target.result;D({quill:e})(a,r,new k(a,r,l.name)),n.value=""},o.readAsDataURL(l)}}),n.click())})},D=function(e){return function(t,n,l){var a=e.quill,r=(a.getSelection()||{}).index;(void 0===r||r<0)&&(r=a.getLength()),a.insertEmbed(r,"image",t)}},R=function(e){var t=e.silentFetch,n=e.signal,l=e.mentionValues;return{allowedChars:/^[A-Za-z0-9\s]*$/,mentionDenotationChars:window.App.state.site_data.suggestors,source:function(e,a,r){if(0===e.length){var o=l[r];a(o,e)}else L.resolve(["queryString"]).then(function(l){var o=l.queryString;t({path:"suggestions?".concat(o.default.stringify({query:e,trigger:r})),signal:n}).then(function(t){return a(t.suggestions,e)})})},listItemClass:"ql-mention-list-item",mentionContainerClass:"ql-mention-list-container",mentionListClass:"ql-mention-list",dataAttributes:["value","link","title","denotationChar"]}},B=E.createElement(E.Fragment,null,E.createElement("span",{className:"ql-formats"},E.createElement("select",{className:"ql-header",defaultValue:"0"},E.createElement("option",{value:"1"},"Header 1"),E.createElement("option",{value:"2"},"Header 2"),E.createElement("option",{value:"3"},"Header 3"),E.createElement("option",{value:"4"},"Header 4"),E.createElement("option",{value:"0"},"Normal")),E.createElement("select",{className:"ql-font"},E.createElement("option",{defaultValue:!0}),E.createElement("option",{value:"serif"}),E.createElement("option",{value:"monospace"}))),E.createElement("span",{className:"ql-formats"},E.createElement("select",{className:"ql-size"},E.createElement("option",{value:"small"}),E.createElement("option",{defaultValue:!0}),E.createElement("option",{value:"large"}),E.createElement("option",{value:"huge"}))),E.createElement("span",{className:"ql-formats"},E.createElement("button",{className:"ql-script",value:"sub"}),E.createElement("button",{className:"ql-script",value:"super"})),E.createElement("span",{className:"ql-formats"},E.createElement("button",{type:"button",className:"ql-bold","aria-label":"Bold"}),E.createElement("button",{type:"button",className:"ql-italic","aria-label":"Italic"}),E.createElement("button",{type:"button",className:"ql-underline","aria-label":"Underline"})),E.createElement("span",{className:"ql-formats"},E.createElement("select",{className:"ql-color"}),E.createElement("select",{className:"ql-background"})),E.createElement("span",{className:"ql-formats"},E.createElement("button",{type:"button",className:"ql-list",value:"ordered","aria-label":"Ordered List"}),E.createElement("button",{type:"button",className:"ql-list",value:"bullet","aria-label":"Unordered List"}),E.createElement("select",{className:"ql-align"},E.createElement("option",{defaultValue:!0}),E.createElement("option",{value:"center"}),E.createElement("option",{value:"right"}),E.createElement("option",{value:"justify"}))),E.createElement("span",{className:"ql-formats"},E.createElement("button",{type:"button",className:"ql-link","aria-label":"Insert Link"}),E.createElement("button",{type:"button",className:"ql-image","aria-label":"Insert Image"}),E.createElement("button",{type:"button",className:"ql-code-block","aria-label":"Insert Code Block"})),E.createElement("span",{className:"ql-formats"},E.createElement("button",{type:"button",className:"ql-clean","aria-label":"Remove Styles"}))),V=function(e){var t=e.props.urlParams.controller.APP.URLContext,n=(e.quill.getSelection()||{}).index;(void 0===n||n<0)&&(n=e.quill.getLength()),t.actionHandler.runAction({action_full_name:t.actionHandler.findUniqueAction("insert_reference").full_name,actorId:"about.About",response_callback:function(t){t.success&&e.quill.insertText(n,t.message)}})},M=function(e){return e.c.APP.state.site_data.installed_plugins.includes("memo")?E.createElement("span",{className:"ql-formats"},E.createElement("button",{type:"button",onClick:function(t){return V(e)},"aria-label":"Open link dialog"},E.createElement("i",{className:"pi pi-link"}))):null},S={header:B,commonHeader:function(e){return E.createElement(E.Fragment,null,B,M(e),E.createElement("span",{className:"ql-formats"},E.createElement("button",{type:"button",onClick:function(t){var n=e.props.urlParams.controller,a=e.ex.i18n.t("rows x columns"),r=e.ex.i18n.t("Rows"),o=e.ex.i18n.t("Columns");n.APP.dialogFactory.createParamDialog(n,(0,l.A)((0,l.A)({},r,{react_name:"IntegerFieldElement",default:3}),o,{react_name:"IntegerFieldElement",default:3}),a,function(t){var l=parseInt(t[r]),a=parseInt(t[o]),i=e.ex.u.isNaN(l);if(i||e.ex.u.isNaN(a))return n.APP.toast.show({severity:"warn",summary:e.ex.i18n.t("Not a number '{{dir}}'",{dir:i?e.ex.i18n.t("rows"):e.ex.i18n.t("columns")})}),!1;var s=e.quill.getModule("table");return e.quill.focus(),x.counter=0,s.insertTable(l,a),!0})}},E.createElement("i",{className:"pi pi-table"}))))}}}}]);
//# sourceMappingURL=main.7970.9067b39d8f89f834bfa3.js.map