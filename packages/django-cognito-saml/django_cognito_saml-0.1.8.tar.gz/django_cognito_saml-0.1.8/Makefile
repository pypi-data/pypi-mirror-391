# Print this help message
help:
	@echo && awk '/^#/ {c=substr($$0,3); next} c && /^([a-zA-Z].+):/{ print "  \033[32m" $$1 "\033[0m",c }{c=0}' $(MAKEFILE_LIST) | column -s: -t | less -R

# Sort python files
isort:
	@echo "--- ğŸ Isorting ğŸ ---"
	uv run isort .

# Lint python files
ruff:
	@echo "--- ğŸ‘ Ruffing ğŸ‘ ---"
	uv run ruff .

# Format python files
black:
	@echo "--- ğŸ© Blacking ğŸ© ---"
	uv run black .

# Typecheck python files
mypy:
	@echo "--- âš¡ Mypying âš¡ ---"
	uv run mypy .

# Run tests in ci. Including setting up docker
# Run all tests locally
test:
	@echo "--- ğŸ’ƒ Testing ğŸ’ƒ ---"
	uv run pytest


# Test and lint in CI
ci: test lint


precommit:
	pre-commit run --all-files

# Run all linters
lint: isort ruff black mypy
