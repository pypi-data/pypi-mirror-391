# fry 848ddc6ae49df2782f8eff2737c1fffb00f14c6c
# Generated by fryweb, DO NOT EDIT THIS FILE!
from fryweb import Element

col_prop_name = 'grid-template-columns'
row_prop_name = 'grid-template-rows'

def Grid(columns=[], rows=[], resizable=True, children=[]):
    if not columns or not rows:
        raise RuntimeError("'columns' and 'rows' must be specified for Grid.")

    if isinstance(columns, str):
        columns = columns.split(' ')
    if isinstance(rows, str):
        rows = rows.split(' ')

    if len(columns)*len(rows) < len(children):
        raise RuntimeError(f"Too many children({len(children)}) specified for grid of {len(columns)} columns and {len(rows)} rows.")

    ncol = len(columns)
    nrow = len(rows)
    nch  = len(children)
    children += [Element("div", {"children": []})]*(ncol*nrow-nch)
    ich = 0
    newchildren = []
    ncol = ncol*2-1
    nrow = nrow*2-1
    for row in range(0, nrow):
        if row%2 == 0:
            for col in range(0, ncol):
                if col%2 == 0:
                    newchildren.append(children[ich])
                    ich += 1
                else:
                    newchildren.append(Element(Gutter, {":gutters": Element.ClientRef("gutters:a"), "col": col, "row": row, "ncol": ncol, "nrow": nrow, "resizable": resizable}))
        else:
            for col in range(0, ncol):
                if col%2 == 0:
                    newchildren.append(Element(Gutter, {":gutters": Element.ClientRef("gutters:a"), "col": col, "row": row, "ncol": ncol, "nrow": nrow, "resizable": resizable}))
                else:
                    newchildren.append(Element(Gutter, {":gutters": Element.ClientRef("gutters:a"), "col": col, "row": row, "ncol": ncol, "nrow": nrow, "resizable": resizable}))
    gridprop = {
        col_prop_name: ' 1px '.join(columns),
        row_prop_name: ' 1px '.join(rows),
    }

    return Element("div", {"call-client-script": ["fryui_grid_Grid", [("ncol", ncol), ("nrow", nrow), ("resizable", resizable)]], "grid": True, "h-full": True, "style": (gridprop), "children": [(newchildren)]})

def get_height(element):
    if isinstance(element, Element):
        return element.props.pop('height', None)
    return None

def get_width(element):
    if isinstance(element, Element):
        return element.props.pop('width', None)
    return None

def HSplit(resizable=True, children=[]):
    newchildren = []
    rows = []
    nrow = len(children)*2-1
    ich = 0
    for row in range(0, nrow):
        if row%2 == 0:
            newchildren.append(children[ich])
            rows.append(get_height(children[ich]) or '1fr')
            ich += 1
        else:
            newchildren.append(Element(Gutter, {"row": row, "nrow": nrow, "resizable": resizable}))
            rows.append('1px')
    gridprop = {
        row_prop_name: ' '.join(rows),
        col_prop_name: '100%',
    }

    return Element("div", {"call-client-script": ["fryui_grid_HSplit", [("nrow", nrow), ("resizable", resizable)]], "grid": True, "h-full": True, "style": (gridprop), "children": [(newchildren)]})


def VSplit(resizable=True, children=[]):
    newchildren = []
    cols = []
    ncol = len(children)*2-1
    ich = 0
    for col in range(0, ncol):
        if col%2 == 0:
            newchildren.append(children[ich])
            cols.append(get_width(children[ich]) or '1fr')
            ich += 1
        else:
            newchildren.append(Element(Gutter, {"col": col, "ncol": ncol, "resizable": resizable}))
            cols.append('1px')
    gridprop = {
        col_prop_name: ' '.join(cols),
        row_prop_name: '100%',
    }

    return Element("div", {"call-client-script": ["fryui_grid_VSplit", [("ncol", ncol), ("resizable", resizable)]], "grid": True, "h-full": True, "style": (gridprop), "children": [(newchildren)]})


def HCenter(children, resizable=True, left=None, right=None, min_width=None):
    if not children or len(children) != 1:
        raise RuntimeError("HCenter should have and only have one child.")
    center = children[0]
    wcenter = get_width(center) or '1fr'
    if not left:
        left = Element("div", {"children": []})
    if not right:
        right = Element("div", {"children": []})
    wleft = get_width(left) or '1fr'
    wright = get_width(right) or '1fr'
    if wleft != wright:
        raise RuntimeError("left and right elements in HCenter should have the same width")

    gridprop = {
        col_prop_name: ' '.join([wleft, '1px', wcenter, '1px', wright]),
        row_prop_name: '100%',
    }
    ncol = 5

    styles = ['grid', 'h-full']
    if min_width == 'sm':
      styles.append('max-sm:!grid-cols-0_0_1fr_0_0')
    elif min_width == 'md':
      styles.append('max-md:!grid-cols-0_0_1fr_0_0')
    elif min_width == 'lg':
      styles.append('max-lg:!grid-cols-0_0_1fr_0_0')
    elif min_width == 'xl':
      styles.append('max-xl:!grid-cols-0_0_1fr_0_0')
    elif min_width == '2xl':
      styles.append('max-2xl:!grid-cols-0_0_1fr_0_0')

    return Element("div", {"call-client-script": ["fryui_grid_HCenter", []], ":grid": Element.ClientRef("grid"), **{ key: True for key in (styles)}, "style": (gridprop), "children": [(left), Element(Gutter, {":leftGutter": Element.ClientRef("leftGutter"), "center": True, "col": (1), "ncol": ncol, "resizable": resizable}), (center), Element(Gutter, {":rightGutter": Element.ClientRef("rightGutter"), "center": True, "col": (3), "ncol": ncol, "resizable": resizable}), (right)]})


def VCenter(children, resizable=True, top=None, bottom=None):
    if not children or len(children) != 1:
        raise RuntimeError("VCenter should have and only have one child.")
    center = children[0]
    wcenter = get_height(center) or '1fr'
    if not top:
        top = Element("div", {"children": []})
    if not bottom:
        bottom = Element("div", {"children": []})
    wtop = get_height(top) or '1fr'
    wbottom = get_height(bottom) or '1fr'
    if wtop != wbottom:
        raise RuntimeError("top and bottom elements in VCenter should have the same width")
    gridprop = {
        row_prop_name: ' '.join([wtop, '1px', wcenter, '1px', wbottom]),
        col_prop_name: '100%',
    }
    nrow = 5

    return Element("div", {"call-client-script": ["fryui_grid_VCenter", []], ":grid": Element.ClientRef("grid"), "grid": True, "h-full": True, "style": (gridprop), "children": [(top), Element(Gutter, {":topGutter": Element.ClientRef("topGutter"), "center": True, "row": (1), "nrow": nrow, "resizable": resizable}), (center), Element(Gutter, {":bottomGutter": Element.ClientRef("bottomGutter"), "center": True, "row": (3), "nrow": nrow, "resizable": resizable}), (bottom)]})


def Gutter(col=0, row=0, ncol=1, nrow=1, resizable=True, center=False):
    ish = row%2 == 1
    isv = col%2 == 1
    if ish and (row <= 0 or row >= nrow-1):
        raise RuntimeError(f"Invalid gutter row: {row}")
    if isv and (col <= 0 or col >= ncol-1):
        raise RuntimeError(f"Invalid gutter col: {col}")
    if center:
        if ish and isv:
            raise RuntimeError(f"VCenter and HCenter have no cross Gutter")
        if ish and (nrow != 5 or row not in (1, 3) or col != 0 or ncol != 1):
            raise RuntimeError(f"VCenter has invalid row({row}) or col({col})")
        if isv and (ncol != 5 or col not in (1, 3) or row != 0 or nrow != 1):
            raise RuntimeError(f"HCenter has invalid row({row}) or col({col})")

    if ish and isv:
        cursor = 'cursor-move'
    elif ish:
        cursor = 'cursor-ns-resize'
    elif isv:
        cursor = 'cursor-ew-resize'
    else:
        raise RuntimeError(f"Invalid gutter row({row}) or col({col})")

    if not resizable:
        style = []
    else:
        style = [cursor]

    return Element("div", {"call-client-script": ["fryui_grid_Gutter", [("ish", ish), ("isv", isv), ("cursor", cursor), ("col", col), ("row", row), ("ncol", ncol), ("nrow", nrow), ("resizable", resizable), ("center", center)]], ":el": Element.ClientRef("el"), "@mouseenter": Element.ClientEmbed(0), "@mouseleave": Element.ClientEmbed(1), "@mousedown": Element.ClientEmbed(2), "@touchstart": Element.ClientEmbed(3), "bg-gray-bd": True, "relative": True, "children": [Element("div", {":bar": Element.ClientRef("bar"), "absolute": True, "bg-none": True, "transition-colors": True, "duration-300": True, "ease-in-out": True, "z-100": True, **{ key: True for key in (style)}, "children": []})]})


if __name__ == '__main__':
    from fryweb import render
    columns = ['1fr', '1fr', '1fr']
    rows = '1fr 1fr'
    print(render(Element(Grid, {"columns": columns, "rows": rows, "children": [Element("div", {"children": []}), Element("div", {"children": []}), Element("div", {"children": []})]})))
