import as3lib as as3
from as3lib.flash.utils import ByteArray
from os import urandom


def generateRandomBytes(numberRandomBytes: int | as3.uint | as3.Int):
   """
   Generates a sequence of random bytes.
   Use generateRandomBytes() to generate cryptographic keys, strong identifiers, session ids, and so on. The random sequence is generated using cryptographically strong functions provided by the operating system. If the appropriate function is not available on an individual client computer or device, then an error is thrown.
   Parameters:
      numberRandomBytes:uint — the number random bytes to generate, between 1 and 1024.
   Returns:
      ByteArray — a ByteArray containing the generated bytes.
   """
   if numberRandomBytes > 1024 or numberRandomBytes < 1:
      raise as3.Error(f"generateRandomBytes; numberRandomBytes outside of expected range; expected uint between 1 and 1024, got {numberRandomBytes}")
   output = ByteArray()
   output.write(urandom(int(numberRandomBytes)))
   return output
