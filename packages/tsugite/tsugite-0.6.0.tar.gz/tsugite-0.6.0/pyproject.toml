[build-system]
requires = ["setuptools>=70", "setuptools-scm>=8", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "tsugite"
dynamic = ["version"]
description = "System-oriented dashboards for DroneCAN & Cyphal (YAML-powered)"
readme = "README.md"
requires-python = ">=3.9"
license = "MIT"
authors = [{ name = "Dmitry Ponomarev", email = "ponomarevda96@gmail.com" }]
keywords = ["uav", "drone", "dronecan", "cyphal", "dashboard", "telemetry", "yaml"]
classifiers = [
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3 :: Only",
  "Operating System :: OS Independent",
  "Typing :: Typed",
]

dependencies = [
  "pyyaml>=6.0.3",
]

[project.optional-dependencies]
dronecan = [
  # desktop
  "PySide6>=6.10.0",
  "folium>=0.20.0",
  "pyqtgraph>=0.13.7",

  # dronecan
  "python-can==4.3",
  "pyserial>=3.5.0",
  "dronecan>=1.0.27",   # 2025, Oct 29
  "setuptools==80.9.0",
]
cyphal = [
  # desktop
  "PySide6>=6.10.0",
  "folium>=0.20.0",
  "pyqtgraph>=0.13.7",

  "yakut>=0.14.1",
]
all = [
  # desktop
  "PySide6>=6.10.0",
  "folium>=0.20.0",
  "pyqtgraph>=0.13.7",

  # dronecan
  "python-can==4.3",
  "pyserial>=3.5.0",
  "dronecan>=1.0.27",   # 2025, Oct 29
  "setuptools==80.9.0",

  # deploy pypi
  "build",
  "twine",

  # dev
  "pylint>=4.0.2",
]

# Keep this for backward compatibility for a while, remove later!
desktop-dronecan = [
  # desktop
  "PySide6>=6.10.0",
  "folium>=0.20.0",
  "pyqtgraph>=0.13.7",

  # dronecan
  "python-can==4.3",
  "pyserial>=3.5.0",
  "dronecan>=1.0.27",   # 2025, Oct 29
  "setuptools==80.9.0",
]

[project.scripts]
tsugite = "tsugite.cli:run_with_args"

[project.urls]
Homepage = "https://github.com/PonomarevDA/tsugite"
Issues = "https://github.com/PonomarevDA/tsugite/issues"

[tool.setuptools]
package-dir = { "" = "src" }
include-package-data = true

[tool.setuptools.packages.find]
where = ["src"]

# Ship typed markers/assets when you add them.
[tool.setuptools.package-data]
tsugite = ["py.typed", "configs/**/*.yaml"]

[tool.setuptools_scm]
version_scheme = "no-guess-dev"
local_scheme   = "node-and-date"
fallback_version = "0.0.0"
