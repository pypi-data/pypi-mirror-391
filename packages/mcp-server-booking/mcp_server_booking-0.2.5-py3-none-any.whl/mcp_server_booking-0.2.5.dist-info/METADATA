Metadata-Version: 2.4
Name: mcp-server-booking
Version: 0.2.5
Summary: MCP server for CUHKSZ booking system
Author-email: LKCY23 <lkcydream@gmail.com>
License: MIT
Keywords: CUHKSZ,Booking,MCP
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.9
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: pytz>=2024.2
Requires-Dist: requests>=2.30.0
Requires-Dist: urllib3>=2.2.3
Requires-Dist: lxml>=5.3.0
Requires-Dist: pyOpenSSL>=24.2.1
Requires-Dist: httpx>=0.28.1
Requires-Dist: fastmcp>=2.0.0
Requires-Dist: python-dotenv>=1.0.0
Requires-Dist: pydantic>=2.0.0
Dynamic: license-file

# CUHKSZ Booking MCP æœåŠ¡å™¨

ä¸€ä¸ªåŸºäºæ¨¡å‹ä¸Šä¸‹æ–‡åè®® (MCP) çš„é¦™æ¸¯ä¸­æ–‡å¤§å­¦ï¼ˆæ·±åœ³ï¼‰åœºé¦†é¢„è®¢ç³»ç»Ÿæ¥å£æœåŠ¡ã€‚

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æè¿°](#é¡¹ç›®æè¿°)
- [å¯ç”¨å·¥å…·](#å¯ç”¨å·¥å…·)
- [å®‰è£…ä¸éƒ¨ç½²](#å®‰è£…ä¸éƒ¨ç½²)
- [æµ‹è¯•è¯´æ˜](#æµ‹è¯•è¯´æ˜)
- [é¡¹ç›®æ¶æ„](#é¡¹ç›®æ¶æ„)
- [å®ç°æ–¹å¼ä¸æ ¸å¿ƒé€»è¾‘](#å®ç°æ–¹å¼ä¸æ ¸å¿ƒé€»è¾‘)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [è®¸å¯è¯ä¸å…è´£å£°æ˜](#è®¸å¯è¯ä¸å…zå£°æ˜)

## âœ¨ é¡¹ç›®æè¿°

ä¸€ä¸ªåŸºäºæ¨¡å‹ä¸Šä¸‹æ–‡åè®® (MCP) çš„é¦™æ¸¯ä¸­æ–‡å¤§å­¦ï¼ˆæ·±åœ³ï¼‰åœºé¦†é¢„è®¢ç³»ç»Ÿæ¥å£æœåŠ¡ï¼Œè¯¥æœåŠ¡ä½¿è¯­è¨€æ¨¡å‹èƒ½å¤ŸæŸ¥è¯¢åœºåœ°ä¿¡æ¯ã€æ£€æŸ¥å¯ç”¨æ—¶æ®µå¹¶æ‰§è¡Œåœ¨çº¿é¢„è®¢ã€‚

## ğŸ› ï¸ å¯ç”¨å·¥å…·

æœ¬æœåŠ¡æä¾›äº†ä¸€å¥—ç»“æ„åŒ–çš„å·¥å…·ï¼Œç”¨äºæŸ¥è¯¢å’Œé¢„è®¢åœºåœ°ã€‚æ¨èçš„è°ƒç”¨æµç¨‹æ˜¯ï¼š
1.  ä½¿ç”¨ `booking_get_field_info` è·å–ç›®æ ‡åœºåœ°ç±»å‹çš„æ€»ä½“ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶ä¸‹çš„å…·ä½“åœºæ‰€åˆ—è¡¨åŠå…¶ IDã€‚
2.  ä½¿ç”¨ `booking_get_all_available_slots` æŸ¥çœ‹æŒ‡å®šæ—¶é—´èŒƒå›´å†…æ‰€æœ‰åœºåœ°çš„è¯¦ç»†å¯ç”¨æ—¶é—´æ®µã€‚
3.  ä½¿ç”¨ `booking_get_available_places` æŸ¥è¯¢åœ¨ç‰¹å®šæ—¶é—´æ®µå†…ï¼Œå“ªäº›å…·ä½“åœºæ‰€æ˜¯å¯ç”¨çš„ã€‚
4.  ä½¿ç”¨ `booking_book` é¢„è®¢ä¸€ä¸ªç¡®åˆ‡çš„å¯ç”¨åœºæ‰€ã€‚

---

### 1. `booking_get_field_info`
æŸ¥è¯¢æŒ‡å®šåœºåœ°ç±»å‹åœ¨æŸä¸€å¤©å†…çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ‰€æœ‰å…·ä½“åœºæ‰€çš„åˆ—è¡¨å’Œå½“å¤©çš„é¢„è®¢æƒ…å†µã€‚

- **å‚æ•°è¯´æ˜**:
  - `field` (`Literal["badminton"]`): **å¿…é¡»**ã€‚è¦æŸ¥è¯¢çš„åœºåœ°ç±»å‹ã€‚
    - **çº¦æŸ**: ç›®å‰ä»…æ”¯æŒ `"badminton"`ã€‚å¿…é¡»ä½¿ç”¨è‹±æ–‡åç§°ã€‚
  - `start_time` (`string`): **å¿…é¡»**ã€‚æŸ¥è¯¢èŒƒå›´çš„å¼€å§‹æ—¶é—´ã€‚
    - **æ ¼å¼**: `YYYY-MM-DD HH:MM`ã€‚
  - `end_time` (`string`): **å¿…é¡»**ã€‚æŸ¥è¯¢èŒƒå›´çš„ç»“æŸæ—¶é—´ã€‚
    - **æ ¼å¼**: `YYYY-MM-DD HH:MM`ã€‚

- **è¿”å›ç¤ºä¾‹**:
  ```
  åœºåœ°ä¿¡æ¯:
  åœºåœ°åç§°: badminton
  åœºåœ°ID: 1097
  
  å¯ç”¨åœºæ‰€:
    - ç¾½æ¯›çƒåœº1 (ID: 1100)
    - ç¾½æ¯›çƒåœº2 (ID: 1101)
    ...
  
  å½“å‰é¢„è®¢ (3 ä¸ª):
    - Booker: å¼ ä¸‰, Start Time: ..., End Time: ..., Reason: ..., PlaceID: 1100
    ...
  ```

---

### 2. `booking_get_all_available_slots`
æŸ¥è¯¢æŒ‡å®šæ—¶é—´èŒƒå›´å†…ï¼Œæ¯ä¸ªåœºåœ°æ‰€æœ‰å¯ç”¨çš„å…·ä½“æ—¶é—´æ®µã€‚è¿™ä¼šè¿”å›ä¸€ä¸ªè¯¦ç»†çš„æ—¶é—´æ®µåˆ—è¡¨ï¼Œæ˜¾ç¤ºæ¯ä¸ªåœºåœ°åœ¨æŒ‡å®šæ—¥æœŸèŒƒå›´å†…çš„æ‰€æœ‰å¯ç”¨æ—¶é—´æ®µã€‚

- **å‚æ•°è¯´æ˜**:
  - `field` (`Literal["badminton"]`): **å¿…é¡»**ã€‚è¦æŸ¥è¯¢çš„åœºåœ°ç±»å‹ã€‚
    - **çº¦æŸ**: ç›®å‰ä»…æ”¯æŒ `"badminton"`ã€‚å¿…é¡»ä½¿ç”¨è‹±æ–‡åç§°ã€‚
  - `start_time` (`string`): **å¿…é¡»**ã€‚æŸ¥è¯¢çš„å¼€å§‹æ—¶é—´ã€‚
    - **æ ¼å¼**: `YYYY-MM-DD HH:MM`ã€‚
  - `end_time` (`string`): **å¿…é¡»**ã€‚æŸ¥è¯¢çš„ç»“æŸæ—¶é—´ã€‚
    - **æ ¼å¼**: `YYYY-MM-DD HH:MM`ã€‚

- **è¿”å›ç¤ºä¾‹**:
  ```
  æŸ¥è¯¢æ—¶é—´æ®µ 2025-01-01 08:00 åˆ° 2025-01-01 22:00 å†…çš„æ‰€æœ‰å¯ç”¨æ—¶é—´æ®µ:

  åœºåœ°: ç¾½æ¯›çƒåœº1 (ID: 1100)
    - 2025-01-01 08:00 åˆ° 2025-01-01 09:00
    - 2025-01-01 10:00 åˆ° 2025-01-01 12:00
    - 2025-01-01 14:00 åˆ° 2025-01-01 16:00

  åœºåœ°: ç¾½æ¯›çƒåœº2 (ID: 1101)
    - 2025-01-01 09:00 åˆ° 2025-01-01 11:00
    - 2025-01-01 13:00 åˆ° 2025-01-01 15:00
  ```

---

### 3. `booking_get_available_places`
æ ¹æ® `booking_get_field_info` çš„ç»“æœï¼ŒæŸ¥è¯¢åœ¨æ‚¨æŒ‡å®šçš„æ—¶é—´æ®µå†…ï¼Œå“ªäº›å…·ä½“çš„åœºæ‰€æ˜¯ç©ºé—²çš„ã€‚

- **å‚æ•°è¯´æ˜**:
  - `field` (`Literal["badminton"]`): **å¿…é¡»**ã€‚è¦æŸ¥è¯¢çš„åœºåœ°ç±»å‹ã€‚
    - **çº¦æŸ**: ç›®å‰ä»…æ”¯æŒ `"badminton"`ã€‚å¿…é¡»ä½¿ç”¨è‹±æ–‡åç§°ã€‚
  - `query_start_time` (`string`) & `query_end_time` (`string`): **å¿…é¡»**ã€‚ç”¨äºè·å–å½“å¤©é¢„è®¢ä¿¡æ¯çš„æŸ¥è¯¢èŒƒå›´ï¼Œé€šå¸¸æ˜¯åœºåœ°å¼€æ”¾çš„ä¸€æ•´å¤©ï¼ˆå¦‚ `08:00` åˆ° `22:00`ï¼‰ã€‚
    - **æ ¼å¼**: `YYYY-MM-DD HH:MM`ã€‚
  - `check_start_time` (`string`) & `check_end_time` (`string`): **å¿…é¡»**ã€‚æ‚¨å¸Œæœ›é¢„è®¢çš„**å…·ä½“**æ—¶é—´æ®µã€‚
    - **æ ¼å¼**: `YYYY-MM-DD HH:MM`ã€‚

- **è¿”å›ç¤ºä¾‹**:
  ```
  æ—¶é—´æ®µ 2025-01-01 17:00 åˆ° 2025-01-01 18:00 çš„å¯ç”¨åœºåœ°:

    - ç¾½æ¯›çƒåœº2 (ID: 1101)
    - ç¾½æ¯›çƒåœº4 (ID: 1103)

  å…± 2 ä¸ªåœºåœ°å¯ç”¨
  ```

---

### 4. `booking_book`
æ‰§è¡Œé¢„è®¢æ“ä½œã€‚æ‚¨éœ€è¦æä¾›ä»å…¶ä»–å·¥å…·ä¸­è·å–çš„ IDã€‚é¢„è®¢ç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œä»¥ä¸‹éªŒè¯ï¼š

**é‡è¦éªŒè¯è§„åˆ™**:
1. **æ—¶é—´èŒƒå›´é™åˆ¶**: åªèƒ½é¢„è®¢ä»Šæ˜ä¸¤å¤©çš„æ—¶é—´æ®µ
2. **é¢„è®¢æ—¶é—´é™åˆ¶**: åœºé¦†æ¯å¤©çš„æœ‰æ•ˆé¢„è®¢æ—¶é—´ä¸º 08:00 è‡³ 22:00
3. **æ—¶é•¿é™åˆ¶**: å•æ¬¡é¢„è®¢æ—¶é•¿ä¸èƒ½è¶…è¿‡1å°æ—¶
4. **é¢‘ç‡é™åˆ¶**: æ¯å‘¨æœ€å¤šé¢„è®¢1æ¬¡
5. **é¢„è®¢å‰å¿…é¡»å…ˆæŸ¥è¯¢å¯ç”¨åœºåœ°**

- **å‚æ•°è¯´æ˜**:
  - `field_id` (`string`): **å¿…é¡»**ã€‚è¦é¢„è®¢çš„**åœºåœ°ç±»å‹**çš„ IDï¼Œä» `booking_get_field_info` è·å– (ä¾‹å¦‚ï¼Œç¾½æ¯›çƒåœºåœ°çš„ ID æ˜¯ "1097")ã€‚
  - `place_id` (`string`): **å¿…é¡»**ã€‚è¦é¢„è®¢çš„**å…·ä½“åœºæ‰€**çš„ IDï¼Œä» `booking_get_available_places` çš„è¿”å›ç»“æœä¸­é€‰å–ã€‚
  - `start_time` (`string`) & `end_time` (`string`): **å¿…é¡»**ã€‚é¢„è®¢çš„èµ·æ­¢æ—¶é—´ã€‚
    - **æ ¼å¼**: `YYYY-MM-DD HH:MM`ã€‚
    - **é™åˆ¶**: åªèƒ½é¢„è®¢ä»Šæ˜ä¸¤å¤©ï¼Œä¸”å¿…é¡»åœ¨08:00-22:00ä¹‹é—´ã€‚
  - `telephone` (`string`): **å¿…é¡»**ã€‚æ‚¨çš„è”ç³»ç”µè¯ã€‚
  - `reason` (`string`): **å¿…é¡»**ã€‚é¢„è®¢åŸå› æˆ–ä¸»é¢˜ (ä¾‹å¦‚ "ğŸ¸" æˆ– "Badminton Practice")ã€‚
  - `details` (`string`): **å¿…é¡»**ã€‚é¢„è®¢çš„è¯¦ç»†è¯´æ˜ã€‚

- **è¿”å›ç¤ºä¾‹**:
  ```
  é¢„è®¢æˆåŠŸï¼

  åœºåœ°ID: 1097
  åœºæ‰€ID: 1101
  æ—¶é—´: 2025-01-01 10:00 åˆ° 2025-01-01 11:00
  è”ç³»ç”µè¯: 1234567890
  é¢„è®¢åŸå› : ğŸ¸
  è¯¦ç»†è¯´æ˜: å’Œæœ‹å‹ä¸€èµ·ç»ƒä¹ ç¾½æ¯›çƒ

  è¯·æŒ‰æ—¶åˆ°åœºå¹¶éµå®ˆåœºé¦†è§„å®šã€‚
  ```

## ğŸš€ å®‰è£…ä¸éƒ¨ç½²

æœ¬æœåŠ¡æ”¯æŒ Docker éƒ¨ç½²å’Œæœ¬åœ°è¿è¡Œä¸¤ç§æ–¹å¼ã€‚

### 1. ä½¿ç”¨ Docker (æ¨è)

æ­¤æ–¹æ³•æœ€ç®€å•ï¼Œæ¨èç”¨äºç”Ÿäº§å’Œæ—¥å¸¸ä½¿ç”¨ã€‚

**a. ç¯å¢ƒå‡†å¤‡**

- å®‰è£… [Docker](https://www.docker.com/get-started/) å’Œ [Docker Compose](https://docs.docker.com/compose/install/)ã€‚
- å…‹éš†é¡¹ç›®:
  ```bash
  git clone https://github.com/BetterAndBetterII/awesome-cuhksz-mcp.git
  cd BOOKING-MCP
  ```

**b. é…ç½®å‡­è¯**

åœ¨é¡¹ç›®æ ¹ç›®å½• (`BOOKING-MCP/`) åˆ›å»ºä¸€ä¸ª `.env` æ–‡ä»¶ï¼Œå¹¶å¡«å…¥æ‚¨çš„å‡­è¯ã€‚

```
# .env æ–‡ä»¶å†…å®¹
BOOKING_USERNAME=ä½ çš„å­¦å·
BOOKING_PASSWORD=ä½ çš„å¯†ç 
```
**âš ï¸ å®‰å…¨æé†’**: è¯·å‹¿å°† `.env` æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚

**c. æ„å»ºå’Œå¯åŠ¨æœåŠ¡**

```bash
# æ„å»ºå¹¶ä»¥å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼å¯åŠ¨å®¹å™¨
docker-compose up --build -d

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
docker-compose logs -f booking-mcp

# åœæ­¢æœåŠ¡
docker-compose down
```
æœåŠ¡å¯åŠ¨åï¼Œå°†åœ¨ `http://localhost:3001` ä¸Šæä¾› MCP æ¥å£ã€‚

### 2. æœ¬åœ°è¿è¡Œ (ç”¨äºå¼€å‘)

**a. ç¯å¢ƒå‡†å¤‡**

å…‹éš†é¡¹ç›®å¹¶è¿›å…¥ç›®å½•ï¼š
```bash
git clone https://github.com/BetterAndBetterII/awesome-cuhksz-mcp.git
cd BOOKING-MCP
```

åˆ›å»ºå¹¶æ¿€æ´» Python è™šæ‹Ÿç¯å¢ƒï¼š
```bash
python3 -m venv .venv
source .venv/bin/activate
```

å®‰è£…é¡¹ç›®ä¾èµ–ï¼ˆä»¥å¯ç¼–è¾‘æ¨¡å¼ï¼‰ï¼š
```bash
pip install -e .
```

**b. é…ç½®å‡­è¯**

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼æä¾›å‡­è¯ï¼ˆå‘½ä»¤è¡Œå‚æ•°ä¼˜å…ˆï¼‰ï¼š

1.  **ï¼ˆæ¨èï¼‰åˆ›å»º `.env` æ–‡ä»¶**:
    åœ¨é¡¹ç›®æ ¹ç›®å½• (`BOOKING-MCP/`) ä¸‹åˆ›å»ºä¸€ä¸ª `.env` æ–‡ä»¶ã€‚
    ```
    # .env æ–‡ä»¶å†…å®¹
    BOOKING_USERNAME=ä½ çš„å­¦å·
    BOOKING_PASSWORD=ä½ çš„å¯†ç 
    ```

2.  **å‘½ä»¤è¡Œå‚æ•°**:
    åœ¨å¯åŠ¨å‘½ä»¤ä¸­ç›´æ¥æä¾›ã€‚

**c. å¯åŠ¨æœåŠ¡**

- å¦‚æœæ‚¨é…ç½®äº† `.env` æ–‡ä»¶ï¼š
  ```bash
  # ä½¿ç”¨æ¨¡å—åå¯åŠ¨ (é»˜è®¤ä½¿ç”¨ stdio ä¼ è¾“)
  python -m mcp_server_booking
  # æˆ–
  mcp-server-booking
  ```

- å¦‚æœæ‚¨å¸Œæœ›ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•° (é»˜è®¤ä½¿ç”¨ stdio ä¼ è¾“)ï¼š
  ```bash
  python -m mcp_server_booking --username ä½ çš„å­¦å· --password ä½ çš„å¯†ç 
  ```
  
> **æ³¨æ„**: `stdio` æ¨¡å¼ç”¨äºç›´æ¥çš„è¿›ç¨‹é—´é€šä¿¡ï¼Œä¸ä¼šç›‘å¬ç½‘ç»œç«¯å£ã€‚å¦‚æœéœ€è¦é€šè¿‡ç½‘ç»œï¼ˆå¦‚ `http://localhost:3001`ï¼‰è®¿é—®æœåŠ¡ï¼Œæˆ–è¿è¡Œ `test/test.py` è„šæœ¬ï¼Œå¿…é¡»åœ¨å¯åŠ¨æ—¶æŒ‡å®š `sse` ä¼ è¾“æ¨¡å¼ï¼š
> ```bash
> python -m mcp_server_booking --transport sse
> ```

- å¦‚æœæ‚¨å¸Œæœ›ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æä¾›å‡­è¯å¹¶ä½¿ç”¨ SSE ä¼ è¾“ï¼š
  ```bash
  python -m mcp_server_booking --transport sse --username ä½ çš„å­¦å· --password ä½ çš„å¯†ç 
  ```

å½“ä½¿ç”¨ `sse` æ¨¡å¼å¯åŠ¨åï¼ŒæœåŠ¡å°†åœ¨ `http://localhost:3001` ä¸Šæä¾› MCP æ¥å£ã€‚

## ğŸ“„ é¡¹ç›®æ¶æ„

### æ ¸å¿ƒæ¨¡å—è¯´æ˜

- **`
