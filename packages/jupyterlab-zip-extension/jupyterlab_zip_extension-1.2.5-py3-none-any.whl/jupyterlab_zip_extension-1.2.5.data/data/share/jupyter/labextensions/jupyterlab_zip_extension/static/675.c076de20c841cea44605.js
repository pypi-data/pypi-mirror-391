"use strict";(self.webpackChunkjupyterlab_zip_extension=self.webpackChunkjupyterlab_zip_extension||[]).push([[675],{675:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var o=r(986),n=r(249),i=r(560),a=r(694),c=r(297),s=r(860);async function l(e="",t={}){const r=s.ServerConnection.makeSettings(),o=c.URLExt.join(r.baseUrl,"jupyterlab-zip",e);let n;try{n=await s.ServerConnection.makeRequest(o,t,r)}catch(e){throw new s.ServerConnection.NetworkError(e)}let i=await n.text();if(i.length>0)try{i=JSON.parse(i)}catch(e){console.log("Not a JSON response body.",n)}if(!n.ok)throw new s.ServerConnection.ResponseError(n,i.message||i);return i}const d=new a.LabIcon({name:"jupyterlab_zip_extension:zip",svgstr:'\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">\n  \x3c!-- Folder/document shape in darker yellow with visible outline --\x3e\n  <path fill="#D4A017" stroke="#8B7500" stroke-width="1" d="M14,2H6C4.9,2,4,2.9,4,4v16c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V8L14,2z"/>\n  <path fill="#D4A017" stroke="#8B7500" stroke-width="1" d="M14,2v6h6"/>\n  \x3c!-- Large bold lowercase z letter --\x3e\n  <text x="12" y="18" font-family="Arial Black, Arial, sans-serif" font-size="14" font-weight="900" text-anchor="middle" fill="#3D2F0F">z</text>\n</svg>\n'}),p="jupyterlab_zip_extension:plugin",h="filebrowser:unzip-file",m="filebrowser:zip-files";function u(e){return"zip"===e.toLowerCase().split(".").pop()}const f={id:p,description:"A JupyterLab extension to zip/unzip files in the file browser.",autoStart:!0,requires:[n.IFileBrowserFactory],optional:[o.ICommandPalette,i.ISettingRegistry],activate:(e,t,r,n)=>{console.log("JupyterLab Zip/Unzip Extension is activated!");const{commands:i,docRegistry:a}=e,{tracker:c}=t;a.addFileType({name:"zip",displayName:"ZIP Archive",extensions:[".zip"],fileFormat:"base64",contentType:"file",icon:d});let s=!0;n&&n.load(p).then(e=>{s=e.get("extractToNamedFolder").composite,console.log(`Zip extension settings loaded: extractToNamedFolder=${s}`),e.changed.connect(()=>{s=e.get("extractToNamedFolder").composite,console.log(`Zip extension settings changed: extractToNamedFolder=${s}`)})}).catch(e=>{console.error("Failed to load settings for jupyterlab-zip-extension.",e)}),i.addCommand(h,{label:"Extract Archive",caption:"Extract the selected archive file",icon:d,execute:async()=>{const e=c.currentWidget;if(!e)return void console.warn("No file browser widget active");const t=Array.from(e.selectedItems());if(1!==t.length)return void console.warn("Please select exactly one archive file");const r=t[0];if(u(r.name))try{console.log(`Extracting ${r.name}...`);const t=await l("unzip",{method:"POST",body:JSON.stringify({archive_path:r.path,extract_to_named_folder:s})});t.success?(console.log(`Successfully extracted to: ${t.extract_path}`),await e.model.refresh()):console.error(`Extraction failed: ${t.error}`)}catch(e){console.error("Error extracting archive:",e)}else console.warn("Selected file is not a supported archive format (.zip)")},isEnabled:()=>{const e=c.currentWidget;if(!e)return!1;const t=Array.from(e.selectedItems());return 1===t.length&&u(t[0].name)},isVisible:()=>{const e=c.currentWidget;if(!e)return!1;const t=Array.from(e.selectedItems());return 1===t.length&&u(t[0].name)}}),i.addCommand(m,{label:"Create Archive",caption:"Create a zip archive from selected files/folders",icon:d,execute:async()=>{const e=c.currentWidget;if(!e)return;const t=Array.from(e.selectedItems());if(0===t.length)return;const r=1===t.length?`${t[0].name}.zip`:"archive.zip",n=await o.InputDialog.getText({title:"Create Archive",text:r,label:"Archive name:"});if(n.button.accept&&n.value){let r=n.value;r.endsWith(".zip")||(r+=".zip");try{console.log(`Creating archive ${r}...`);const o=t.map(e=>e.path),n=await l("zip",{method:"POST",body:JSON.stringify({archive_name:r,paths:o})});n.success?(console.log(`Successfully created archive: ${n.archive_path}`),await e.model.refresh()):console.error(`Archive creation failed: ${n.error}`)}catch(e){console.error("Error creating archive:",e)}}},isEnabled:()=>{const e=c.currentWidget;return!!e&&Array.from(e.selectedItems()).length>0}}),e.contextMenu.addItem({command:h,selector:".jp-DirListing-item",rank:11}),e.contextMenu.addItem({command:m,selector:".jp-DirListing-item",rank:11}),r&&(r.addItem({command:h,category:"File Operations"}),r.addItem({command:m,category:"File Operations"}))}}}}]);