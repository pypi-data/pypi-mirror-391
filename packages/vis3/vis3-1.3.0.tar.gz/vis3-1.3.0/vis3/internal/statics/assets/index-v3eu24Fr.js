import{r as g,I as G,aV as de,aW as he,j as r,T as fe,H as me,h as z,B as T,R as ye,F as R,e as ee,b as te,m as W,_ as ae,aX as pe,aY as xe}from"./index-C-ku7Uvl.js";import{a as $e,M as ve,b as ge,R as je,A as we,c as Me,d as ke,S as Se}from"./keychain.query-CfpmFlVy.js";import{P as be}from"./index-6rLuIUKq.js";function U(){return U=Object.assign?Object.assign.bind():function(u){for(var o=1;o<arguments.length;o++){var f=arguments[o];for(var l in f)Object.prototype.hasOwnProperty.call(f,l)&&(u[l]=f[l])}return u},U.apply(this,arguments)}const De=(u,o)=>g.createElement(G,U({},u,{ref:o,icon:de})),Oe=g.forwardRef(De);var _e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"};function J(){return J=Object.assign?Object.assign.bind():function(u){for(var o=1;o<arguments.length;o++){var f=arguments[o];for(var l in f)Object.prototype.hasOwnProperty.call(f,l)&&(u[l]=f[l])}return u},J.apply(this,arguments)}const Ce=(u,o)=>g.createElement(G,J({},u,{ref:o,icon:_e})),He=g.forwardRef(Ce);var Ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"};function X(){return X=Object.assign?Object.assign.bind():function(u){for(var o=1;o<arguments.length;o++){var f=arguments[o];for(var l in f)Object.prototype.hasOwnProperty.call(f,l)&&(u[l]=f[l])}return u},X.apply(this,arguments)}const Ne=(u,o)=>g.createElement(G,X({},u,{ref:o,icon:Ke})),Ie=g.forwardRef(Ne);var Z={exports:{}},Ve=Z.exports,ie;function Te(){return ie||(ie=1,(function(u,o){(function(f,l){u.exports=l()})(Ve,(function(){var f=1e3,l=6e4,v=36e5,D="millisecond",k="second",d="minute",S="hour",w="day",b="week",y="month",E="quarter",_="year",I="date",ne="Invalid Date",ce=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ue=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,oe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(a){var n=["th","st","nd","rd"],e=a%100;return"["+a+(n[(e-20)%10]||n[e]||n[0])+"]"}},B=function(a,n,e){var s=String(a);return!s||s.length>=n?a:""+Array(n+1-s.length).join(e)+a},le={s:B,z:function(a){var n=-a.utcOffset(),e=Math.abs(n),s=Math.floor(e/60),t=e%60;return(n<=0?"+":"-")+B(s,2,"0")+":"+B(t,2,"0")},m:function a(n,e){if(n.date()<e.date())return-a(e,n);var s=12*(e.year()-n.year())+(e.month()-n.month()),t=n.clone().add(s,y),i=e-t<0,c=n.clone().add(s+(i?-1:1),y);return+(-(s+(e-t)/(i?t-c:c-t))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M:y,y:_,w:b,d:w,D:I,h:S,m:d,s:k,ms:D,Q:E}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},F="en",H={};H[F]=oe;var se="$isDayjsObject",Q=function(a){return a instanceof L||!(!a||!a[se])},q=function a(n,e,s){var t;if(!n)return F;if(typeof n=="string"){var i=n.toLowerCase();H[i]&&(t=i),e&&(H[i]=e,t=i);var c=n.split("-");if(!t&&c.length>1)return a(c[0])}else{var m=n.name;H[m]=n,t=m}return!s&&t&&(F=t),t||!s&&F},x=function(a,n){if(Q(a))return a.clone();var e=typeof n=="object"?n:{};return e.date=a,e.args=arguments,new L(e)},h=le;h.l=q,h.i=Q,h.w=function(a,n){return x(a,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var L=(function(){function a(e){this.$L=q(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[se]=!0}var n=a.prototype;return n.parse=function(e){this.$d=(function(s){var t=s.date,i=s.utc;if(t===null)return new Date(NaN);if(h.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var c=t.match(ce);if(c){var m=c[2]-1||0,p=(c[7]||"0").substring(0,3);return i?new Date(Date.UTC(c[1],m,c[3]||1,c[4]||0,c[5]||0,c[6]||0,p)):new Date(c[1],m,c[3]||1,c[4]||0,c[5]||0,c[6]||0,p)}}return new Date(t)})(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return h},n.isValid=function(){return this.$d.toString()!==ne},n.isSame=function(e,s){var t=x(e);return this.startOf(s)<=t&&t<=this.endOf(s)},n.isAfter=function(e,s){return x(e)<this.startOf(s)},n.isBefore=function(e,s){return this.endOf(s)<x(e)},n.$g=function(e,s,t){return h.u(e)?this[s]:this.set(t,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,s){var t=this,i=!!h.u(s)||s,c=h.p(e),m=function(N,M){var C=h.w(t.$u?Date.UTC(t.$y,M,N):new Date(t.$y,M,N),t);return i?C:C.endOf(w)},p=function(N,M){return h.w(t.toDate()[N].apply(t.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(M)),t)},$=this.$W,j=this.$M,O=this.$D,V="set"+(this.$u?"UTC":"");switch(c){case _:return i?m(1,0):m(31,11);case y:return i?m(1,j):m(0,j+1);case b:var K=this.$locale().weekStart||0,Y=($<K?$+7:$)-K;return m(i?O-Y:O+(6-Y),j);case w:case I:return p(V+"Hours",0);case S:return p(V+"Minutes",1);case d:return p(V+"Seconds",2);case k:return p(V+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,s){var t,i=h.p(e),c="set"+(this.$u?"UTC":""),m=(t={},t[w]=c+"Date",t[I]=c+"Date",t[y]=c+"Month",t[_]=c+"FullYear",t[S]=c+"Hours",t[d]=c+"Minutes",t[k]=c+"Seconds",t[D]=c+"Milliseconds",t)[i],p=i===w?this.$D+(s-this.$W):s;if(i===y||i===_){var $=this.clone().set(I,1);$.$d[m](p),$.init(),this.$d=$.set(I,Math.min(this.$D,$.daysInMonth())).$d}else m&&this.$d[m](p);return this.init(),this},n.set=function(e,s){return this.clone().$set(e,s)},n.get=function(e){return this[h.p(e)]()},n.add=function(e,s){var t,i=this;e=Number(e);var c=h.p(s),m=function(j){var O=x(i);return h.w(O.date(O.date()+Math.round(j*e)),i)};if(c===y)return this.set(y,this.$M+e);if(c===_)return this.set(_,this.$y+e);if(c===w)return m(1);if(c===b)return m(7);var p=(t={},t[d]=l,t[S]=v,t[k]=f,t)[c]||1,$=this.$d.getTime()+e*p;return h.w($,this)},n.subtract=function(e,s){return this.add(-1*e,s)},n.format=function(e){var s=this,t=this.$locale();if(!this.isValid())return t.invalidDate||ne;var i=e||"YYYY-MM-DDTHH:mm:ssZ",c=h.z(this),m=this.$H,p=this.$m,$=this.$M,j=t.weekdays,O=t.months,V=t.meridiem,K=function(M,C,A,P){return M&&(M[C]||M(s,i))||A[C].slice(0,P)},Y=function(M){return h.s(m%12||12,M,"0")},N=V||function(M,C,A){var P=M<12?"AM":"PM";return A?P.toLowerCase():P};return i.replace(ue,(function(M,C){return C||(function(A){switch(A){case"YY":return String(s.$y).slice(-2);case"YYYY":return h.s(s.$y,4,"0");case"M":return $+1;case"MM":return h.s($+1,2,"0");case"MMM":return K(t.monthsShort,$,O,3);case"MMMM":return K(O,$);case"D":return s.$D;case"DD":return h.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return K(t.weekdaysMin,s.$W,j,2);case"ddd":return K(t.weekdaysShort,s.$W,j,3);case"dddd":return j[s.$W];case"H":return String(m);case"HH":return h.s(m,2,"0");case"h":return Y(1);case"hh":return Y(2);case"a":return N(m,p,!0);case"A":return N(m,p,!1);case"m":return String(p);case"mm":return h.s(p,2,"0");case"s":return String(s.$s);case"ss":return h.s(s.$s,2,"0");case"SSS":return h.s(s.$ms,3,"0");case"Z":return c}return null})(M)||c.replace(":","")}))},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,s,t){var i,c=this,m=h.p(s),p=x(e),$=(p.utcOffset()-this.utcOffset())*l,j=this-p,O=function(){return h.m(c,p)};switch(m){case _:i=O()/12;break;case y:i=O();break;case E:i=O()/3;break;case b:i=(j-$)/6048e5;break;case w:i=(j-$)/864e5;break;case S:i=j/v;break;case d:i=j/l;break;case k:i=j/f;break;default:i=j}return t?i:h.a(i)},n.daysInMonth=function(){return this.endOf(y).$D},n.$locale=function(){return H[this.$L]},n.locale=function(e,s){if(!e)return this.$L;var t=this.clone(),i=q(e,s,!0);return i&&(t.$L=i),t},n.clone=function(){return h.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},a})(),re=L.prototype;return x.prototype=re,[["$ms",D],["$s",k],["$m",d],["$H",S],["$W",w],["$M",y],["$y",_],["$D",I]].forEach((function(a){re[a[1]]=function(n){return this.$g(n,a[0],a[1])}})),x.extend=function(a,n){return a.$i||(a(n,L,x),a.$i=!0),x},x.locale=q,x.isDayjs=Q,x.unix=function(a){return x(1e3*a)},x.en=H[F],x.Ls=H,x.p={},x}))})(Z)),Z.exports}var Fe=Te();const Ye=he(Fe),Ae=u=>g.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...u},g.createElement("path",{d:"M5.01415 2.0835C4.55392 2.0835 4.18082 2.45659 4.18082 2.91683V5.62578H2.91414C2.45391 5.62578 2.08081 5.99887 2.08081 6.45911V17.0835C2.08081 17.5438 2.45391 17.9169 2.91414 17.9169H13.5417C14.0019 17.9169 14.375 17.5438 14.375 17.0835V15.7735H17.0856C17.5458 15.7735 17.9189 15.4004 17.9189 14.9401V2.91683C17.9189 2.45659 17.5458 2.0835 17.0856 2.0835H5.01415ZM14.375 14.1068V6.45911C14.375 5.99887 14.0019 5.62578 13.5417 5.62578H5.84748V3.75016H16.2523V14.1068H14.375ZM3.74747 16.2502V7.29244H12.7084V16.2502H3.74747Z",fill:"currentColor"}));function Re({value:u,onChange:o,onEditableChange:f}){const[l,v]=g.useState(!1),[D,k]=g.useState(u),d=g.useCallback(b=>{f==null||f(b),v(b)},[f]),S=g.useMemo(()=>typeof u!="string"?"":l?r.jsxs(me.Compact,{className:"w-full",children:[r.jsx(z,{value:D,onChange:b=>k(b.target.value),onPressEnter:async()=>{await(o==null?void 0:o(D)),d(!1)}}),r.jsx(T,{className:"!text-[var(--color-success)]",icon:r.jsx(Oe,{}),onClick:async()=>{await(o==null?void 0:o(D)),d(!1)}}),r.jsx(T,{icon:r.jsx(ye,{}),onClick:()=>{d(!1)}})]}):r.jsx(fe,{title:u,children:r.jsx("span",{className:"text-ellipsis max-w-[120px] overflow-hidden",children:u})}),[l,d,o,D,u]),w=()=>{d(!l)};return r.jsxs("div",{className:"flex items-center gap-2",children:[S,!l&&r.jsx(T,{type:"text",size:"small",icon:r.jsx(Ie,{}),onClick:w})]})}function Ee({modalFormRef:u,onClose:o}){const[f,l]=g.useState(!1),[v]=R.useForm(),D=ee(),{mutateAsync:k}=$e(),{t:d}=te();g.useImperativeHandle(u,()=>({open:()=>{l(!0)},close:()=>{l(!1),v.resetFields()}}));const S=()=>{l(!1),v.resetFields(),o==null||o()},w=y=>{k(y).then(()=>{D.invalidateQueries({queryKey:["my_keychain"]}),S(),W.success(d("keychain.added"))})},b=()=>{v.validateFields().then(y=>{w(y)})};return r.jsx(ve,{open:f,onCancel:S,title:d("keychain.add"),okText:d("bucketForm.save"),onOk:b,children:r.jsxs(R,{form:v,layout:"vertical",name:"keychain",onFinish:w,children:[r.jsx(R.Item,{label:d("keychain.name"),name:"name",rules:[{required:!0,message:d("keychain.namePlaceholder")}],children:r.jsx(z,{placeholder:d("keychain.namePlaceholder")})}),r.jsx(R.Item,{label:d("keychain.accessKeyId"),name:"access_key_id",rules:[{required:!0,message:d("keychain.accessKeyIdPlaceholder")}],children:r.jsx(z,{placeholder:d("keychain.accessKeyIdPlaceholder")})}),r.jsx(R.Item,{label:d("keychain.secretKeyId"),name:"secret_key_id",rules:[{required:!0,message:d("keychain.secretKeyIdPlaceholder")}],children:r.jsx(z,{placeholder:d("keychain.secretKeyIdPlaceholder")})})]})})}function qe({data:u,className:o}){const[f,l]=g.useState(!1),{mutateAsync:v}=Me(),{mutateAsync:D}=ke(),k=ee(),{t:d}=te(),S=y=>{navigator.clipboard.writeText(y),W.success(d("copied"))},w=async y=>{try{await D(y),W.success(d("keychain.deleted")),k.invalidateQueries({queryKey:["my_keychain"]})}catch(E){console.error(E)}},b=async y=>{await v({id:u.id,data:{name:y}}),k.invalidateQueries({queryKey:["my_keychain"]}),W.success(d("keychain.updated"))};return r.jsx(xe,{className:o,title:r.jsx(Re,{value:u.name,onChange:b,onEditableChange:y=>l(y)}),extra:!f&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("span",{className:"text-gray-400",children:r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx(He,{}),Ye(u.created_at).format("YYYY-MM-DD HH:mm:ss")]})}),r.jsx(be,{title:d("keychain.deleteConfirm"),onConfirm:()=>w(u.id),children:r.jsx(T,{danger:!0,type:"text",size:"small",icon:r.jsx(Se,{})})})]}),children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-nowrap",children:"Access Key: "}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-ellipsis max-w-[200px] overflow-hidden",title:u.access_key_id,children:u.access_key_id}),r.jsx(T,{type:"text",size:"small",icon:r.jsx(Ae,{}),onClick:()=>S(u.access_key_id)})]})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-nowrap",children:"Secret Key: "}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"text-ellipsis max-w-[200px] overflow-hidden",title:u.secret_key_id,children:"***"})})]})]})})}function We(){const u=g.useRef(null),{data:o}=ge(1,100),f=ee(),{t:l}=te();return g.useEffect(()=>{document.title="Vis3 - AK&SK"},[l]),r.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[r.jsxs("div",{className:"flex text-2xl font-bold mb-2 items-center justify-between",children:[l("bucketForm.AS&SKManagement"),r.jsx(T,{type:"primary",icon:r.jsx(je,{}),onClick:()=>{var v;(v=u.current)==null||v.open()},children:l("keychain.add")})]}),r.jsx(we,{type:"info",message:l("keychain.addAS&SKTips"),showIcon:!0}),ae.isEmpty(o==null?void 0:o.data)&&r.jsx(pe,{description:l("keychain.noAK&SK")}),r.jsx("div",{className:"flex flex-wrap gap-4 items-stretch",children:ae.chain(o).get("data",[]).map(v=>r.jsx(qe,{className:"shrink-0 w-full sm:w-full md:w-[calc(50%-0.5rem)] lg:w-[calc(33.33%-0.75rem)] grow-0",data:v},v.id)).value()}),r.jsx(Ee,{modalFormRef:u,onClose:()=>{f.invalidateQueries({queryKey:["my_keychain"]})}})]})}export{We as component};
