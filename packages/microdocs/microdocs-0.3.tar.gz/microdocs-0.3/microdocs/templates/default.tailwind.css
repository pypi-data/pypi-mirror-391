@import "tailwindcss";

@plugin "@tailwindcss/typography";

@custom-variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));

@theme {
	--font-sans: Roboto, system-ui, sans-serif;
	--font-heading: "Roboto Slab", serif;
	--font-mono: "IBM Plex Mono", monospace;

	/* Documentation color palette */
	--color-doc-bg: #ffffff;
	--color-doc-text: #24292f;
	--color-doc-heading: #1f2328;
	--color-doc-muted: #59636e;
	--color-doc-border: #d1d9e0;
	--color-doc-link: #0969da;
	--color-doc-code-bg: #f6f8fa;
}

/* Dark mode overrides */
@layer theme {
	[data-theme="dark"] {
		--color-doc-bg: #0d1117;
		--color-doc-text: #c9d1d9;
		--color-doc-heading: #e6edf3;
		--color-doc-muted: #8b949e;
		--color-doc-border: #30363d;
		--color-doc-link: #58a6ff;
		--color-doc-code-bg: #161b22;
	}
}

/* Heading font utility */
.font-heading {
	font-family: var(--font-heading);
}

/* Show linked images side by side (typically badges) */
a:has(img):has(+ a img),
a:has(img) + a:has(img) {
	display: inline-flex;
	vertical-align: middle;
}

/* Smooth scroll behavior with padding for fixed header */
html {
	scroll-behavior: smooth;
	scroll-padding-top: 5.5rem; /* Account for sticky header height */
}

/* Prose customizations for documentation */
@utility prose {
	@apply max-w-none text-doc-text;
	@apply leading-relaxed break-words;

	/* Headings */
	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		@apply mt-12 mb-4 font-semibold text-doc-heading;
		font-family: var(--font-heading);
	}

	h1 {
		@apply pb-1.5 text-4xl border-b border-doc-border;
	}

	h2 {
		@apply pb-1.5 text-xl border-b border-doc-border;
	}

	/* Links */
	a {
		@apply no-underline text-doc-link hover:underline;
	}

	/* Strong/bold text */
	strong,
	b {
		@apply font-semibold text-doc-heading;
	}

	/* Code blocks */
	pre {
		@apply border overflow-x-auto text-doc-heading bg-doc-code-bg border-doc-border;
		font-family: var(--font-mono);
		font-size: 15px;
	}

	/* Inline code */
	code {
		@apply px-1.5 py-0.5 text-[0.9em] text-doc-heading bg-doc-code-bg;
		font-family: var(--font-mono);
	}

	/* Remove backticks from inline code */
	code::before,
	code::after {
		content: "";
	}

	/* Inline code in code blocks */
	pre code {
		@apply p-0 bg-transparent;
	}

	/* Dark mode fixes for prose typography */
	@media (prefers-color-scheme: dark) {
		[data-theme="dark"] & {
			/* Fix blockquote text color - use readable light gray instead of dark blue */
			--tw-prose-quotes: var(--color-doc-text);
			--tw-prose-quote-borders: var(--color-doc-border);

			/* Soften table borders - use medium gray instead of harsh light colors */
			--tw-prose-th-borders: #3d444d;
			--tw-prose-td-borders: #3d444d;
		}

		/* Ensure table headers are readable in dark mode */
		[data-theme="dark"] & thead th {
			color: var(--color-doc-heading);
		}

		/* Ensure blockquotes are readable in dark mode */
		[data-theme="dark"] & blockquote {
			color: var(--color-doc-text);
			border-inline-start-color: var(--color-doc-border);
		}
	}
}

/* Pygments syntax highlighting */
.highlight .hll {
	background-color: #ffffcc;
}
.highlight .c {
	color: #3d7b7b;
	font-style: italic;
} /* Comment */
.highlight .err {
	color: #f00;
} /* Error */
.highlight .k {
	color: #008000;
	font-weight: bold;
} /* Keyword */
.highlight .o {
	color: #666;
} /* Operator */
.highlight .ch {
	color: #3d7b7b;
	font-style: italic;
} /* Comment.Hashbang */
.highlight .cm {
	color: #3d7b7b;
	font-style: italic;
} /* Comment.Multiline */
.highlight .cp {
	color: #9c6500;
} /* Comment.Preproc */
.highlight .cpf {
	color: #3d7b7b;
	font-style: italic;
} /* Comment.PreprocFile */
.highlight .c1 {
	color: #3d7b7b;
	font-style: italic;
} /* Comment.Single */
.highlight .cs {
	color: #3d7b7b;
	font-style: italic;
} /* Comment.Special */
.highlight .gd {
	color: #a00000;
} /* Generic.Deleted */
.highlight .ge {
	font-style: italic;
} /* Generic.Emph */
.highlight .ges {
	font-weight: bold;
	font-style: italic;
} /* Generic.EmphStrong */
.highlight .gr {
	color: #e40000;
} /* Generic.Error */
.highlight .gh {
	color: #000080;
	font-weight: bold;
} /* Generic.Heading */
.highlight .gi {
	color: #008400;
} /* Generic.Inserted */
.highlight .go {
	color: #717171;
} /* Generic.Output */
.highlight .gp {
	color: #000080;
	font-weight: bold;
} /* Generic.Prompt */
.highlight .gs {
	font-weight: bold;
} /* Generic.Strong */
.highlight .gu {
	color: #800080;
	font-weight: bold;
} /* Generic.Subheading */
.highlight .gt {
	color: #04d;
} /* Generic.Traceback */
.highlight .kc {
	color: #008000;
	font-weight: bold;
} /* Keyword.Constant */
.highlight .kd {
	color: #008000;
	font-weight: bold;
} /* Keyword.Declaration */
.highlight .kn {
	color: #008000;
	font-weight: bold;
} /* Keyword.Namespace */
.highlight .kp {
	color: #008000;
} /* Keyword.Pseudo */
.highlight .kr {
	color: #008000;
	font-weight: bold;
} /* Keyword.Reserved */
.highlight .kt {
	color: #b00040;
} /* Keyword.Type */
.highlight .m {
	color: #666;
} /* Literal.Number */
.highlight .s {
	color: #ba2121;
} /* Literal.String */
.highlight .na {
	color: #687822;
} /* Name.Attribute */
.highlight .nb {
	color: #008000;
} /* Name.Builtin */
.highlight .nc {
	color: #00f;
	font-weight: bold;
} /* Name.Class */
.highlight .no {
	color: #800;
} /* Name.Constant */
.highlight .nd {
	color: #a2f;
} /* Name.Decorator */
.highlight .ni {
	color: #717171;
	font-weight: bold;
} /* Name.Entity */
.highlight .ne {
	color: #cb3f38;
	font-weight: bold;
} /* Name.Exception */
.highlight .nf {
	color: #00f;
} /* Name.Function */
.highlight .nl {
	color: #767600;
} /* Name.Label */
.highlight .nn {
	color: #00f;
	font-weight: bold;
} /* Name.Namespace */
.highlight .nt {
	color: #008000;
	font-weight: bold;
} /* Name.Tag */
.highlight .nv {
	color: #19177c;
} /* Name.Variable */
.highlight .ow {
	color: #a2f;
	font-weight: bold;
} /* Operator.Word */
.highlight .w {
	color: #bbb;
} /* Text.Whitespace */
.highlight .mb {
	color: #666;
} /* Literal.Number.Bin */
.highlight .mf {
	color: #666;
} /* Literal.Number.Float */
.highlight .mh {
	color: #666;
} /* Literal.Number.Hex */
.highlight .mi {
	color: #666;
} /* Literal.Number.Integer */
.highlight .mo {
	color: #666;
} /* Literal.Number.Oct */
.highlight .sa {
	color: #ba2121;
} /* Literal.String.Affix */
.highlight .sb {
	color: #ba2121;
} /* Literal.String.Backtick */
.highlight .sc {
	color: #ba2121;
} /* Literal.String.Char */
.highlight .dl {
	color: #ba2121;
} /* Literal.String.Delimiter */
.highlight .sd {
	color: #ba2121;
	font-style: italic;
} /* Literal.String.Doc */
.highlight .s2 {
	color: #ba2121;
} /* Literal.String.Double */
.highlight .se {
	color: #aa5d1f;
	font-weight: bold;
} /* Literal.String.Escape */
.highlight .sh {
	color: #ba2121;
} /* Literal.String.Heredoc */
.highlight .si {
	color: #a45a77;
	font-weight: bold;
} /* Literal.String.Interpol */
.highlight .sx {
	color: #008000;
} /* Literal.String.Other */
.highlight .sr {
	color: #a45a77;
} /* Literal.String.Regex */
.highlight .s1 {
	color: #ba2121;
} /* Literal.String.Single */
.highlight .ss {
	color: #19177c;
} /* Literal.String.Symbol */
.highlight .bp {
	color: #008000;
} /* Name.Builtin.Pseudo */
.highlight .fm {
	color: #00f;
} /* Name.Function.Magic */
.highlight .vc {
	color: #19177c;
} /* Name.Variable.Class */
.highlight .vg {
	color: #19177c;
} /* Name.Variable.Global */
.highlight .vi {
	color: #19177c;
} /* Name.Variable.Instance */
.highlight .vm {
	color: #19177c;
} /* Name.Variable.Magic */
.highlight .il {
	color: #666;
} /* Literal.Number.Integer.Long */

/* Dark mode syntax highlighting overrides */
[data-theme="dark"] {
	.highlight .hll {
		background-color: #404040;
	}
	.highlight .c {
		color: #8b949e;
	} /* Comment */
	.highlight .err {
		color: #f85149;
	} /* Error */
	.highlight .k {
		color: #ff7b72;
	} /* Keyword */
	.highlight .o {
		color: #ff7b72;
	} /* Operator */
	.highlight .ch {
		color: #8b949e;
	} /* Comment.Hashbang */
	.highlight .cm {
		color: #8b949e;
	} /* Comment.Multiline */
	.highlight .cp {
		color: #8b949e;
	} /* Comment.Preproc */
	.highlight .cpf {
		color: #8b949e;
	} /* Comment.PreprocFile */
	.highlight .c1 {
		color: #8b949e;
	} /* Comment.Single */
	.highlight .cs {
		color: #8b949e;
	} /* Comment.Special */
	.highlight .gd {
		color: #ffa198;
	} /* Generic.Deleted */
	.highlight .ge {
		font-style: italic;
	} /* Generic.Emph */
	.highlight .gr {
		color: #f85149;
	} /* Generic.Error */
	.highlight .gh {
		color: #79c0ff;
		font-weight: bold;
	} /* Generic.Heading */
	.highlight .gi {
		color: #56d364;
	} /* Generic.Inserted */
	.highlight .go {
		color: #8b949e;
	} /* Generic.Output */
	.highlight .gp {
		color: #8b949e;
		font-weight: bold;
	} /* Generic.Prompt */
	.highlight .gs {
		font-weight: bold;
	} /* Generic.Strong */
	.highlight .gu {
		color: #d2a8ff;
		font-weight: bold;
	} /* Generic.Subheading */
	.highlight .gt {
		color: #ff7b72;
	} /* Generic.Traceback */
	.highlight .kc {
		color: #79c0ff;
	} /* Keyword.Constant */
	.highlight .kd {
		color: #ff7b72;
	} /* Keyword.Declaration */
	.highlight .kn {
		color: #ff7b72;
	} /* Keyword.Namespace */
	.highlight .kp {
		color: #79c0ff;
	} /* Keyword.Pseudo */
	.highlight .kr {
		color: #ff7b72;
	} /* Keyword.Reserved */
	.highlight .kt {
		color: #ff7b72;
	} /* Keyword.Type */
	.highlight .m {
		color: #79c0ff;
	} /* Literal.Number */
	.highlight .s {
		color: #a5d6ff;
	} /* Literal.String */
	.highlight .na {
		color: #79c0ff;
	} /* Name.Attribute */
	.highlight .nb {
		color: #d2a8ff;
	} /* Name.Builtin */
	.highlight .nc {
		color: #f0883e;
	} /* Name.Class */
	.highlight .no {
		color: #79c0ff;
	} /* Name.Constant */
	.highlight .nd {
		color: #d2a8ff;
	} /* Name.Decorator */
	.highlight .ni {
		color: #ffa657;
	} /* Name.Entity */
	.highlight .ne {
		color: #f0883e;
	} /* Name.Exception */
	.highlight .nf {
		color: #d2a8ff;
	} /* Name.Function */
	.highlight .nl {
		color: #79c0ff;
	} /* Name.Label */
	.highlight .nn {
		color: #f0883e;
	} /* Name.Namespace */
	.highlight .nt {
		color: #7ee787;
	} /* Name.Tag */
	.highlight .nv {
		color: #79c0ff;
	} /* Name.Variable */
	.highlight .ow {
		color: #ff7b72;
	} /* Operator.Word */
	.highlight .w {
		color: #6e7681;
	} /* Text.Whitespace */
	.highlight .mb {
		color: #79c0ff;
	} /* Literal.Number.Bin */
	.highlight .mf {
		color: #79c0ff;
	} /* Literal.Number.Float */
	.highlight .mh {
		color: #79c0ff;
	} /* Literal.Number.Hex */
	.highlight .mi {
		color: #79c0ff;
	} /* Literal.Number.Integer */
	.highlight .mo {
		color: #79c0ff;
	} /* Literal.Number.Oct */
	.highlight .sa {
		color: #a5d6ff;
	} /* Literal.String.Affix */
	.highlight .sb {
		color: #a5d6ff;
	} /* Literal.String.Backtick */
	.highlight .sc {
		color: #a5d6ff;
	} /* Literal.String.Char */
	.highlight .dl {
		color: #a5d6ff;
	} /* Literal.String.Delimiter */
	.highlight .sd {
		color: #a5d6ff;
	} /* Literal.String.Doc */
	.highlight .s2 {
		color: #a5d6ff;
	} /* Literal.String.Double */
	.highlight .se {
		color: #79c0ff;
	} /* Literal.String.Escape */
	.highlight .sh {
		color: #a5d6ff;
	} /* Literal.String.Heredoc */
	.highlight .si {
		color: #a5d6ff;
	} /* Literal.String.Interpol */
	.highlight .sx {
		color: #a5d6ff;
	} /* Literal.String.Other */
	.highlight .sr {
		color: #a5d6ff;
	} /* Literal.String.Regex */
	.highlight .s1 {
		color: #a5d6ff;
	} /* Literal.String.Single */
	.highlight .ss {
		color: #a5d6ff;
	} /* Literal.String.Symbol */
	.highlight .bp {
		color: #d2a8ff;
	} /* Name.Builtin.Pseudo */
	.highlight .fm {
		color: #d2a8ff;
	} /* Name.Function.Magic */
	.highlight .vc {
		color: #79c0ff;
	} /* Name.Variable.Class */
	.highlight .vg {
		color: #79c0ff;
	} /* Name.Variable.Global */
	.highlight .vi {
		color: #79c0ff;
	} /* Name.Variable.Instance */
	.highlight .vm {
		color: #79c0ff;
	} /* Name.Variable.Magic */
	.highlight .il {
		color: #79c0ff;
	} /* Literal.Number.Integer.Long */
}

/* Tocbot TOC styling */
.js-toc .toc-list {
	list-style: none;
	padding: 0;
	margin: 0;
	font-size: 0.875rem;
	line-height: 1.25;
}

.js-toc .toc-link {
	display: block;
	padding-top: 0.25rem;
	padding-bottom: 0.25rem;
	padding-left: 0.75rem;
	color: var(--color-doc-muted);
	text-decoration: none;
	border-left: 2px solid var(--color-doc-border);
	transition:
		color 0.15s,
		border-color 0.15s;
}

.js-toc .toc-link:hover {
	color: var(--color-doc-heading);
}

.js-toc .toc-link.is-active-link {
	color: var(--color-doc-heading);
	font-weight: 600;
	border-left-color: var(--color-doc-link);
}

/* Nested TOC items - indent text but keep borders aligned */
.js-toc .toc-list .toc-list .toc-link {
	padding-left: 1.5rem;
}

.js-toc .toc-list .toc-list .toc-list .toc-link {
	padding-left: 2.25rem;
}

.js-toc .toc-list .toc-list .toc-list .toc-list .toc-link {
	padding-left: 3rem;
}

.js-toc .toc-list .toc-list .toc-list .toc-list .toc-list .toc-link {
	padding-left: 3.75rem;
}

.js-toc .toc-list .toc-list .toc-list .toc-list .toc-list .toc-list .toc-link {
	padding-left: 4.5rem;
}
