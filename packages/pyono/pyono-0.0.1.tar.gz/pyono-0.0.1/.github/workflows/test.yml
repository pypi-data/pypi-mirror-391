name: Test

on: [push]

jobs:
  tests:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: [3.11, 3.12, 3.13, 3.14] 
    steps:
      - name: Checkout Code
        uses: actions/checkout@v5

      - name: Set up Python ${{ matrix.python-version }}
        uses: actions/setup-python@v6
        with:
          python-version: ${{ matrix.python-version }}
      
      - name: Install Dependencies
        run: pip install -r requirements.txt
      
      - name: Run tests
        run: python -m xmlrunner

      # - name: Test Report
      #   uses: EnricoMi/publish-unit-test-result-action@v2
      #   if: (!cancelled())
      #   with:
      #     files: |
      #       TEST*.xml

      # - name: Get coverage data
      #   run: |
      #     python -m coverage xml

      # - name: Code Coverage Report
      #   uses: irongut/CodeCoverageSummary@v1.3.0
      #   with:
      #     filename: coverage.xml
      #     badge: true

      # - name: Set test badge color
      #   shell: bash
      #   run: |
      #     case ${{ fromJSON( steps.test-results.outputs.json ).conclusion }} in
      #       success)
      #         echo "BADGE_COLOR=31c653" >> $GITHUB_ENV
      #         ;;
      #       failure)
      #         echo "BADGE_COLOR=800000" >> $GITHUB_ENV
      #         ;;
      #       neutral)
      #         echo "BADGE_COLOR=696969" >> $GITHUB_ENV
      #         ;;
      #     esac

      # - name: Create test badge
      #   uses: emibcn/badge-action@808173dd03e2f30c980d03ee49e181626088eee8
      #   with:
      #     label: Tests
      #     status: '${{ fromJSON( steps.test-results.outputs.json ).formatted.stats.tests }} tests, ${{ fromJSON( steps.test-results.outputs.json ).formatted.stats.runs }} runs: ${{ fromJSON( steps.test-results.outputs.json ).conclusion }}'
      #     color: ${{ env.BADGE_COLOR }}
      #     path: badge.svg
