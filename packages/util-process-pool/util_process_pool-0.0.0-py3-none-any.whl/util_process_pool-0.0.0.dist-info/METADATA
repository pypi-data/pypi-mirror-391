Metadata-Version: 2.4
Name: util-process-pool
Version: 0.0.0
Summary: ç®€ä¾¿çš„å¤šè¿›ç¨‹è°ƒç”¨å·¥å…·ï¼ŒåŸºäº concurrent.futures.ProcessPoolExecutor çš„å°è£…
Author-email: birds <cg626@163.com>
License-Expression: MIT
Requires-Python: >=3.7
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: click>=8.0.0
Provides-Extra: dev
Requires-Dist: pytest>=6.0; extra == "dev"
Requires-Dist: black>=21.0; extra == "dev"
Requires-Dist: flake8>=3.9; extra == "dev"
Dynamic: license-file

# Util Process Pool

ç®€ä¾¿çš„å¤šè¿›ç¨‹è°ƒç”¨å·¥å…·ï¼ŒåŸºäº `concurrent.futures.ProcessPoolExecutor` çš„å°è£…ã€‚

## ç‰¹æ€§

- ğŸš€ ç®€åŒ–çš„å¤šè¿›ç¨‹è°ƒç”¨æ¥å£
- ğŸ“Š è¿›åº¦è·Ÿè¸ªå’Œé”™è¯¯å¤„ç†
- ğŸ”§ çµæ´»çš„é…ç½®é€‰é¡¹
- ğŸ“ è¯¦ç»†çš„æ—¥å¿—è®°å½•
- ğŸ¯ æ”¯æŒå¤šç§ä»»åŠ¡ç±»å‹ï¼ˆCPUå¯†é›†å‹ã€IOå¯†é›†å‹ï¼‰

## å®‰è£…

```bash
pip install util-process-pool
```

## å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨

```python
from util_process_pool import parallel_map

# ç®€å•çš„å¹¶è¡Œè®¡ç®—
numbers = list(range(10))
results = parallel_map(lambda x: x * x, numbers)
print(results)  # [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
```

### ä½¿ç”¨ ProcessPool ç±»

```python
from util_process_pool import ProcessPool

def process_data(data):
    # å¤„ç†æ•°æ®çš„å‡½æ•°
    return data * 2

with ProcessPool(max_workers=4) as pool:
    data_list = [1, 2, 3, 4, 5]
    results = list(pool.map(process_data, data_list))
    print(results)  # [2, 4, 6, 8, 10]
```

### æ‰¹é‡æ‰§è¡Œå¤æ‚ä»»åŠ¡

```python
from util_process_pool import batch_execute

def complex_task(param1, param2):
    # å¤æ‚çš„å¤„ç†é€»è¾‘
    return f"Processed: {param1} + {param2}"

# å‡†å¤‡å‚æ•°åˆ—è¡¨
args_list = [
    (("hello", "world"),),  # ç¬¬ä¸€ä¸ªä»»åŠ¡
    (("foo", "bar"),),      # ç¬¬äºŒä¸ªä»»åŠ¡
]

results = batch_execute(complex_task, args_list, show_progress=True)
```

## API æ–‡æ¡£

### ProcessPool ç±»

ä¸»è¦çš„è¿›ç¨‹æ± ç®¡ç†ç±»ã€‚

```python
ProcessPool(
    max_workers=None,      # æœ€å¤§å·¥ä½œè¿›ç¨‹æ•°ï¼ˆé»˜è®¤ï¼šCPUæ ¸å¿ƒæ•°ï¼‰
    initializer=None,      # è¿›ç¨‹åˆå§‹åŒ–å‡½æ•°
    initargs=(),           # åˆå§‹åŒ–å‡½æ•°å‚æ•°
    logger=None            # è‡ªå®šä¹‰æ—¥å¿—è®°å½•å™¨
)
```

**æ–¹æ³•ï¼š**
- `submit(func, *args, **kwargs)`: æäº¤å•ä¸ªä»»åŠ¡
- `map(func, iterable, timeout=None, chunksize=1)`: å¹¶è¡Œæ˜ å°„
- `execute_batch(func, args_list, timeout=None, show_progress=False)`: æ‰¹é‡æ‰§è¡Œ
- `wait_completion(timeout=None)`: ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ

### å·¥å…·å‡½æ•°

- `parallel_map(func, iterable, max_workers=None, chunksize=1, timeout=None)`
- `batch_execute(func, args_list, max_workers=None, timeout=None, show_progress=False)`

## è®¸å¯è¯

MIT License
