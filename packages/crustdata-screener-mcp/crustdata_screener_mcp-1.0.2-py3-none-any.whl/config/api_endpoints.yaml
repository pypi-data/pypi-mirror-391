name: crustdata-screener-mcp
version: 1.0.0
description: MCP server wrapping CrustData Screener APIs for company and people data enrichment

# Base configuration
base_url: ${CRUSTDATA_API_BASE_URL:-http://localhost:8000}
auth:
  type: token
  header: Authorization
  value: Token ${CRUSTDATA_API_TOKEN}

# MCP Tools Configuration
tools:
  - name: enrich_company_data
    description: |
      Enrich company data by domain, name, LinkedIn URL, or ID.
      Returns comprehensive company information including headcount, funding, technologies, social profiles, and more.
    endpoint: /screener/company
    method: GET
    parameters:
      - name: company_domain
        type: string
        description: Company domain(s) (comma-separated, max 25)
        required: false
        example: "stripe.com,shopify.com"
      - name: company_name
        type: string
        description: Company name(s) (comma-separated, max 25)
        required: false
        example: "Stripe,Shopify"
      - name: company_linkedin_url
        type: string
        description: LinkedIn company URL(s) (comma-separated, max 25)
        required: false
        example: "https://www.linkedin.com/company/stripe"
      - name: company_id
        type: string
        description: Internal company ID(s) (comma-separated, max 25)
        required: false
      - name: fields
        type: string
        description: |
          Comma-separated fields to return. Available: headcount, funding_and_investment, 
          technologies, social_profiles, company_details, news_and_events, acquisitions, etc.
        required: false
        example: "headcount,funding_and_investment,technologies"
      - name: exact_match
        type: boolean
        description: Whether to perform exact matching for company names
        required: false
        default: false
      - name: enrich_realtime
        type: boolean
        description: Whether to enrich data in real-time if not found in database
        required: false
        default: false
    response_format: json_array
    
  - name: identify_company
    description: |
      Identify companies by domain or name and get basic identification data.
      Useful for getting company IDs before enrichment.
    endpoint: /screener/identify
    method: POST
    parameters:
      - name: query_company_website
        type: string
        description: Company domain/website
        required: false
      - name: query_company_name
        type: string
        description: Company name
        required: false
      - name: query_company_linkedin_url
        type: string
        description: LinkedIn company URL
        required: false
      - name: query_company_id
        type: integer
        description: Company ID
        required: false
      - name: exact_match
        type: boolean
        description: Whether to perform exact matching
        required: false
        default: false
      - name: count
        type: integer
        description: Number of results to return
        required: false
        default: 10
    response_format: json_array

  - name: search_companies
    description: |
      Search for companies using LinkedIn Sales Navigator filters.
      Returns a list of matching companies with pagination support.
      Use filters array or linkedin_sales_navigator_search_url (not both).
    endpoint: /screener/company/search
    method: POST
    parameters:
      - name: filters
        type: array
        description: |
          Array of filter objects. Each filter has: filter_type, type ("in"), and value (array).
          Example: [{"filter_type": "COMPANY_HEADCOUNT", "type": "in", "value": ["1-10", "11-50"]}]
        required: false
      - name: linkedin_sales_navigator_search_url
        type: string
        description: LinkedIn Sales Navigator search URL
        required: false
      - name: page
        type: integer
        description: Page number for pagination (used with filters)
        required: false
        default: 1
    response_format: json_object
    request_body: true

  - name: enrich_person_profile
    description: |
      Enrich person data by LinkedIn URL or business email.
      Returns detailed person information including current role, work history, education, skills, and contact info.
    endpoint: /screener/person/enrich
    method: GET
    parameters:
      - name: linkedin_profile_url
        type: string
        description: LinkedIn person profile URL(s) (comma-separated, max 25)
        required: false
        example: "https://www.linkedin.com/in/johnsmith"
      - name: business_email
        type: string
        description: Business email address (only 1 allowed)
        required: false
      - name: fields
        type: string
        description: |
          Comma-separated fields to return. Available: work_experience, education, 
          skills, certifications, contact_info, social_profiles, etc.
        required: false
      - name: enrich_realtime
        type: boolean
        description: Whether to enrich data in real-time if not found in database
        required: false
        default: false
      - name: force_fetch
        type: boolean
        description: Force fetch from LinkedIn (requires enrich_realtime=true)
        required: false
        default: false
      - name: open_to_cards
        type: boolean
        description: Fetch LinkedIn open to cards (requires enrich_realtime=true)
        required: false
        default: false
      - name: colleagues
        type: boolean
        description: Fetch colleague information
        required: false
        default: false
      - name: enrichment_method
        type: string
        description: Enrichment method (salesnavigator or voyager)
        required: false
      - name: preview
        type: boolean
        description: Preview mode
        required: false
        default: false
      - name: min_similarity_score
        type: number
        description: Min similarity score 0-1 (for business_email only)
        required: false
    response_format: json_array

  - name: search_people
    description: |
      Search for people profiles using filters like job title, company, location, skills, etc.
      Uses LinkedIn Sales Navigator data for accurate results.
    endpoint: /screener/person/search
    method: POST
    parameters:
      - name: filters
        type: array
        description: Array of filter objects (job_title, company, location, seniority, industry, etc.)
        required: false
      - name: linkedin_sales_navigator_search_url
        type: string
        description: LinkedIn Sales Navigator search URL
        required: false
      - name: page
        type: integer
        description: Page number for pagination (used with filters)
        required: false
      - name: limit
        type: integer
        description: Number of results to return (max 2000 without page, max 25 with page)
        required: false
      - name: post_processing
        type: object
        description: Post-processing options (exclude_names, exclude_profiles, strict_title_and_company_match)
        required: false
      - name: preview
        type: boolean
        description: Preview mode flag
        required: false
        default: false
    response_format: json_object
    request_body: true

  - name: get_linkedin_posts
    description: |
      Retrieve LinkedIn posts from a company or person profile.
      Returns post content, engagement metrics, and author information.
      Either page OR limit required (not both). Use one of: company_linkedin_url, person_linkedin_url, or linkedin_post_url.
    endpoint: /screener/linkedin_posts
    method: GET
    parameters:
      - name: company_linkedin_url
        type: string
        description: LinkedIn company URL
        required: false
      - name: person_linkedin_url
        type: string
        description: LinkedIn person profile URL
        required: false
      - name: linkedin_post_url
        type: string
        description: Single LinkedIn post URL
        required: false
      - name: page
        type: integer
        description: Page number (1-20, mutually exclusive with limit)
        required: false
      - name: limit
        type: integer
        description: Number of posts (1-100, mutually exclusive with page)
        required: false
      - name: fields
        type: string
        description: Comma-separated fields to return
        required: false
      - name: post_types
        type: string
        description: Comma-separated post types (IMAGE, VIDEO, ARTICLE, TEXT)
        required: false
      - name: max_reactors
        type: integer
        description: Max reactors to return (0-5000, requires 'reactors' in fields)
        required: false
        default: 0
      - name: max_comments
        type: integer
        description: Max comments to return (0-5000, requires 'comments' in fields)
        required: false
        default: 0
    response_format: json_array

  - name: search_linkedin_posts_by_keyword
    description: |
      Search LinkedIn posts by keywords within a specific company or person's posts.
      Useful for finding posts about specific topics, products, or events.
    endpoint: /screener/linkedin_posts/keyword_search
    method: POST
    parameters:
      - name: keyword
        type: string
        description: Keywords to search for in posts
        required: false
      - name: page
        type: integer
        description: Page number for pagination
        required: false
      - name: limit
        type: integer
        description: Number of results to return (max 500)
        required: false
      - name: date_posted
        type: string
        description: Date filter (past-24h, past-week, past-month, past-quarter, past-year)
        required: false
      - name: result_type
        type: string
        description: Type of results to return
        required: false
      - name: content_type
        type: array
        description: Array of content types (photos, jobs, collaborativeArticles, videos, documents, liveVideos)
        required: false
      - name: sort_by
        type: string
        description: Sort by date_posted or relevance
        required: false
      - name: exact_keyword_match
        type: boolean
        description: Whether to perform exact keyword matching
        required: false
      - name: filters
        type: array
        description: Array of filter objects for advanced filtering
        required: false
      - name: fields
        type: string
        description: Comma-separated fields to return
        required: false
      - name: max_reactors
        type: integer
        description: Maximum number of reactors to return (0-5000)
        required: false
      - name: max_comments
        type: integer
        description: Maximum number of comments to return (0-5000)
        required: false
    response_format: json_array
    request_body: true

  - name: get_company_employees
    description: |
      Export employee list for a specific company.
      Returns detailed information about people working at the company.
    endpoint: /screener/company/people
    method: GET
    parameters:
      - name: company_id
        type: integer
        description: Internal company ID
        required: false
      - name: company_linkedin_id
        type: string
        description: LinkedIn company ID
        required: false
      - name: company_name
        type: string
        description: Company name
        required: false
      - name: s3_username
        type: string
        description: S3 username for export storage
        required: true
      - name: version
        type: string
        description: API version (v1 or v2)
        required: false
        default: "v2"
    response_format: json_object

# Error handling
error_handling:
  retry_on_rate_limit: true
  max_retries: 3
  retry_delay_ms: 1000
  
# Rate limiting (if applicable)
rate_limits:
  requests_per_minute: 60
  concurrent_requests: 10
