"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4339],{74339:function(e,n,i){i.d(n,{Z:function(){return U}});var t=i(24246),o=i(98227),a=i(34090),l=i(86677),r=i(27378),s=i(55484),d=i(16134),c=i(812),p=i(77830),u=i(46628),v=i(7426),_=i(60325);let m={language:{label:"Language",validation:s.Z_()},title:{label:"Title",validation:s.Z_()},description:{label:"Description",validation:s.Z_()},accept_button_label:{label:"Accept button label",validation:s.Z_()},reject_button_label:{label:"Reject button label",validation:s.Z_()},save_button_label:{label:"Save button label",validation:s.Z_()},acknowledge_button_label:{label:"Acknowledge button label",validation:s.Z_()},privacy_policy_url:{label:"Privacy policy URL",validation:s.Z_().url()},privacy_preferences_link_label:{label:"Privacy preferences link label",validation:s.Z_()},banner_title:{label:"Banner title",validation:s.Z_()},banner_description:{label:"Banner description",validation:s.Z_()},purpose_header:{label:"Purpose header",validation:s.Z_()},privacy_policy_link_label:{label:"Privacy policy link label",validation:s.Z_()},modal_link_label:{label:"Modal link label",validation:s.Z_()},is_default:{label:"Default language",validation:s.O7()}};var f=i(34334),b=i(13083),g=i.n(b),y=i(43218),x=i.n(y),h=i(52253),w=i(32885),j=i(60240);let A={language:j.eU.EN,accept_button_label:"Accept",acknowledge_button_label:"OK",banner_description:"",banner_title:"",purpose_header:"",description:"Description",privacy_policy_link_label:"",privacy_policy_url:"",modal_link_label:"",privacy_preferences_link_label:"Privacy preferences",reject_button_label:"Reject All",save_button_label:"Save",title:"Manage your consent preferences",is_default:!0},k=e=>({...A,...e.translations?e.translations[0]:{}}),O=(e,n)=>{var i,t,o,a;let l={options:{allowHTMLDescription:!0,base64Cookie:!1,debug:!1,fidesApiUrl:"http://localhost:8080/api/v1",fidesClearCookie:!0,fidesDisableSaveApi:!0,fidesDisableNoticesServedApi:!0,fidesJsBaseUrl:"",fidesLocale:null===(t=e.translations)||void 0===t?void 0:null===(i=t[0])||void 0===i?void 0:i.language,fidesString:null,geolocationApiUrl:"",isGeolocationEnabled:!1,isOverlayEnabled:!0,isPrefetchEnabled:!1,modalLinkId:null,overlayParentId:h.Vk,preventDismissal:null!==(a=e.dismissable)&&void 0!==a&&a,privacyCenterUrl:"http://localhost:3000",showFidesBrandLink:!0},experience:{available_locales:null===(o=e.translations)||void 0===o?void 0:o.map(e=>e.language),component:e.component,experience_config:{allow_language_selection:!0,auto_detect_language:!0,auto_subdomain_cookie_deletion:!0,cookie_deletion_based_on_host_domain:!0,component:e.component,disabled:!1,dismissable:e.dismissable,id:"pri_222",is_default:!0,language:"en",layer1_button_options:j.Of.OPT_IN_OPT_OUT,properties:[],regions:["us_ca"],show_layer1_notices:!1,translations:[k(e)]},id:"pri_111",privacy_notices:n,region:"us_ca"},geolocation:{country:"US",location:"US-CA",region:"CA"}};return e.component===j.re.TCF_OVERLAY&&(l.options.fidesTcfGdprApplies=!0,l.options.tcf_enabled=!0,l.geolocation={location:"eea",country:"eea"},l.experience.experience_config.regions=["eea"],l.experience={...l.experience,region:"eea",minimal_tcf:!0,gvl:{vendors:{}},tcf_purpose_names:["Store and/or access information on a device","Use limited data to select advertising","Create profiles for personalised advertising","Use profiles to select personalised advertising","Create profiles to personalise content","Use profiles to select personalised content","Measure advertising performance","Measure content performance","Understand audiences through statistics or combinations of data from different sources","Develop and improve services","Use limited data to select content"]},l.options.apiOptions={getPrivacyExperienceFn:async()=>l.experience}),l},C=e=>{let{language:n,is_default:i,...t}=A,o=Object.keys(t).map(n=>{let i=e[n];return{[n]:void 0!==i?i:A[n]}}).reduce((e,n)=>({...e,...n}),{});return{language:e.language,is_default:e.is_default,...o}},E=(e,n,i)=>e?e.map(e=>i.find(n=>(null==n?void 0:n.id)===e)).map(e=>n===j.re.TCF_OVERLAY&&void 0!==e?{...e,translations:[{language:"en",text:null==e?void 0:e.name}]}:e).filter(e=>void 0!==e):[];var T=i(74022),L=i(32222);let N=e=>{let{title:n,description:i}=e;return(0,t.jsx)(o.jqI,{className:"h-full items-center justify-center",children:(0,t.jsxs)(o.jqI,{className:"items-center gap-2 rounded-md p-6",style:{backgroundColor:T.Z.colors.white,boxShadow:T.Z.shadows.md,maxWidth:512},vertical:!0,"data-testid":"no-preview-notice",children:[(0,t.jsx)(o.xvT,{fontSize:"lg",fontWeight:"500",align:"center",children:n}),(0,t.jsx)(o.xvT,{color:"gray.500",align:"center",children:i})]})})};var P=e=>{var n,i;let{allPrivacyNotices:s,initialValues:d,translation:c,isMobilePreview:p}=e,u=(0,l.useRouter)().pathname.includes("/new"),{values:v}=(0,a.u6)(),[_,m]=(0,r.useState)([]),[f,b]=(0,r.useState)(!1),[y,A]=(0,r.useState)(),k=[j.re.BANNER_AND_MODAL,j.re.MODAL,j.re.TCF_OVERLAY].includes(v.component),{data:T}=(0,w.de)({pageIndex:1,pageSize:1}),P=(0,r.useMemo)(()=>(null==T?void 0:T.total)||0,[null==T?void 0:T.total]);(0,r.useEffect)(()=>{var e,n;return k&&f&&window.FidesPreview&&v.component&&((null===(e=v.privacy_notice_ids)||void 0===e?void 0:e.length)||v.component===j.re.TCF_OVERLAY)?v.component===j.re.TCF_OVERLAY?(window.FidesPreview("tcf"),A("tcf")):(window.FidesPreview("standard"),A("standard")):window.FidesPreview&&(null===(n=window.FidesPreview)||void 0===n||n.cleanup()),()=>{var e;A(void 0),null===(e=window.FidesPreview)||void 0===e||e.cleanup()}},[v.component,f,k,null===(n=v.privacy_notice_ids)||void 0===n?void 0:n.length,u]),(0,r.useEffect)(()=>{d&&v.component&&s&&(v.privacy_notice_ids?m(E(v.privacy_notice_ids,v.component,s)):m([]))},[v.privacy_notice_ids,s,v.component,d]);let D=(0,r.useMemo)(()=>v.component?O({...d,component:v.component},_):null,[d,_,v.component]);(0,r.useEffect)(()=>{(null==T?void 0:T.total)===0&&v.component===j.re.TCF_OVERLAY&&o.x6B.warning({message:"No vendors available",description:"This TCF Overlay will not appear on live sites until you add consent vendors from the Global Vendor List (GVL)",duration:0,key:"vendor-warning"})},[null==T?void 0:T.total,v.component]),(0,r.useEffect)(()=>{var e,n,i,t;if(!k||!f||!window.FidesPreview||!window.Fides||!(null===(e=v.privacy_notice_ids)||void 0===e?void 0:e.length)&&v.component!==j.re.TCF_OVERLAY)return;v.component===j.re.MODAL&&(D.experience.experience_config.component=j.re.MODAL);let o=null===(n=v.translations)||void 0===n?void 0:n.find(e=>e.language===(null==c?void 0:c.language));(null===(i=v.translations)||void 0===i?void 0:i.length)&&(o?(D.experience.available_locales=[...D.experience.available_locales||[],o.language],D.experience.experience_config.translations[0]=C(o),D.options.fidesLocale=o.language):v.translations&&(D.experience.experience_config.translations[0]=C(v.translations[0]),D.options.fidesLocale=v.translations[0].language)),D.experience.experience_config.show_layer1_notices=!!(null===(t=v.privacy_notice_ids)||void 0===t?void 0:t.length)&&!!v.show_layer1_notices,D.experience.experience_config.layer1_button_options=(v.component===j.re.BANNER_AND_MODAL||v.component===j.re.TCF_OVERLAY)&&v.layer1_button_options?v.layer1_button_options:j.Of.OPT_IN_OPT_OUT,D.options.preventDismissal=!v.dismissable,D.experience.vendor_count=P,D.experience.experience_config.component=v.component,window.Fides.init(D)},[c,D,s,k,P,f,y,v.privacy_notice_ids,v.component,v.translations,v.show_layer1_notices,v.layer1_button_options,v.dismissable,d,_]);let R=document.getElementById("fides-modal");return(R&&R.removeAttribute("tabindex"),v.component)?k?(null===(i=v.privacy_notice_ids)||void 0===i?void 0:i.length)||v.component===j.re.TCF_OVERLAY?(0,t.jsxs)(o.jqI,{className:"size-full items-center justify-center overflow-scroll",children:[(0,t.jsx)(g(),{id:"4b2ec2183c5a567e",dynamic:[h.Vk,v.component!==j.re.TCF_OVERLAY?"padding-bottom: 45px;":""],children:"div#fides-overlay{z-index:5000!important}div#".concat(h.Vk,"{width:100%;padding-top:45px;").concat(v.component!==j.re.TCF_OVERLAY?"padding-bottom: 45px;":"","          margin: auto;pointer-events:none}div#fides-banner-container{position:static!important;-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important;-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;transition:none!important}div#fides-banner-container.fides-banner-hidden{display:none}.fides-modal-container{background-color:unset!important;position:static!important;display:none!important}.fides-modal-overlay{background-color:inherit!important;position:static!important;display:none!important}div.fides-modal-content{position:relative!important;-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important;left:initial!important;top:initial!important}div.fides-modal-footer{width:unset}")}),k?(0,t.jsx)("style",{children:"div#fides-modal {\n          display: flex !important;\n          justify-content: center;\n          background-color: unset;\n          ".concat(v.component===j.re.BANNER_AND_MODAL||v.component===j.re.TCF_OVERLAY?"padding-bottom: 3rem;":"","\n        }")}):null,p?(0,t.jsx)("style",{children:"\n            div#fides-overlay-wrapper {\n              max-width: 400px;\n              margin: auto;\n            }\n            div.fides-modal-button-group {\n              flex-direction: column !important;\n            }\n            div#fides-banner {\n              padding: 24px;\n              width: 100%;\n            }\n\n            div#fides-banner-description {\n              margin-bottom: 0px;\n            }\n\n            div#fides-banner-inner div#fides-button-group {\n              flex-direction: column;\n              align-items: flex-start;\n              gap: 12px;\n              padding-top: 24px;\n            }\n\n            .fides-banner-button-group {\n              flex-direction: column;\n              width: 100%;\n            }\n\n            button.fides-banner-button {\n              margin: 0px;\n              width: 100%;\n            }\n\n            div#fides-banner-inner-container {\n              display: flex;\n              flex-direction: column;\n              max-height: 50vh;\n              overflow-y: auto;\n              scrollbar-gutter: stable;\n            }\n\n            div#fides-privacy-policy-link {\n              order: 1;\n              width: 100%;\n            }\n            .fides-modal-footer {\n              max-width: 100%;\n            }\n            .fides-banner-secondary-actions {\n              flex-direction: column-reverse;\n              gap: 12px;\n            }\n            "}):(0,t.jsx)("style",{children:"\n              div#fides-banner {\n                width: 60%;\n              }\n            @media (min-width: 768px) {\n              div#fides-banner {\n                width: 100%;\n              }\n            }\n            @media (min-width: 1155px) {\n              div#fides-banner {\n                width: 90%;\n              }\n            }\n            @media (min-width: 1440px) {\n              div#fides-banner {\n                width: 60%;\n              }\n            }\n            "}),(0,t.jsx)(x(),{id:"fides-js-script",src:"/lib/fides-preview.js",onReady:()=>{b(!0)}}),(0,t.jsx)("div",{id:h.Vk,"data-a11y-dialog-ignore-focus-trap":"",inert:"",className:g().dynamic([["4b2ec2183c5a567e",[h.Vk,v.component!==j.re.TCF_OVERLAY?"padding-bottom: 45px;":""]]])},v.component)]}):(0,t.jsx)(N,{title:"No privacy notices added",description:'To view a preview of this experience, add a privacy notice under "Privacy Notices" to the left.'}):(0,t.jsx)(N,{title:"".concat(L.J.get(v.component)," preview not available"),description:"There is no preview available for ".concat(L.J.get(v.component),". You can edit the available settings\n    and languages to the left.")}):(0,t.jsx)(N,{title:"No privacy experience type selected",description:"Please select a privacy experience type to preview."})},D=i(94315),R=i(5331),F=i(16277),V=i(71922),S=i(31883);let Z=e=>{let n=(0,_.y3)(e),i={};return Object.entries(n).forEach(e=>{let[n,t]=e;if(t.included){let e=m[n];i[n]=t.required?e.validation.required().label(e.label):e.validation.nullable().label(e.label)}}),s.Ry().shape(i)},M=e=>{let{componentType:n}=e;return Z(n)},B=s.Ry().shape({name:s.Z_().required().label("Experience name"),component:s.Z_().required().label("Experience type"),translations:s.IX().when("component",(e,n)=>{let[i]=e;return n.of(M({componentType:i}))}),allow_vendor_asset_disclosure:s.O7().nullable(),asset_disclosure_include_types:s.IX().of(s.Z_()).when(["allow_vendor_asset_disclosure","component"],(e,n)=>{let[i,t]=e;return i&&(t===j.re.BANNER_AND_MODAL||t===j.re.MODAL)?n.min(1).label("Asset types to disclose"):n.notRequired().nullable()})});var U=e=>{var n;let{passedInExperience:i,passedInTranslations:s}=e,[m]=(0,D.mJ)(),[b]=(0,D.$d)(),g=(0,o.pmc)(),[y,x]=(0,r.useState)(!1),h=(0,l.useRouter)(),{data:w}=(0,v.tB)({api_set:!1}),j=null==w?void 0:null===(n=w.plus_consent_settings)||void 0===n?void 0:n.enable_translations,A=(0,d.C)(f.Zp),k=(0,d.C)(f.G1);(0,f.Ah)({page:A,size:k});let O=(0,d.C)(f.fJ),C=(0,d.C)(V.sX),E=i?{..._.DD,...(0,_.Uv)(i)}:_.DD,T=async e=>{var n,t;let o;e.privacy_notice_ids=null===(n=e.privacy_notice_ids)||void 0===n?void 0:n.filter(e=>"tcf_purposes_placeholder"!==e),E.tcf_configuration_id&&!e.tcf_configuration_id&&(e.tcf_configuration_id=null);let a={...e,disabled:null===(t=null==i?void 0:i.disabled)||void 0===t||t,allow_language_selection:e.translations&&e.translations.length>1};if(i){let{component:e,...n}=a;o=await b({...n,id:i.id})}else o=await m(a);(0,S.D4)(o)?g((0,u.Vo)((0,c.e$)(o.error))):(g((0,u.t5)("Privacy experience successfully ".concat(i?"updated":"created"))),h.push(p.w0))},[L,N]=(0,r.useState)(void 0),[Z,M]=(0,r.useState)(!1);return(0,t.jsx)(a.J9,{initialValues:E,enableReinitialize:!0,onSubmit:T,validationSchema:B,children:(0,t.jsx)(a.l0,{style:{height:"100vh"},children:(0,t.jsxs)(o.jqI,{className:"size-full","data-testid":"privacy-experience-detail-page",children:[L?(0,t.jsx)(F.Z,{translation:L,translationsEnabled:j,isOOB:Z,onReturnToMainForm:()=>{N(void 0),M(!1)}}):(0,t.jsx)(R.d0,{allPrivacyNotices:C,translationsEnabled:j,onSelectTranslation:e=>{N({...e,name:(0,_.Go)(e,O)})},onCreateTranslation:e=>{let n=null==s?void 0:s.find(n=>n.language===e);return n&&M(!0),null!=n?n:{language:e,is_default:!1}}}),(0,t.jsxs)(o.jqI,{vertical:!0,className:"w-full overflow-y-hidden",style:{backgroundColor:o.rSc.colors.gray[50]},children:[(0,t.jsxs)(o.jqI,{className:"flex-row items-center p-4",style:{backgroundColor:o.rSc.colors.white,borderBottom:"1px solid ".concat(o.rSc.colors.gray[100])},children:[(0,t.jsx)(o.xvT,{fontSize:"md",fontWeight:"semibold",children:"PREVIEW"}),(0,t.jsx)(o.LZC,{}),(0,t.jsx)(o.Cbp,{options:[{value:"mobile",icon:(0,t.jsx)(o.PJP.ij_,{title:"Mobile"})},{value:"desktop",icon:(0,t.jsx)(o.PJP.lLr,{title:"Desktop"})}],defaultValue:"desktop",onChange:e=>x("mobile"===e)})]}),(0,t.jsx)(P,{allPrivacyNotices:C,initialValues:E,translation:L,isMobilePreview:y})]})]})})})}},32222:function(e,n,i){i.d(n,{J:function(){return t}});let t=new Map([["overlay","Overlay"],["privacy_center","Privacy center"],["tcf_overlay","TCF overlay"],["modal","Modal"],["banner_and_modal","Banner and modal"],["headless","Headless"]])},31883:function(e,n,i){i.d(n,{Bw:function(){return t.Bw},D4:function(){return t.D4}});var t=i(19043)}}]);