import{f as j,g as k,i as C}from"./i18n-0yVmjjWQ.js";import{p as P,f as F,U as I,b as S,j as _,af as v,i as a,a9 as n,c as E,_ as L,s as R}from"./index-C_pgmrh1.js";import{B as T}from"./Block-0egmJK1l.js";import"./MarkdownCode.svelte_svelte_type_style_lang-DAcRUV9O.js";/* empty css                                                        */import{G as W}from"./utils.svelte-CSs-vWpU.js";import{U as q}from"./UploadText-BvXWeS2i.js";import D from"./Gallery-BFhwGWvc.js";import{S as H}from"./index-DvI0d63Y.js";/* empty css                                                   */import{F as J}from"./FileUpload-CPCWxWCz.js";/* empty css                                              */import{default as De}from"./Example-C95Ke_4Y.js";import"./prism-python-D4ucVciL.js";import"./ImagePaste-CpdKGATa.js";import"./Upload-4t8cP2rS.js";import"./window-DYJ0TlGf.js";import"./event-modifiers-CdEA5IGF.js";import"./misc-h5ywrOsc.js";import"./BlockLabel-YLz3IT8m.js";import"./IconButton-K-jb6mTx.js";import"./svelte-component-CmmFkUAm.js";import"./Empty-DwOz0SUi.js";import"./ShareButton-C3Liam2S.js";import"./Community-BBRj1hQY.js";import"./Clear-C5Vclyf6.js";import"./Download-BxrIh35j.js";import"./Image-B3d1hKfH.js";import"./Play-CElEXqUW.js";import"./IconButtonWrapper-5UDxdjyf.js";import"./FullscreenButton-Dj4Z7Exs.js";import"./Maximize-B6fo1v01.js";import"./Upload-Dcelqvve.js";import"./actions-BNIdQBfI.js";import"./props-B8I3WwWL.js";/* empty css                                             */import"./utils-BsTlurbm.js";import"./ModifyUpload-BT1U6Dx6.js";import"./DownloadLink-VWOCVi8-.js";import"./Edit--9-HC_HS.js";import"./Undo-D4F5_b4y.js";import"./Image-CRXkce1r.js";/* empty css                                            *//* empty css                                                   */import"./Video-CaWRospO.js";import"./index-tFQomdd2.js";import"./File-DPWgEEWM.js";import"./html-BQTWPY4W.js";var K=F("<!> <!>",1);function Te(w,g){P(g,!0);let u=v(void 0);class y extends W{async get_data(){return a(u)&&(await a(u),await L()),await super.get_data()}}const $=j(g,["$$slots","$$events","$$legacy"]),e=new y($);let d=v(!1),b=n(()=>e.props.value===null?!0:e.props.value.length===0);function x(o){if(!e.props.value)return;const{index:i}=o.detail;e.dispatch("delete",o.detail),e.props.value=e.props.value.filter((s,p)=>p!==i),e.dispatch("change",e.props.value)}async function f(o){return(await Promise.all(o.map(async s=>{if(s.path?.toLowerCase().endsWith(".svg")&&s.url){const c=await(await fetch(s.url)).text();return{...s,url:`data:image/svg+xml,${encodeURIComponent(c)}`}}return s}))).map(s=>s.mime_type?.includes("video")?{video:s,caption:null}:{image:s,caption:null})}{let o=n(()=>typeof e.props.height=="number"?e.props.height:void 0);T(w,{get visible(){return e.shared.visible},variant:"solid",padding:!1,get elem_id(){return e.shared.elem_id},get elem_classes(){return e.shared.elem_classes},get container(){return e.shared.container},get scale(){return e.shared.scale},get min_width(){return e.shared.min_width},allow_overflow:!1,get height(){return a(o)},get fullscreen(){return a(d)},set fullscreen(i){_(d,i,!0)},children:(i,s)=>{var p=K(),c=I(p);H(c,k({get autoscroll(){return e.shared.autoscroll},get i18n(){return e.i18n}},()=>e.shared.loading_status,{$$events:{clear_status:()=>e.dispatch("clear_status",e.shared.loading_status)}}));var G=R(c,2);{var U=l=>{J(l,{value:null,get root(){return e.shared.root},get label(){return e.shared.label},get max_file_size(){return e.shared.max_file_size},file_count:"multiple",get file_types(){return e.props.file_types},get i18n(){return e.i18n},upload:(...r)=>e.shared.client.upload(...r),stream_handler:(...r)=>e.shared.client.stream(...r),get upload_promise(){return a(u)},set upload_promise(r){_(u,r,!0)},$$events:{upload:async r=>{const m=Array.isArray(r.detail)?r.detail:[r.detail];e.props.value=await f(m),e.dispatch("upload",e.props.value),e.dispatch("change",e.props.value)},error:({detail:r})=>{e.shared.loading_status=e.shared.loading_status||{},e.shared.loading_status.status="error",e.dispatch("error",r)}},children:(r,m)=>{q(r,{get i18n(){return e.i18n},type:"gallery"})},$$slots:{default:!0}})},z=l=>{{let r=n(()=>e.props.buttons.includes("share")),m=n(()=>e.props.buttons.includes("download")),A=n(()=>e.props.buttons.includes("fullscreen"));D(l,{get label(){return e.shared.label},get show_label(){return e.shared.show_label},get columns(){return e.props.columns},get rows(){return e.props.rows},get height(){return e.props.height},get preview(){return e.props.preview},get object_fit(){return e.props.object_fit},get interactive(){return e.shared.interactive},get allow_preview(){return e.props.allow_preview},get show_share_button(){return a(r)},get show_download_button(){return a(m)},get fit_columns(){return e.props.fit_columns},get i18n(){return e.i18n},_fetch:(...t)=>e.shared.client.fetch(...t),get show_fullscreen_button(){return a(A)},get fullscreen(){return a(d)},get root(){return e.shared.root},get file_types(){return e.props.file_types},get max_file_size(){return e.shared.max_file_size},upload:(...t)=>e.shared.client.upload(...t),stream_handler:(...t)=>e.shared.client.stream(...t),get selected_index(){return e.props.selected_index},set selected_index(t){e.props.selected_index=t},get value(){return e.props.value},set value(t){e.props.value=t},$$events:{change:()=>e.dispatch("change"),clear:()=>e.dispatch("change"),select:t=>e.dispatch("select",t.detail),share:t=>e.dispatch("share",t.detail),error:t=>e.dispatch("error",t.detail),preview_open:()=>e.dispatch("preview_open"),preview_close:()=>e.dispatch("preview_close"),fullscreen:({detail:t})=>{_(d,t,!0)},delete:x,upload:async t=>{const B=Array.isArray(t.detail)?t.detail:[t.detail],h=await f(B);e.props.value=e.props.value?[...e.props.value,...h]:h,e.dispatch("upload",h),e.dispatch("change",e.props.value)}}})}};C(G,l=>{e.shared.interactive&&a(b)?l(U):l(z,!1)})}S(i,p)},$$slots:{default:!0}})}E()}export{De as BaseExample,D as BaseGallery,Te as default};
//# sourceMappingURL=Index-DQ8Rj981.js.map
